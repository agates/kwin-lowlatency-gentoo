diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/autotests/CMakeLists.txt kwin/autotests/CMakeLists.txt
--- kwin-5.19.0/autotests/CMakeLists.txt	2020-06-08 05:58:58.000000000 -0500
+++ kwin/autotests/CMakeLists.txt	2020-06-09 12:51:19.213398053 -0500
@@ -181,6 +181,7 @@
 kconfig_add_kcfg_files(testScriptedEffectLoader_SRCS ../settings.kcfgc)
 add_executable(testScriptedEffectLoader ${testScriptedEffectLoader_SRCS})
 
+target_compile_definitions(testScriptedEffectLoader PUBLIC KWINLL_NO_OPTIONS)
 target_link_libraries(testScriptedEffectLoader
     Qt5::Concurrent
     Qt5::Qml
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/CMakeLists.txt kwin/CMakeLists.txt
--- kwin-5.19.0/CMakeLists.txt	2020-06-08 05:59:55.000000000 -0500
+++ kwin/CMakeLists.txt	2020-06-09 12:51:19.213398053 -0500
@@ -782,11 +782,3 @@
     INSTALL_DESTINATION ${CMAKECONFIG_INSTALL_DIR})
 install(FILES ${CMAKE_CURRENT_BINARY_DIR}/KWinDBusInterfaceConfig.cmake
     DESTINATION ${CMAKECONFIG_INSTALL_DIR})
-
-find_package(KF5I18n CONFIG REQUIRED)
-ki18n_install(po)
-
-  find_package(KF5DocTools CONFIG)
-  if(KF5DocTools_FOUND)
-    kdoctools_install(po)
-  endif()
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/colorcorrection/clockskewnotifierengine_linux.cpp kwin/colorcorrection/clockskewnotifierengine_linux.cpp
--- kwin-5.19.0/colorcorrection/clockskewnotifierengine_linux.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/colorcorrection/clockskewnotifierengine_linux.cpp	2020-06-09 12:46:46.540066703 -0500
@@ -20,6 +20,7 @@
 
 #include <QSocketNotifier>
 
+#include <errno.h>
 #include <fcntl.h>
 #include <sys/timerfd.h>
 #include <unistd.h>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/composite.cpp kwin/composite.cpp
--- kwin-5.19.0/composite.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/composite.cpp	2020-06-09 12:51:19.240064719 -0500
@@ -61,6 +61,7 @@
 #include <xcb/damage.h>
 
 #include <cstdio>
+#include <unistd.h>
 
 Q_DECLARE_METATYPE(KWin::X11Compositor::SuspendReason)
 
@@ -124,6 +125,7 @@
     , m_selectionOwner(nullptr)
     , vBlankInterval(0)
     , fpsInterval(0)
+    , forceUnredirectCheck(false)
     , m_timeSinceLastVBlank(0)
     , m_scene(nullptr)
     , m_bufferSwapPending(false)
@@ -132,6 +134,10 @@
     connect(options, &Options::configChanged, this, &Compositor::configChanged);
     connect(options, &Options::animationSpeedChanged, this, &Compositor::configChanged);
 
+    connect(&unredirectTimer, &QTimer::timeout, this, &Compositor::delayedCheckUnredirect);
+    connect(options, &Options::unredirectFullscreenChanged, this, &Compositor::delayedCheckUnredirect);
+    unredirectTimer.setSingleShot(true);
+    
     m_monotonicClock.start();
 
     // 2 sec which should be enough to restart the compositor.
@@ -739,7 +745,19 @@
     if (m_bufferSwapPending && m_scene->syncsToVBlank()) {
         m_composeAtSwapCompletion = true;
     } else {
-        scheduleRepaint();
+        if (m_bufferSwapPending && m_scene->syncsToVBlank()) {
+          m_composeAtSwapCompletion = true;
+        } else {
+          if (m_idle) {
+            m_idle=false;
+            m_totalSkips--;
+            if (m_totalSkips<0) m_totalSkips=0;
+            // TODO: improve this thing
+            m_lastPaintFree=2000;
+          }
+          usleep(m_lastPaintFree);
+          scheduleRepaint();
+        }
     }
 }
 
@@ -855,6 +873,57 @@
         }
     }
     // Force 4fps minimum:
+    if (waitTime<4) waitTime=4;
+    m_totalSkips-=0.004;
+    if (m_totalSkips<0) {
+      m_totalSkips=0;
+    }
+    if ((signed)(m_lastPaintFree-2000)>(signed)((waitTime*1000)-4000)) {
+      m_totalSkips++;
+      switch (options->latencyControl()) {
+        case 0: // favor responsive
+          m_lastPaintFree=(waitTime*1000)-4000;
+          break;
+        case 2: // favor low-latency
+          m_lastPaintFree-=500;
+          break;
+        case 3: // aggressive
+          m_lastPaintFree-=300;
+          break;
+        case 1: default: // balanced
+          m_lastPaintFree-=500;
+          break;
+      }
+      //printf("\x1b[1;31mstutter\x1b[m\n");
+    } else {
+      switch (options->latencyControl()) {
+        case 0: // favor responsive
+          m_lastPaintFree=fmin((waitTime*1000)-4000,m_lastPaintFree+(50-m_totalSkips*5));
+          break;
+        case 2: // favor low-latency
+          m_lastPaintFree=fmin((waitTime*1000)-4000,m_lastPaintFree+(500-m_totalSkips*30));
+          break;
+        case 3: // aggressive
+          m_lastPaintFree=fmin((waitTime*1000)-4000,m_lastPaintFree+(1000-m_totalSkips*30));
+          break;
+        case 1: default: // balanced
+          m_lastPaintFree=fmin((waitTime*1000)-4000,m_lastPaintFree+(200-m_totalSkips*20));
+          break;
+      }
+    }
+    if (m_lastPaintFree<options->minLatency()*1000) {
+      m_lastPaintFree=options->minLatency()*1000;
+    }
+    if (m_lastPaintFree<1) {
+      m_lastPaintFree=1;
+    }
+    if (m_lastPaintFree>options->maxLatency()*1000) {
+      m_lastPaintFree=options->maxLatency()*1000;
+    }
+    if (m_totalSkips>10) {
+      m_totalSkips=10;
+    }
+    waitTime=0;
     compositeTimer.start(qMin(waitTime, 250u), this);
 }
 
@@ -863,6 +932,54 @@
     return m_state == State::On;
 }
 
+void Compositor::checkUnredirect()
+{
+    checkUnredirect(false);
+}
+
+// force is needed when the list of windows changes (e.g. a window goes away)
+void Compositor::checkUnredirect(bool force)
+{
+    if (!isActive() || !m_scene->overlayWindow() || m_scene->overlayWindow()->window() == None || !options->isUnredirectFullscreen())
+        return;
+    if (force)
+        forceUnredirectCheck = true;
+    if (!unredirectTimer.isActive())
+        unredirectTimer.start(0);
+}
+
+void Compositor::delayedCheckUnredirect()
+{
+    if (!isActive() || !m_scene->overlayWindow() || m_scene->overlayWindow()->window() == None || !(options->isUnredirectFullscreen() || sender() == options))
+        return;
+    QList<Toplevel*> list;
+    bool changed = forceUnredirectCheck;
+    foreach (X11Client * c, Workspace::self()->clientList())
+        list.append(c);
+    foreach (Unmanaged * c, Workspace::self()->unmanagedList())
+        list.append(c);
+    foreach (Toplevel * c, list) {
+        if (c->updateUnredirectedState()) {
+            changed = true;
+            break;
+        }
+    }
+    // no desktops, no Deleted ones
+    if (!changed)
+        return;
+    forceUnredirectCheck = false;
+    // Cut out parts from the overlay window where unredirected windows are,
+    // so that they are actually visible.
+    const QSize &s = screens()->size();
+    QRegion reg(0, 0, s.width(), s.height());
+    foreach (Toplevel * c, list) {
+        if (c->unredirected())
+            reg -= c->frameGeometry();
+    }
+    m_scene->overlayWindow()->setShape(reg);
+    addRepaint(reg);
+}
+
 WaylandCompositor::WaylandCompositor(QObject *parent)
     : Compositor(parent)
 {
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/composite.h kwin/composite.h
--- kwin-5.19.0/composite.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/composite.h	2020-05-23 22:06:04.500487374 -0500
@@ -59,6 +59,13 @@
      * Schedules a new repaint if no repaint is currently scheduled.
      */
     void scheduleRepaint();
+    
+    /**
+     * Checks for possibly unredirectable windows.
+     */
+    void checkUnredirect();
+    void checkUnredirect(bool force);
+    void delayedCheckUnredirect();
 
     /**
      * Notifies the compositor that SwapBuffers() is about to be called.
@@ -161,6 +168,9 @@
     qint64 vBlankInterval, fpsInterval;
     QRegion repaints_region;
 
+    QTimer unredirectTimer;
+    bool forceUnredirectCheck;
+    
     qint64 m_timeSinceLastVBlank;
 
     Scene *m_scene;
@@ -170,6 +180,11 @@
 
     int m_framesToTestForSafety = 3;
     QElapsedTimer m_monotonicClock;
+    
+    // low-latency stuff
+    int m_lastPaintFree=8000;
+    float m_totalSkips=0;
+    bool m_idle;
 };
 
 class KWIN_EXPORT WaylandCompositor : public Compositor
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/deleted.cpp kwin/deleted.cpp
--- kwin-5.19.0/deleted.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/deleted.cpp	2020-05-23 22:06:04.500487374 -0500
@@ -313,5 +313,10 @@
     m_transientFor.removeAll(parent);
 }
 
+bool Deleted::shouldUnredirect() const
+{
+    return false;
+}
+
 } // namespace
 
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/deleted.h kwin/deleted.h
--- kwin-5.19.0/deleted.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/deleted.h	2020-05-23 22:06:04.500487374 -0500
@@ -185,6 +185,7 @@
 
 protected:
     void debug(QDebug& stream) const override;
+    bool shouldUnredirect() const override;
 
 private Q_SLOTS:
     void mainClientClosed(KWin::Toplevel *client);
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/blur/blur_config.desktop kwin/effects/blur/blur_config.desktop
--- kwin-5.19.0/effects/blur/blur_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/blur/blur_config.desktop	2020-06-09 12:51:19.240064719 -0500
@@ -24,7 +24,6 @@
 Name[eo]=Malklarigi
 Name[es]=Desenfocar
 Name[et]=Hägu
-Name[eu]=Lausotu
 Name[fa]=محو
 Name[fi]=Sumennus
 Name[fr]=Flou
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/CMakeLists.txt kwin/effects/CMakeLists.txt
--- kwin-5.19.0/effects/CMakeLists.txt	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/CMakeLists.txt	2020-06-09 12:51:19.240064719 -0500
@@ -90,6 +90,7 @@
     magnifier/magnifier.cpp
     mouseclick/mouseclick.cpp
     mousemark/mousemark.cpp
+    mousepos/mousepos.cpp
     presentwindows/presentwindows.cpp
     presentwindows/presentwindows_proxy.cpp
     resize/resize.cpp
@@ -121,6 +122,7 @@
     magnifier/magnifierconfig.kcfgc
     mouseclick/mouseclickconfig.kcfgc
     mousemark/mousemarkconfig.kcfgc
+    mousepos/mouseposconfig.kcfgc
     presentwindows/presentwindowsconfig.kcfgc
     resize/resizeconfig.kcfgc
     showfps/showfpsconfig.kcfgc
@@ -192,6 +194,7 @@
 add_subdirectory(magnifier)
 add_subdirectory(mouseclick)
 add_subdirectory(mousemark)
+add_subdirectory(mousepos)
 include(screenshot/CMakeLists.txt)
 include(sheet/CMakeLists.txt)
 include(snaphelper/CMakeLists.txt)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/coverswitch/coverswitch_config.desktop kwin/effects/coverswitch/coverswitch_config.desktop
--- kwin-5.19.0/effects/coverswitch/coverswitch_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/coverswitch/coverswitch_config.desktop	2020-06-09 12:51:19.240064719 -0500
@@ -20,7 +20,6 @@
 Name[eo]=Kovra ŝanĝilo
 Name[es]=Selección de ventana en modo carátula
 Name[et]=Aknalülitaja
-Name[eu]=Leiho-argazkien aldaketa
 Name[fi]=Levykansivaihtaja
 Name[fr]=Défilement circulaire
 Name[fy]=Foarplaat wiksel
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/cube/cube_config.desktop kwin/effects/cube/cube_config.desktop
--- kwin-5.19.0/effects/cube/cube_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/cube/cube_config.desktop	2020-06-09 12:51:19.240064719 -0500
@@ -22,7 +22,6 @@
 Name[eo]=Labortabla Kubo
 Name[es]=Cubo de escritorio
 Name[et]=Töölauakuubik
-Name[eu]=Mahaigain kuboa
 Name[fi]=Työpöytäkuutio
 Name[fr]=Bureau en cube
 Name[fy]=Buroblêdkubus
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/cubeslide/cubeslide_config.desktop kwin/effects/cubeslide/cubeslide_config.desktop
--- kwin-5.19.0/effects/cubeslide/cubeslide_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/cubeslide/cubeslide_config.desktop	2020-06-09 12:51:19.240064719 -0500
@@ -19,7 +19,6 @@
 Name[eo]=Movbildo de Labortabla kubo
 Name[es]=Animación del cubo de escritorio
 Name[et]=Töölauakuubiku animeerimine
-Name[eu]=Mahaigain kuboaren animazioa
 Name[fi]=Työpöytäkuutioanimaatio
 Name[fr]=Animation du bureau en cube
 Name[fy]=Buroblêd kubus animaasje
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/desktopgrid/desktopgrid_config.desktop kwin/effects/desktopgrid/desktopgrid_config.desktop
--- kwin-5.19.0/effects/desktopgrid/desktopgrid_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/desktopgrid/desktopgrid_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -23,7 +23,6 @@
 Name[eo]=Labortabla krado
 Name[es]=Rejilla del escritorio
 Name[et]=Töölauavõrgustik
-Name[eu]=Mahaigain sareta
 Name[fa]=توری رومیزی
 Name[fi]=Työpöydän ruudukko
 Name[fr]=Bureau en grille
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/dialogparent/package/metadata.desktop kwin/effects/dialogparent/package/metadata.desktop
--- kwin-5.19.0/effects/dialogparent/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/dialogparent/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -15,7 +15,6 @@
 Name[eo]=Dialoga patro
 Name[es]=Padre de la ventana
 Name[et]=Dialoogi eellane
-Name[eu]=Elkarrizketa-koadroaren gurasoa
 Name[fa]=پدر محاوره
 Name[fi]=Isäikkuna
 Name[fr]=Boîte de dialogue parente
@@ -88,7 +87,6 @@
 Comment[eo]=Malheligas patrajn fenestrojn de la aktuala aktiva dialogo
 Comment[es]=Oscurece la ventana madre de los diálogos activos
 Comment[et]=Tumendab aktiivse dialoogi eellasakna
-Comment[eu]=Unean aktibo dagoen elkarrizketa-koadroaren leiho gurasoa iluntzen du
 Comment[fi]=Himmentää aktiivisen kyselyikkunan isäntäikkunan
 Comment[fr]=Assombrit la fenêtre parente de la fenêtre active courante
 Comment[fy]=Fertsjustert it haadfinster fan aktive dialogen
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/diminactive/diminactive_config.desktop kwin/effects/diminactive/diminactive_config.desktop
--- kwin-5.19.0/effects/diminactive/diminactive_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/diminactive/diminactive_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -20,7 +20,6 @@
 Name[eo]=Malheligi neaktivajn
 Name[es]=Oscurecer inactiva
 Name[et]=Tuhm mitteaktiivne
-Name[eu]=Ilundu inaktiboak
 Name[fi]=Passiivisen himmennys
 Name[fr]=Estompe les inactifs
 Name[fy]=Net aktive dimme
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/dimscreen/package/metadata.desktop kwin/effects/dimscreen/package/metadata.desktop
--- kwin-5.19.0/effects/dimscreen/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/dimscreen/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -12,7 +12,6 @@
 Comment[eo]=Malheligi la tutan ekranon kiam ĉefuzantaj permesoj estas petitaj.
 Comment[es]=Oscurece la pantalla completa cuando se requieran privilegios de root
 Comment[et]=Tumendab administraatori õiguste nõudmisel kogu ekraani
-Comment[eu]=Pantaila osoa iluntzen du root-aren pribilegioak eskatzean
 Comment[fi]=Tummentaa koko näytön pääkäyttäjäoikeuksia kysyttäessä
 Comment[fr]=Noircit la totalité du bureau quand les privilèges administrateurs sont nécessaires
 Comment[fy]=It gehiele skerm donker meitsje as der om root-rjochten frege wurdt
@@ -76,7 +75,6 @@
 Name[eo]=Malheligi la ekranon en administra reĝimo
 Name[es]=Oscurecer la pantalla en el modo administrador
 Name[et]=Tuhm ekraan administraatori režiimis
-Name[eu]=Ilundu leihoa administratzaile modurako
 Name[fi]=Himmennä näyttö pääkäyttäjätilassa
 Name[fr]=Assombrir l'écran pour le mode administrateur
 Name[fy]=Yn administratormodus it skerm dimme
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/effect_builtins.cpp kwin/effects/effect_builtins.cpp
--- kwin-5.19.0/effects/effect_builtins.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/effect_builtins.cpp	2020-06-09 12:51:19.243398052 -0500
@@ -54,6 +54,7 @@
 #include "magnifier/magnifier.h"
 #include "mouseclick/mouseclick.h"
 #include "mousemark/mousemark.h"
+#include "mousepos/mousepos.h"
 #include "sheet/sheet.h"
 #include "snaphelper/snaphelper.h"
 #include "startupfeedback/startupfeedback.h"
@@ -381,6 +382,21 @@
         nullptr,
         nullptr
 #endif
+EFFECT_FALLBACK
+    }, {
+        QStringLiteral("mousepos"),
+        i18ndc("kwin_effects", "Name of a KWin Effect", "Paint cursor"),
+        i18ndc("kwin_effects", "Comment describing the KWin Effect", "Redraw the mouse cursor for capturing the display using kmsgrab in FFmpeg"),
+        QStringLiteral("Tools"),
+        QString(),
+        QUrl(),
+        false,
+        false,
+#ifdef EFFECT_BUILTINS
+        &createHelper<MousePosEffect>,
+        nullptr,
+        nullptr
+#endif
 EFFECT_FALLBACK
     }, {
         QStringLiteral("presentwindows"),
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/effect_builtins.h kwin/effects/effect_builtins.h
--- kwin-5.19.0/effects/effect_builtins.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/effect_builtins.h	2020-05-23 22:06:04.500487374 -0500
@@ -53,6 +53,7 @@
     Magnifier,
     MouseClick,
     MouseMark,
+    MousePos,
     PresentWindows,
     Resize,
     ScreenEdge,
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/eyeonscreen/package/metadata.desktop kwin/effects/eyeonscreen/package/metadata.desktop
--- kwin-5.19.0/effects/eyeonscreen/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/eyeonscreen/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -5,7 +5,6 @@
 Name[en_GB]=Eye on Screen
 Name[es]=Ojo a la pantalla
 Name[et]=Eye on Screen
-Name[eu]=Begirada pantailan
 Name[fr]=Jeter un oeil sur le bureau
 Name[ia]=Eye On Screen (Oculo sur schermo)
 Name[id]=Mata di Layar
@@ -30,7 +29,6 @@
 Comment[en_GB]=Suck windows into the desktop
 Comment[es]=Aspirar las ventanas en el escritorio
 Comment[et]=Akende imemine töölauale
-Comment[eu]=Mahaigainak leihoak xurgatu
 Comment[fr]=Faire disparaître les fenêtres dans le bureau
 Comment[ia]=Suger fenestras in le scriptorio
 Comment[id]=Sedot window ke desktop
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/fade/package/metadata.desktop kwin/effects/fade/package/metadata.desktop
--- kwin-5.19.0/effects/fade/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/fade/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -16,7 +16,6 @@
 Name[eo]=Dissolvi
 Name[es]=Fundido
 Name[et]=Hääbumine
-Name[eu]=Desagertzea
 Name[fa]=محو کردن
 Name[fi]=Häivytys
 Name[fr]=Fondu
@@ -92,7 +91,6 @@
 Comment[eo]=Fenestroj glate maldissolvi/fordissolvi kiam ili videbliĝas aŭ kaŝiĝas
 Comment[es]=Hace que las ventanas aparezcan suavemente o se desvanezcan al mostrarlas u ocultarlas
 Comment[et]=Paneb aknad sujuvalt hääbuma või tugevnema, kui need peidetakse või nähtavale tuuakse
-Comment[eu]=Leihoak emeki agertzen eta desagertzen ditu haiek erakustean edo ezkutatzean
 Comment[fi]=Ikkunat tulevat näkyviin tai poistuvat näkyvistä pehmeästi häivyttäen
 Comment[fr]=Estompe ou fait apparaître en fondu les fenêtres lorsqu'elles sont affichées ou cachées
 Comment[fy]=Lit finters útstrutsen ferfage of opkomme as se te sjen binne of ferburgen wurde
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/fadedesktop/package/metadata.desktop kwin/effects/fadedesktop/package/metadata.desktop
--- kwin-5.19.0/effects/fadedesktop/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/fadedesktop/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -14,7 +14,6 @@
 Name[eo]=Labortablo Dissolvo  
 Name[es]=Difuminar escritorio
 Name[et]=Töölaua hääbumine
-Name[eu]=Mahaigaina desagertzea
 Name[fi]=Työpöydän häivytys
 Name[fr]=Effectue un fondu du bureau
 Name[fy]=Buroblêd ferfagje
@@ -80,7 +79,6 @@
 Comment[eo]=Disvolvi inter virtualaj labortabloj kiam ŝaltas inter ili.
 Comment[es]=Difumina al cambiar entre escritorios virtuales
 Comment[et]=Hääbumisefekt ühelt virtuaalselt töölaualt teisele lülitudes
-Comment[eu]=Uneko mahaigaina desagerrarazi mahagain batetik bestera aldatzean
 Comment[fi]=Häivytys virtuaalityöpöytien välillä niitä vaihdettaessa
 Comment[fr]=Effectue un fondu entre les bureaux virtuels lors des changements de bureau
 Comment[fy]=By it wikseljen tusken firuele buroblêden in ferfaging dwaan
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/fadingpopups/package/metadata.desktop kwin/effects/fadingpopups/package/metadata.desktop
--- kwin-5.19.0/effects/fadingpopups/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/fadingpopups/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -8,7 +8,6 @@
 Name[en_GB]=Fading Popups
 Name[es]=Desvanecer ventanas emergentes
 Name[et]=Hääbuvad hüpikdialoogid
-Name[eu]=Itzaleztatzen diren gainerakorrak
 Name[fi]=Hiipuvat ponnahdusikkunat
 Name[fr]=Fondu des boîtes de dialogue
 Name[gl]=Xanelas emerxentes que esvaen
@@ -41,7 +40,6 @@
 Comment[en_GB]=Make popups smoothly fade in and out when they are shown or hidden
 Comment[es]=Hace que las ventanas emergentes aparezcan o se desvanezcan suavemente al mostrarlas u ocultarlas
 Comment[et]=Paneb hüpikaknad sujuvalt hääbuma või tugevnema, kui need peidetakse või nähtavale tuuakse
-Comment[eu]=Gainerakorrak emeki agertzen eta desagertzen ditu haiek erakustean edo ezkutatzean
 Comment[fi]=Ponnahdusikkunat tulevat näkyviin tai poistuvat näkyvistä pehmeästi häivyttäen
 Comment[fr]=Estompe ou fait apparaître en fondu les boîtes de dialogue lorsqu'elles sont affichées ou cachées
 Comment[gl]=Esvae e fai opacas as xanelas emerxentes con suavidade ao mostralas ou agochadas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/flipswitch/flipswitch_config.desktop kwin/effects/flipswitch/flipswitch_config.desktop
--- kwin-5.19.0/effects/flipswitch/flipswitch_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/flipswitch/flipswitch_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -19,7 +19,6 @@
 Name[eo]=Turna ŝanĝilo
 Name[es]=Selección de ventana en modo cascada
 Name[et]=Aknalehitseja
-Name[eu]=Biratze aldaketa
 Name[fi]=Kääntövaihtaja
 Name[fr]=Empilement en perspective
 Name[fy]=Flip wiksel
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/frozenapp/package/metadata.desktop kwin/effects/frozenapp/package/metadata.desktop
--- kwin-5.19.0/effects/frozenapp/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/frozenapp/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -8,7 +8,6 @@
 Name[en_GB]=Desaturate Unresponsive Applications
 Name[es]=Desaturar las aplicaciones que no responden
 Name[et]=Reageerimisvõimetute rakenduste muutmine kahvatuks
-Name[eu]=Desasetu erantzuten ez duten aplikazioak
 Name[fi]=Vähennä värikylläisyyttä sovelluksilta, jotka eivät vastaa
 Name[fr]=Désature les applications qui ne répondent pas
 Name[gl]=Reducir a saturación das aplicacións que non responden
@@ -47,7 +46,6 @@
 Comment[en_GB]=Desaturate windows of unresponsive (frozen) applications
 Comment[es]=Desaturar las ventanas de las aplicaciones que no responden (congeladas)
 Comment[et]=Reageerimisvõimetute (hangunud) rakenduste akende muutmine kahvatuks
-Comment[eu]=Desasetu erantzuten ez duten aplikazioen leihoak (izoztuak)
 Comment[fi]=Vähennä värikylläisyyttä sovelluksilta, jotka eivät vastaa (ovat jumittuneet)
 Comment[fr]=Désature les fenêtres des applications qui ne répondent pas (gelées)
 Comment[gl]=Reducir a saturación das xanelas de aplicacións que non responden (conxeladas)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/glide/glide_config.desktop kwin/effects/glide/glide_config.desktop
--- kwin-5.19.0/effects/glide/glide_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/glide/glide_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -18,7 +18,6 @@
 Name[en_GB]=Glide
 Name[es]=Glide
 Name[et]=Liuglemine
-Name[eu]=Irristatzea
 Name[fi]=Ikkunaliuku
 Name[fr]=Glisser
 Name[ga]=Sleamhnaigh
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/invert/invert_config.desktop kwin/effects/invert/invert_config.desktop
--- kwin-5.19.0/effects/invert/invert_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/invert/invert_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -23,7 +23,6 @@
 Name[eo]=Inversigi
 Name[es]=Invertir
 Name[et]=Teistpidi
-Name[eu]=Alderantzikatu
 Name[fa]=وارونه
 Name[fi]=Käänteiset värit
 Name[fr]=Inverse
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/kwineffect.desktop kwin/effects/kwineffect.desktop
--- kwin-5.19.0/effects/kwineffect.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/kwineffect.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -21,7 +21,6 @@
 Comment[eo]=KWin efekto
 Comment[es]=Efecto de KWin
 Comment[et]=KWin'i efektid
-Comment[eu]=KWin efektua
 Comment[fa]=جلوه‌های KWin
 Comment[fi]=KWin-tehoste
 Comment[fr]=Effet KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/login/package/metadata.desktop kwin/effects/login/package/metadata.desktop
--- kwin-5.19.0/effects/login/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/login/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -20,7 +20,6 @@
 Name[eo]=Ensaluto
 Name[es]=Acceso
 Name[et]=Sisselogimine
-Name[eu]=Saio-hasiera
 Name[fi]=Sisäänkirjautuminen
 Name[fr]=Connexion 
 Name[fy]=Ynlogge
@@ -99,7 +98,6 @@
 Comment[en_GB]=Smoothly fade to the desktop when logging in
 Comment[es]=Desvanece el escritorio cuando se inicia la sesión
 Comment[et]=Töölaua sujuv ilmumine sisselogimisel
-Comment[eu]=Emeki desagertu mahaigainerantz saio-hastean
 Comment[fi]=Häivytä pehmeästi työpöydälle kirjauduttaessa sisään
 Comment[fr]=Effectue un dégradé progressif vers le bureau lors de la connexion
 Comment[fy]=Lit it opstartskerm ferdizenje nei it buroblêd ûnder it oanmelden
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/logout/package/metadata.desktop kwin/effects/logout/package/metadata.desktop
--- kwin-5.19.0/effects/logout/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/logout/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Logout
 Name[es]=Cerrar la sesión
 Name[et]=Väljalogimine
-Name[eu]=Saio-ixtea
 Name[fi]=Kirjaudu ulos
 Name[fr]=Déconnexion
 Name[gl]=Saír
@@ -44,7 +43,6 @@
 Comment[en_GB]=Smoothly fade to the logout screen
 Comment[es]=Desvanecer suavemente hasta la pantalla de cierre de sesión
 Comment[et]=Sujuv hääbumine sisselogimisekraani ilmumiseni
-Comment[eu]=Emeki desagertu saio-ixteko pantailarantz
 Comment[fi]=Häivytä pehmeästi kirjautumisikkunaan
 Comment[fr]=Effectue un dégradé progressif vers l'écran de déconnexion
 Comment[gl]=Suaviza a aparición da pantalla de saída
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/lookingglass/lookingglass_config.desktop kwin/effects/lookingglass/lookingglass_config.desktop
--- kwin-5.19.0/effects/lookingglass/lookingglass_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/lookingglass/lookingglass_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -22,7 +22,6 @@
 Name[eo]=Looking Glass
 Name[es]=Espejo
 Name[et]=Suurendusklaas
-Name[eu]=Pantaila-lupa
 Name[fi]=Suurennuslasi
 Name[fr]=Loupe
 Name[fy]=Looking Glass
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/magiclamp/magiclamp_config.desktop kwin/effects/magiclamp/magiclamp_config.desktop
--- kwin-5.19.0/effects/magiclamp/magiclamp_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/magiclamp/magiclamp_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -21,7 +21,6 @@
 Name[eo]=Magia Lampo
 Name[es]=Lámpara mágica
 Name[et]=Imelamp
-Name[eu]=Lanpara magikoa
 Name[fi]=Taikalamppu
 Name[fr]=Lampe Magique
 Name[fy]=Magyske lamp
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/magnifier/magnifier_config.desktop kwin/effects/magnifier/magnifier_config.desktop
--- kwin-5.19.0/effects/magnifier/magnifier_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/magnifier/magnifier_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -24,7 +24,6 @@
 Name[eo]=Pligrandigilo
 Name[es]=Lupa
 Name[et]=Suurendaja
-Name[eu]=Lupa
 Name[fa]=ذره‌بین
 Name[fi]=Suurennuslasi
 Name[fr]=Loupe
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/maximize/package/metadata.desktop kwin/effects/maximize/package/metadata.desktop
--- kwin-5.19.0/effects/maximize/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/maximize/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -10,7 +10,6 @@
 Comment[en_GB]=Animation for a window going to maximise/restore from maximise
 Comment[es]=Animación para una ventana que se va a maximizar o restaurar de una maximización
 Comment[et]=Maksimeeritava või maksimeeritust taastatava akna animatsioon
-Comment[eu]=Leihoa maximizatzera/maximizatutik leheneratzera doanerako animazioa
 Comment[fi]=Animointi ikkunalle, joka suurennetaan tai palautetaan suurennuksesta
 Comment[fr]=Animation pour une fenêtre passant d'un état maximisé vers un état maximisé / restauré
 Comment[gl]=Animación das xanelas que se maximizan ou restauran maximizadas
@@ -58,7 +57,6 @@
 Name[en_GB]=Maximise
 Name[es]=Maximizar
 Name[et]=Maksimeerimine
-Name[eu]=Maximizatu
 Name[fi]=Suurentaminen
 Name[fr]=Maximiser
 Name[ga]=Uasmhéadaigh
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/morphingpopups/package/metadata.desktop kwin/effects/morphingpopups/package/metadata.desktop
--- kwin-5.19.0/effects/morphingpopups/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/morphingpopups/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -8,7 +8,6 @@
 Comment[en_GB]=Cross fade animation when Tooltips or Notifications change their geometry
 Comment[es]=Animación de transición suave cuando las ayudas emergentes o las notificaciones cambian su geometría
 Comment[et]=Animatsioon hääbumisega, kui kohtspikrid või märguanded muudavad geomeetriat
-Comment[eu]=Desagertze gurutzatua tresnen argibideek edo jakinarazpenek geometria aldatzen dutenean
 Comment[fi]=Häivytysanimaatio työkaluvihjeiden tai ilmoitusten koon muuttuessa
 Comment[fr]=Animation de fondu quand les infobulles ou les notifications changent de forme
 Comment[gl]=Usar unha animación de esvaemento cando a xeometría das mensaxes emerxentes de axuda ou notificación cambia.
@@ -46,7 +45,6 @@
 Name[en_GB]=Morphing popups
 Name[es]=Transformación de ventanas emergentes
 Name[et]=Moonduvad hüpikdialoogid
-Name[eu]=Eraldatzen diren gainerakorrak
 Name[fi]=Ponnahdusikkunoiden muodonmuutos
 Name[fr]=Fondu des menus surgissants
 Name[gl]=Xanelas emerxentes cambiantes
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mouseclick/mouseclick_config.desktop kwin/effects/mouseclick/mouseclick_config.desktop
--- kwin-5.19.0/effects/mouseclick/mouseclick_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/mouseclick/mouseclick_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -17,7 +17,6 @@
 Name[en_GB]=Mouse Click Animation
 Name[es]=Animación del clic de ratón
 Name[et]=Hiireklõpsu animeerimine
-Name[eu]=Sagu-klikaren animazioa
 Name[fi]=Hiiren napsautuksen animointi
 Name[fr]=Animation du clic de la souris
 Name[gl]=Animación ao premer o rato
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousemark/mousemark_config.desktop kwin/effects/mousemark/mousemark_config.desktop
--- kwin-5.19.0/effects/mousemark/mousemark_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/mousemark/mousemark_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -23,7 +23,6 @@
 Name[eo]=Musmarko
 Name[es]=Marcación con el ratón
 Name[et]=Hiirejälg
-Name[eu]=Sagu-marka
 Name[fa]=نشان موشی
 Name[fi]=Hiiren jäljet
 Name[fr]=Tracé à la souris
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/CMakeLists.txt kwin/effects/mousepos/CMakeLists.txt
--- kwin-5.19.0/effects/mousepos/CMakeLists.txt	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/CMakeLists.txt	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,25 @@
+#######################################
+# Config
+set(kwin_mousepos_config_SRCS mousepos_config.cpp)
+ki18n_wrap_ui(kwin_mousepos_config_SRCS mousepos_config.ui)
+qt5_add_dbus_interface(kwin_mousepos_config_SRCS ${kwin_effects_dbus_xml} kwineffects_interface)
+kconfig_add_kcfg_files(kwin_mousepos_config_SRCS mouseposconfig.kcfgc)
+
+add_library(kwin_mousepos_config MODULE ${kwin_mousepos_config_SRCS})
+
+target_link_libraries(kwin_mousepos_config
+    KF5::ConfigWidgets
+    KF5::GlobalAccel
+    KF5::I18n
+    KF5::Service
+    KF5::XmlGui
+)
+
+kcoreaddons_desktop_to_json(kwin_mousepos_config mousepos_config.desktop SERVICE_TYPES kcmodule.desktop)
+
+install(
+    TARGETS
+        kwin_mousepos_config
+    DESTINATION
+        ${PLUGIN_INSTALL_DIR}/kwin/effects/configs
+)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/data/1.10/motion.frag kwin/effects/mousepos/data/1.10/motion.frag
--- kwin-5.19.0/effects/mousepos/data/1.10/motion.frag	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/data/1.10/motion.frag	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,43 @@
+#version 140
+
+// thanks Steven Lu
+
+uniform sampler2D sampler;
+in vec2 f_sceneCoord; // this should be pretransformed texcoord to scene tex
+// it is also appropriate to use as a "this pixel" position
+// (in relation to center, etc)
+varying float f_alpha;
+varying vec2 f_center;
+in vec3 f_vel;
+in float samples;
+varying mat2 rot_per_sample;
+
+out vec4 fragColor;
+
+void main (void) {
+vec2 original_center = f_center - f_vel.xy;
+// vel.xy is actually just the dist
+vec4 accum = vec4(0,0,0,0);
+mat2 cumulativeRotation;
+// set identity rotation matrix
+cumulativeRotation[0] = vec2(1,0); cumulativeRotation[1] = vec2(0,
+1);
+float samples_i = ceil(samples);
+for(int i=0;i<samples_i;++i) {
+float fraction = float(i)/samples_i;
+vec2 pos = cumulativeRotation*(f_sceneCoord+f_vel.xy*fraction-f_center)+ f_center;
+if (pos.x>1.0f || pos.x<0.0f || pos.y>1.0f || pos.y<0.0f) continue;
+vec4 col = texture2D(sampler, pos);
+//col=vec4(0.0f,0.0f,0.0f,0.0f);
+// 1: translate to orig ctr 2: rotate by i*rot
+// 3: translate back to origctr+(curctr-origctr)*i
+if (col.a>0.01f) { accum = accum + vec4(col.rgba); }
+cumulativeRotation = cumulativeRotation * rot_per_sample;
+}
+if (accum.a < 1.0/1024.) discard; // prevent divide by zero
+fragColor = vec4(accum.rgb*(1.0/accum.a),accum.a/samples_i);
+//fragColor=vec4(texture2D(sampler, f_sceneCoord));
+//fragColor=vec4(1.0f,1.0f,1.0f,1.0f);
+// This should be a non-premultiplied alpha value for use with
+// saturate blending.
+}
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/data/1.10/motion.vert kwin/effects/mousepos/data/1.10/motion.vert
--- kwin-5.19.0/effects/mousepos/data/1.10/motion.vert	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/data/1.10/motion.vert	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,61 @@
+#version 140
+
+// thanks Steven Lu
+
+// KWin
+uniform mat4 projection;
+uniform mat4 modelview;
+uniform mat4 modelViewProjectionMatrix;
+uniform mat4 textureMatrix;
+
+in vec4 position;
+in vec4 texcoord;
+
+uniform mat4 mvm;
+uniform vec2 viewport;
+uniform vec2 in_pos;
+// this is vertex position
+uniform vec2 in_center;
+uniform vec4 in_vel;
+uniform vec2 in_sizes;
+// those were the per-object velocity related quantities
+// I pack omega*dt into in_vel.z, and in_vel.w is max-displacement
+// for calculating samples
+uniform float in_alpha;
+varying float f_alpha;
+varying vec2 f_center;
+out vec3 f_vel;
+out float samples; // # of samples to blur
+varying mat2 rot_per_sample; // A special scale-rotate matrix
+out vec2 f_sceneCoord; // NDC to tex coord
+varying mat4 f_scale;
+void main (void) {
+mat4 proj_modelview_mat = projection * modelview;
+f_scale[0]=vec4(1.0+abs(in_vel.x),0.0,0.0,-abs(in_vel.x)*(in_pos.x+((sign(in_vel.x)>0.5)?in_sizes.x:0.0)));
+f_scale[1]=vec4(0.0,1.0+abs(in_vel.y),0.0,-abs(in_vel.y)*(in_pos.y+((sign(in_vel.y)>0.5)?in_sizes.y:0.0)));
+f_scale[2]=vec4(0.0,0.0,1.0,0.0);
+f_scale[3]=vec4(0.0,0.0,0.0,1.0);
+/*f_scale[0]=vec4(1.0,0.0,0.0,0.0);
+f_scale[1]=vec4(0.0,1.0,0.0,0.0);
+f_scale[2]=vec4(0.0,0.0,1.0,0.0);
+f_scale[3]=vec4(0.0,0.0,0.0,1.0);*/
+gl_Position = modelViewProjectionMatrix * vec4(position.xyzw*f_scale);
+f_sceneCoord = vec2( texcoord)*(1+abs(in_vel.xy))-max(vec2(0.0,0.0),in_vel.xy);
+f_center = ((modelViewProjectionMatrix * vec4(in_center,0.0,1.0)).xy
++ vec2(1.0,1.0))*0.5; // transform the center to clip space
+f_vel.xy=in_vel.xy;
+//f_vel.xy = (proj_modelview_mat * vec4(in_vel.xy,0.0,0.0)).xy * 0.5;
+// velocity also need to be in clip space
+// careful! We don't shift this one, only scale
+f_vel.z = in_vel.z; // Store omega in z-comp in radians
+samples = min(50,(modelViewProjectionMatrix * vec4(in_vel.w,0,0,0)).x
+* viewport.x * 2 + 1);
+// w here is not omega it is the max disp value from CPU
+float theta = in_vel.z/(samples);
+float cost = cos(theta); float sint = sin(theta);
+float aspect = viewport.x/viewport.y;
+rot_per_sample[0] = vec2(cost,sint*aspect); rot_per_sample[1] = vec2(-sint/aspect,cost);
+// the rotation matrix is actually a scale and rotate matrix.
+// the rotation must be correct in world space but is manipulated by the
+// fragment shader in NDC which requires aspect correction.
+}
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/data/1.40/motion.frag kwin/effects/mousepos/data/1.40/motion.frag
--- kwin-5.19.0/effects/mousepos/data/1.40/motion.frag	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/data/1.40/motion.frag	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,43 @@
+#version 140
+
+// thanks Steven Lu
+
+uniform sampler2D sampler;
+in vec2 f_sceneCoord; // this should be pretransformed texcoord to scene tex
+// it is also appropriate to use as a "this pixel" position
+// (in relation to center, etc)
+varying float f_alpha;
+varying vec2 f_center;
+in vec3 f_vel;
+in float samples;
+varying mat2 rot_per_sample;
+
+out vec4 fragColor;
+
+void main (void) {
+vec2 original_center = f_center - f_vel.xy;
+// vel.xy is actually just the dist
+vec4 accum = vec4(0,0,0,0);
+mat2 cumulativeRotation;
+// set identity rotation matrix
+cumulativeRotation[0] = vec2(1,0); cumulativeRotation[1] = vec2(0,
+1);
+float samples_i = ceil(samples);
+for(int i=0;i<samples_i;++i) {
+float fraction = float(i)/samples_i;
+vec2 pos = cumulativeRotation*(f_sceneCoord+f_vel.xy*fraction-f_center)+ f_center;
+if (pos.x>1.0f || pos.x<0.0f || pos.y>1.0f || pos.y<0.0f) continue;
+vec4 col = texture2D(sampler, pos);
+//col=vec4(0.0f,0.0f,0.0f,0.0f);
+// 1: translate to orig ctr 2: rotate by i*rot
+// 3: translate back to origctr+(curctr-origctr)*i
+if (col.a>0.01f) { accum = accum + vec4(col.rgba); }
+cumulativeRotation = cumulativeRotation * rot_per_sample;
+}
+if (accum.a < 1.0/1024.) discard; // prevent divide by zero
+fragColor = vec4(accum.rgb*(1.0/accum.a),accum.a/samples_i);
+//fragColor=vec4(texture2D(sampler, f_sceneCoord));
+//fragColor=vec4(1.0f,1.0f,1.0f,1.0f);
+// This should be a non-premultiplied alpha value for use with
+// saturate blending.
+}
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/data/1.40/motion.vert kwin/effects/mousepos/data/1.40/motion.vert
--- kwin-5.19.0/effects/mousepos/data/1.40/motion.vert	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/data/1.40/motion.vert	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,61 @@
+#version 140
+
+// thanks Steven Lu
+
+// KWin
+uniform mat4 projection;
+uniform mat4 modelview;
+uniform mat4 modelViewProjectionMatrix;
+uniform mat4 textureMatrix;
+
+in vec4 position;
+in vec4 texcoord;
+
+uniform mat4 mvm;
+uniform vec2 viewport;
+uniform vec2 in_pos;
+// this is vertex position
+uniform vec2 in_center;
+uniform vec4 in_vel;
+uniform vec2 in_sizes;
+// those were the per-object velocity related quantities
+// I pack omega*dt into in_vel.z, and in_vel.w is max-displacement
+// for calculating samples
+uniform float in_alpha;
+varying float f_alpha;
+varying vec2 f_center;
+out vec3 f_vel;
+out float samples; // # of samples to blur
+varying mat2 rot_per_sample; // A special scale-rotate matrix
+out vec2 f_sceneCoord; // NDC to tex coord
+varying mat4 f_scale;
+void main (void) {
+mat4 proj_modelview_mat = projection * modelview;
+f_scale[0]=vec4(1.0+abs(in_vel.x),0.0,0.0,-abs(in_vel.x)*(in_pos.x+((sign(in_vel.x)>0.5)?in_sizes.x:0.0)));
+f_scale[1]=vec4(0.0,1.0+abs(in_vel.y),0.0,-abs(in_vel.y)*(in_pos.y+((sign(in_vel.y)>0.5)?in_sizes.y:0.0)));
+f_scale[2]=vec4(0.0,0.0,1.0,0.0);
+f_scale[3]=vec4(0.0,0.0,0.0,1.0);
+/*f_scale[0]=vec4(1.0,0.0,0.0,0.0);
+f_scale[1]=vec4(0.0,1.0,0.0,0.0);
+f_scale[2]=vec4(0.0,0.0,1.0,0.0);
+f_scale[3]=vec4(0.0,0.0,0.0,1.0);*/
+gl_Position = modelViewProjectionMatrix * vec4(position.xyzw*f_scale);
+f_sceneCoord = vec2( texcoord)*(1+abs(in_vel.xy))-max(vec2(0.0,0.0),in_vel.xy);
+f_center = ((modelViewProjectionMatrix * vec4(in_center,0.0,1.0)).xy
++ vec2(1.0,1.0))*0.5; // transform the center to clip space
+f_vel.xy=in_vel.xy;
+//f_vel.xy = (proj_modelview_mat * vec4(in_vel.xy,0.0,0.0)).xy * 0.5;
+// velocity also need to be in clip space
+// careful! We don't shift this one, only scale
+f_vel.z = in_vel.z; // Store omega in z-comp in radians
+samples = min(50,(modelViewProjectionMatrix * vec4(in_vel.w,0,0,0)).x
+* viewport.x * 2 + 1);
+// w here is not omega it is the max disp value from CPU
+float theta = in_vel.z/(samples);
+float cost = cos(theta); float sint = sin(theta);
+float aspect = viewport.x/viewport.y;
+rot_per_sample[0] = vec2(cost,sint*aspect); rot_per_sample[1] = vec2(-sint/aspect,cost);
+// the rotation matrix is actually a scale and rotate matrix.
+// the rotation must be correct in world space but is manipulated by the
+// fragment shader in NDC which requires aspect correction.
+}
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos_config.cpp kwin/effects/mousepos/mousepos_config.cpp
--- kwin-5.19.0/effects/mousepos/mousepos_config.cpp	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos_config.cpp	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,123 @@
+/********************************************************************
+ KWin - the KDE window manager
+ This file is part of the KDE project.
+
+Copyright (C) 2007 Rivo Laks <rivolaks@hot.ee>
+Copyright (C) 2010 Jorge Mata <matamax123@gmail.com>
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*********************************************************************/
+
+#include <QAction>
+#include <config-kwin.h>
+#include <kwineffects_interface.h>
+
+#include <KLocalizedString>
+#include <KActionCollection>
+#include <KAboutData>
+#include <KGlobalAccel>
+#include <KPluginFactory>
+
+#include <QVBoxLayout>
+#include <QLabel>
+
+#include "mousepos_config.h"
+
+// KConfigSkeleton
+#include "mouseposconfig.h"
+
+K_PLUGIN_FACTORY_WITH_JSON(MousePosEffectConfigFactory,
+                           "mousepos_config.json",
+                           registerPlugin<KWin::MousePosEffectConfig>();)
+
+namespace KWin
+{
+
+MousePosEffectConfigForm::MousePosEffectConfigForm(QWidget* parent) : QWidget(parent)
+{
+    setupUi(this);
+}
+
+MousePosEffectConfig::MousePosEffectConfig(QWidget* parent, const QVariantList& args) :
+    KCModule(KAboutData::pluginData(QStringLiteral("mousepos")), parent, args)
+{
+    MousePosConfig::instance(KWIN_CONFIG);
+    m_ui = new MousePosEffectConfigForm(this);
+    QVBoxLayout* layout = new QVBoxLayout(this);
+    layout->addWidget(m_ui);
+
+    addConfig(MousePosConfig::self(), m_ui);
+
+    m_actionCollection = new KActionCollection(this, QStringLiteral("kwin"));
+    m_actionCollection->setComponentDisplayName(i18n("KWin"));
+    m_actionCollection->setConfigGroup(QStringLiteral("MousePos"));
+    m_actionCollection->setConfigGlobal(true);
+
+    QAction *a = m_actionCollection->addAction(QStringLiteral("MousePos"));
+    a->setText(i18n("Paint cursor"));
+    a->setProperty("isConfigurationAction", true);
+
+    KGlobalAccel::self()->setDefaultShortcut(a, QList<QKeySequence>());
+    KGlobalAccel::self()->setShortcut(a, QList<QKeySequence>());
+
+    connect(m_ui->kcfg_mpMotionBlur, SIGNAL(keySequenceChanged(QKeySequence)),
+                            SLOT(shortcutChanged(QKeySequence)));
+
+    load();
+}
+
+MousePosEffectConfig::~MousePosEffectConfig()
+{
+}
+
+void MousePosEffectConfig::checkModifiers()
+{
+}
+
+void MousePosEffectConfig::load()
+{
+    KCModule::load();
+
+    checkModifiers();
+    emit changed(false);
+}
+
+void MousePosEffectConfig::save()
+{
+    KCModule::save();
+    m_actionCollection->writeSettings();
+    OrgKdeKwinEffectsInterface interface(QStringLiteral("org.kde.KWin"),
+                                         QStringLiteral("/Effects"),
+                                         QDBusConnection::sessionBus());
+    interface.reconfigureEffect(QStringLiteral("mousepos"));
+}
+
+void MousePosEffectConfig::defaults()
+{
+    KCModule::defaults();
+    checkModifiers();
+}
+
+void MousePosEffectConfig::shortcutChanged(const QKeySequence &seq)
+{
+    /*if (QAction *a = m_actionCollection->action(QStringLiteral("MousePos"))) {
+        KGlobalAccel::self()->setShortcut(a, QList<QKeySequence>() << seq, KGlobalAccel::NoAutoloading);
+    }*/
+//     m_actionCollection->writeSettings();
+    emit changed(true);
+}
+
+} // namespace
+
+#include "mousepos_config.moc"
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos_config.desktop kwin/effects/mousepos/mousepos_config.desktop
--- kwin-5.19.0/effects/mousepos/mousepos_config.desktop	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos_config.desktop	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,10 @@
+[Desktop Entry]
+Type=Service
+X-KDE-ServiceTypes=KCModule
+
+X-KDE-Library=kwin_mousepos_config
+X-KDE-ParentComponents=mousepos
+
+Name=Paint cursor
+Name[es]=Pintar cursor
+Name[x-test]=xxPaint Cursorxx
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos_config.h kwin/effects/mousepos/mousepos_config.h
--- kwin-5.19.0/effects/mousepos/mousepos_config.h	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos_config.h	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,62 @@
+/********************************************************************
+ KWin - the KDE window manager
+ This file is part of the KDE project.
+
+Copyright (C) 2007 Rivo Laks <rivolaks@hot.ee>
+Copyright (C) 2010 Jorge Mata <matamax123@gmail.com>
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*********************************************************************/
+
+#ifndef KWIN_MOUSEPOS_CONFIG_H
+#define KWIN_MOUSEPOS_CONFIG_H
+
+#include <kcmodule.h>
+
+#include "ui_mousepos_config.h"
+
+class KActionCollection;
+
+namespace KWin
+{
+
+class MousePosEffectConfigForm : public QWidget, public Ui::MousePosEffectConfigForm
+{
+    Q_OBJECT
+public:
+    explicit MousePosEffectConfigForm(QWidget* parent);
+};
+
+class MousePosEffectConfig : public KCModule
+{
+    Q_OBJECT
+public:
+    explicit MousePosEffectConfig(QWidget* parent = 0, const QVariantList& args = QVariantList());
+    ~MousePosEffectConfig();
+
+public Q_SLOTS:
+    virtual void save();
+    virtual void load();
+    virtual void defaults();
+private Q_SLOTS:
+    void shortcutChanged(const QKeySequence &seq);
+private:
+    void checkModifiers();
+    MousePosEffectConfigForm* m_ui;
+    KActionCollection* m_actionCollection;
+};
+
+} // namespace
+
+#endif
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mouseposconfig.kcfgc kwin/effects/mousepos/mouseposconfig.kcfgc
--- kwin-5.19.0/effects/mousepos/mouseposconfig.kcfgc	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mouseposconfig.kcfgc	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,5 @@
+File=mousepos.kcfg
+ClassName=MousePosConfig
+NameSpace=KWin
+Singleton=true
+Mutators=true
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos_config.ui kwin/effects/mousepos/mousepos_config.ui
--- kwin-5.19.0/effects/mousepos/mousepos_config.ui	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos_config.ui	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<ui version="4.0">
+ <class>KWin::MousePosEffectConfigForm</class>
+ <widget class="QWidget" name="KWin::MousePosEffectConfigForm">
+  <property name="geometry">
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>400</width>
+    <height>36</height>
+   </rect>
+  </property>
+  <layout class="QVBoxLayout" name="verticalLayout">
+   <item>
+    <widget class="QCheckBox" name="kcfg_mpMotionBlur">
+     <property name="text">
+      <string>Motion blur</string>
+     </property>
+    </widget>
+   </item>
+  </layout>
+ </widget>
+ <resources/>
+ <connections/>
+</ui>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos.cpp kwin/effects/mousepos/mousepos.cpp
--- kwin-5.19.0/effects/mousepos/mousepos.cpp	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos.cpp	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,236 @@
+/********************************************************************
+ KWin - the KDE window manager
+ This file is part of the KDE project.
+
+Copyright (C) 2006 Lubos Lunak <l.lunak@kde.org>
+Copyright (C) 2010 Jorge Mata <matamax123@gmail.com>
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*********************************************************************/
+
+#include "mousepos.h"
+
+// KConfigSkeleton
+#include "mouseposconfig.h"
+
+#include <QAction>
+#include <QPainter>
+#include <QTime>
+#include <QMatrix4x4>
+
+#include <kwinconfig.h>
+#include <kwinglutils.h>
+#include <kwinxrenderutils.h>
+
+#include <KGlobalAccel>
+#include <KLocalizedString>
+
+#include <math.h>
+
+namespace KWin
+{
+
+MousePosEffect::MousePosEffect()
+    : m_active(false)
+    , m_inited(false)
+    , m_valid(true)
+{
+    initConfig<MousePosConfig>();
+    m_mousePolling = false;
+
+    m_action = new QAction(this);
+    m_action->setObjectName(QStringLiteral("MousePos"));
+    m_action->setText(i18n("Paint cursor"));
+    //KGlobalAccel::self()->setDefaultShortcut(m_action, QList<QKeySequence>());
+    //KGlobalAccel::self()->setShortcut(m_action, QList<QKeySequence>());
+    //effects->registerGlobalShortcut(QKeySequence(), m_action);
+
+    connect(m_action, SIGNAL(triggered(bool)), this, SLOT(toggle()));
+
+    connect(effects, SIGNAL(mouseChanged(QPoint,QPoint,Qt::MouseButtons,Qt::MouseButtons,Qt::KeyboardModifiers,Qt::KeyboardModifiers)),
+                     SLOT(slotMouseChanged(QPoint,QPoint,Qt::MouseButtons,Qt::MouseButtons,Qt::KeyboardModifiers,Qt::KeyboardModifiers)));
+    reconfigure(ReconfigureAll);
+    if (!m_mousePolling) {
+      effects->startMousePolling();
+      m_mousePolling = true;
+    }
+}
+
+MousePosEffect::~MousePosEffect()
+{
+    if (m_mousePolling)
+        effects->stopMousePolling();
+}
+
+void MousePosEffect::reconfigure(ReconfigureFlags)
+{
+    MousePosConfig::self()->read();
+}
+
+void MousePosEffect::prePaintScreen(ScreenPrePaintData& data, int time)
+{
+    if (m_active) {
+        QTime t = QTime::currentTime();
+        //m_lastRect[0].moveCenter(cursorPos());
+        //m_lastRect[1].moveCenter(cursorPos());
+        m_union=m_lastRect[0].united(m_lastRect[1]);
+        data.paint |= m_union.adjusted(-1,-1,1,1);
+    }
+    effects->prePaintScreen(data, time);
+}
+
+bool MousePosEffect::loadData()
+{
+    m_inited = true;
+    printf("load data!\n");
+
+    m_shader = ShaderManager::instance()->generateShaderFromResources(ShaderTrait::MapTexture, QString("motion.vert"), QStringLiteral("motion.frag"));
+    if (!m_shader->isValid()) {
+        printf("failure.\n");
+        qCCritical(KWINEFFECTS) << "The shader failed to load!";
+        return false;
+    }
+    printf("shader loaded.\n");
+    return true;
+}
+
+void MousePosEffect::paintScreen(int mask, const QRegion& region, ScreenPaintData& data)
+{
+    effects->paintScreen(mask, region, data);   // paint normal screen
+    if (!m_active)
+        return;
+    auto c = xcbConnection();
+
+    if (m_valid && !m_inited)
+        m_valid = loadData();
+
+    if ( effects->isOpenGLCompositing()) {
+        QScopedPointer<xcb_xfixes_get_cursor_image_reply_t, QScopedPointerPodDeleter> cursor(
+        xcb_xfixes_get_cursor_image_reply(c,
+                                          xcb_xfixes_get_cursor_image_unchecked(c),
+                                          nullptr));
+    if (cursor.isNull()) {
+        return;
+    }       
+            QImage img = QImage((uchar *) xcb_xfixes_get_cursor_image_cursor_image(cursor.data()), cursor->width, cursor->height,
+                      QImage::Format_ARGB32_Premultiplied);
+            
+            if (img.isNull()) {
+                return;
+            }
+            m_cursorTexture.reset(new GLTexture(img));
+    // get cursor position in projection coordinates
+    if (!m_cursorTexture) {
+      return;
+    }
+    const QRect cursorRect(0, 0, m_cursorTexture->width(), m_cursorTexture->height());
+    QMatrix4x4 mvp = data.projectionMatrix();
+    mvp.translate(cursor->x-cursor->xhot, cursor->y-cursor->yhot);
+    
+    // handle transparence
+    glEnable(GL_BLEND);
+    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
+    
+    // paint texture in cursor offset
+    if (MousePosConfig::motionBlur()) {
+      m_cursorTexture->bind();
+      ShaderBinder binder(m_shader);
+      binder.shader()->setUniform(GLShader::ModelViewProjectionMatrix, mvp);
+      binder.shader()->setUniform("viewport",QVector2D(3840,2160));
+      binder.shader()->setUniform("in_center",QVector2D(0.0f,0.0f));
+      binder.shader()->setUniform("in_vel",QVector4D(((float)(cursor->x-cursor->xhot)-m_prevX)/(float)cursorRect.width()
+      ,((float)(cursor->y-cursor->yhot)-m_prevY)/(float)cursorRect.height()
+      ,0.0f,32.0f));
+      //binder.shader()->setUniform("in_pos",QVector2D(cursor->x-cursor->xhot+16, cursor->y-cursor->yhot));
+      binder.shader()->setUniform("in_pos",QVector2D(0,0));
+      binder.shader()->setUniform("in_sizes",QVector2D(cursorRect.width(),cursorRect.height()));
+      m_cursorTexture->render(QRegion(cursorRect), cursorRect);
+      m_cursorTexture->unbind();
+    } else {
+      m_cursorTexture->bind();
+      ShaderBinder obinder(ShaderTrait::MapTexture);
+      obinder.shader()->setUniform(GLShader::ModelViewProjectionMatrix, mvp);
+      m_cursorTexture->render(QRegion(cursorRect), cursorRect);
+      m_cursorTexture->unbind();
+    }
+
+    glDisable(GL_BLEND);
+    m_cursorTexture.reset(NULL);
+    
+    m_prevX=cursor->x-cursor->xhot;
+    m_prevY=cursor->y-cursor->yhot;
+    m_lastRect[1]=m_lastRect[0];
+    m_lastRect[0]=cursorRect;
+    m_lastRect[0].moveTo(m_prevX,m_prevY);
+    }
+}
+
+void MousePosEffect::postPaintScreen()
+{
+    if (m_lastRect[0]!=m_lastRect[1]) {
+      effects->addRepaint(m_lastRect[0].adjusted(-1,-1,1,1));
+    }
+    effects->postPaintScreen();
+}
+
+bool MousePosEffect::init()
+{
+    effects->makeOpenGLContextCurrent();
+    m_lastRect[0].moveCenter(cursorPos());
+    m_lastRect[1].moveCenter(cursorPos());
+    m_active = true;
+    printf("init...\n");
+    return true;
+}
+
+void MousePosEffect::toggle()
+{
+    m_mousePolling=true;
+    m_active=true;
+    printf("toggle\n");
+/*
+    if (m_mousePolling)
+        return;
+
+    if (m_active) {
+        m_active = false;
+    } else if (!init()) {
+        return;
+    }*/
+    effects->addRepaint(m_lastRect[0].adjusted(-1,-1,1,1));
+}
+
+void MousePosEffect::slotMouseChanged(const QPoint&, const QPoint&,
+                                        Qt::MouseButtons, Qt::MouseButtons,
+                                        Qt::KeyboardModifiers modifiers, Qt::KeyboardModifiers)
+{
+  if (!m_mousePolling) // we didn't ask for it but maybe someone else did...
+    return;
+  if (!m_active && !init()) {
+    return;
+  }
+  m_union=m_lastRect[0].united(m_lastRect[1]);
+  effects->addRepaint(m_lastRect[1].adjusted(-1,-1,1,1));
+}
+
+void MousePosEffect::loadTexture()
+{
+}
+
+bool MousePosEffect::isActive() const
+{
+    return m_active;
+}
+
+} // namespace
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos.h kwin/effects/mousepos/mousepos.h
--- kwin-5.19.0/effects/mousepos/mousepos.h	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos.h	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,80 @@
+/********************************************************************
+ KWin - the KDE window manager
+ This file is part of the KDE project.
+
+Copyright (C) 2006 Lubos Lunak <l.lunak@kde.org>
+Copyright (C) 2010 Jorge Mata <matamax123@gmail.com>
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*********************************************************************/
+
+#ifndef KWIN_MOUSEPOS_H
+#define KWIN_MOUSEPOS_H
+
+#include <kwineffects.h>
+
+class QAction;
+
+namespace KWin
+{
+class GLTexture;
+
+class MousePosEffect
+    : public Effect
+{
+    Q_OBJECT
+    Q_PROPERTY(bool mousePolling READ isMousePolling)
+public:
+    MousePosEffect();
+    virtual ~MousePosEffect();
+    virtual void prePaintScreen(ScreenPrePaintData& data, int time);
+    virtual void paintScreen(int mask, const QRegion& region, ScreenPaintData& data);
+    virtual void postPaintScreen();
+    virtual void reconfigure(ReconfigureFlags);
+    virtual bool isActive() const;
+
+    // for properties
+    bool isMousePolling() const {
+        return m_mousePolling;
+    }
+protected:
+    bool loadData();
+private Q_SLOTS:
+    void toggle();
+    void slotMouseChanged(const QPoint& pos, const QPoint& old,
+                              Qt::MouseButtons buttons, Qt::MouseButtons oldbuttons,
+                              Qt::KeyboardModifiers modifiers, Qt::KeyboardModifiers oldmodifiers);
+private:
+    bool init();
+    void loadTexture();
+    QRect m_lastRect[2];
+    QRect m_union;
+    bool m_active, m_mousePolling;
+    float m_angle;
+    float m_angleBase;
+#ifdef KWIN_HAVE_XRENDER_COMPOSITING
+    QSize m_size[2];
+#endif
+    QAction* m_action;
+    QScopedPointer<GLTexture> m_cursorTexture;
+    Qt::KeyboardModifiers m_modifiers;
+    bool m_inited;
+    bool m_valid;
+    GLShader* m_shader;
+    float m_prevX, m_prevY;
+};
+
+} // namespace
+
+#endif
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/mousepos/mousepos.kcfg kwin/effects/mousepos/mousepos.kcfg
--- kwin-5.19.0/effects/mousepos/mousepos.kcfg	1969-12-31 19:00:00.000000000 -0500
+++ kwin/effects/mousepos/mousepos.kcfg	2020-05-23 22:06:04.500487374 -0500
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<kcfg xmlns="http://www.kde.org/standards/kcfg/1.0"
+      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+      xsi:schemaLocation="http://www.kde.org/standards/kcfg/1.0
+                          http://www.kde.org/standards/kcfg/1.0/kcfg.xsd" >
+    <kcfgfile arg="true"/>
+    <group name="Effect-MousePos">
+        <entry name="MotionBlur" type="Bool">
+            <default>false</default>
+        </entry>
+    </group>
+</kcfg>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/presentwindows/presentwindows_config.desktop kwin/effects/presentwindows/presentwindows_config.desktop
--- kwin-5.19.0/effects/presentwindows/presentwindows_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/presentwindows/presentwindows_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -24,7 +24,6 @@
 Name[eo]=Prezenti fenestrojn
 Name[es]=Presenta las ventanas
 Name[et]=Olemasolevad aknad
-Name[eu]=Aurkeztu leihoak
 Name[fa]=پنجره‌های موجود
 Name[fi]=Ikkunoiden esittäminen
 Name[fr]=Présentation des fenêtres
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/presentwindows/presentwindows_config.ui kwin/effects/presentwindows/presentwindows_config.ui
--- kwin-5.19.0/effects/presentwindows/presentwindows_config.ui	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/presentwindows/presentwindows_config.ui	2020-05-23 22:06:04.500487374 -0500
@@ -164,6 +164,11 @@
           <string>(Un-)Minimize window</string>
          </property>
         </item>
+        <item>
+         <property name="text">
+          <string>Close window</string>
+         </property>
+        </item>
        </widget>
       </item>
       <item row="1" column="0">
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/resize/resize_config.desktop kwin/effects/resize/resize_config.desktop
--- kwin-5.19.0/effects/resize/resize_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/resize/resize_config.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -21,7 +21,6 @@
 Name[eo]=Regrandigi fenestrojn
 Name[es]=Redimensionar ventana
 Name[et]=Akna suuruse muutmine
-Name[eu]=Tamainaz aldatu leihoa
 Name[fa]=تغییر اندازۀ پنجره
 Name[fi]=Ikkunan koon muuttaminen
 Name[fr]=Redimensionner la fenêtre
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/scale/package/metadata.desktop kwin/effects/scale/package/metadata.desktop
--- kwin-5.19.0/effects/scale/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/scale/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=Scale
 Name[es]=Escalar
 Name[et]=Skaleerimine
-Name[eu]=Eskalatu
 Name[fi]=Skaalaa
 Name[fr]=Échelle
 Name[gl]=Cambiar as dimensións
@@ -42,7 +41,6 @@
 Comment[en_GB]=Make windows smoothly scale in and out when they are shown or hidden
 Comment[es]=Hace que las ventanas se agranden o se encojan suavemente al mostrarlas u ocultarlas
 Comment[et]=Skaleerib aknaid sujuvalt, kui need peidetakse või nähtavale tuuakse
-Comment[eu]=Leihoak emeki eskalatu barrura eta kanpora haiek erakutsi edo ezkutatzean
 Comment[fi]=Ikkunat ilmestyvät näkyviin tai poistuvat näkyvistä hiljalleen
 Comment[fr]=Échelonne les fenêtres lorsqu'elles sont affichées ou cachées
 Comment[gl]=Facer que as xanelas crezan ou decrezan suavemente cando se mostran ou agochan
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/sessionquit/package/metadata.desktop kwin/effects/sessionquit/package/metadata.desktop
--- kwin-5.19.0/effects/sessionquit/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/sessionquit/package/metadata.desktop	2020-06-09 12:51:19.243398052 -0500
@@ -6,7 +6,6 @@
 Name[en_GB]=Session Quit
 Name[es]=Cierre de sesión
 Name[et]=Seansist väljumine
-Name[eu]=Saiotik irtetea
 Name[fi]=Istunnon lopetus
 Name[fr]=Fin de session
 Name[gl]=Saída de sesión
@@ -35,7 +34,6 @@
 Comment[en_GB]=Keep the desktop background alive during logout until the end
 Comment[es]=Mantener el fondo del escritorio activo durante el cierre de sesión hasta el final
 Comment[et]=Töölaua taust hoitakse väljalogimisel alles kuni lõpuni
-Comment[eu]=Eutsi mahaigaineko atzeko-planoa bizirik saio-ixtean bukaera arte
 Comment[fi]=Pidä työpöydän tausta käynnissä aina uloskirjautumisen loppuun
 Comment[fr]=Conservez l'arriére plan du bureau visible jusqu'à la fin de la déconnexion
 Comment[gl]=Manter vivo o fondo de escritorio durante a saída ata o final
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/shaders.qrc kwin/effects/shaders.qrc
--- kwin-5.19.0/effects/shaders.qrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/shaders.qrc	2020-05-23 22:06:04.503820708 -0500
@@ -6,6 +6,8 @@
   <file alias="cylinder.vert">cube/data/1.10/cylinder.vert</file>
   <file alias="sphere.vert">cube/data/1.10/sphere.vert</file>
   <file alias="invert.frag">invert/data/1.10/invert.frag</file>
+  <file alias="motion.vert">mousepos/data/1.10/motion.vert</file>
+  <file alias="motion.frag">mousepos/data/1.10/motion.frag</file>
   <file alias="lookingglass.frag">lookingglass/data/1.10/lookingglass.frag</file>
   <file alias="blinking-startup-fragment.glsl">startupfeedback/data/1.10/blinking-startup-fragment.glsl</file>
 </qresource>
@@ -16,6 +18,8 @@
   <file alias="cylinder.vert">cube/data/1.40/cylinder.vert</file>
   <file alias="sphere.vert">cube/data/1.40/sphere.vert</file>
   <file alias="invert.frag">invert/data/1.40/invert.frag</file>
+  <file alias="motion.vert">mousepos/data/1.40/motion.vert</file>
+  <file alias="motion.frag">mousepos/data/1.40/motion.frag</file>
   <file alias="lookingglass.frag">lookingglass/data/1.40/lookingglass.frag</file>
   <file alias="blinking-startup-fragment.glsl">startupfeedback/data/1.40/blinking-startup-fragment.glsl</file>
 </qresource>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/showfps/showfps_config.desktop kwin/effects/showfps/showfps_config.desktop
--- kwin-5.19.0/effects/showfps/showfps_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/showfps/showfps_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -23,7 +23,6 @@
 Name[eo]=Montri FPS
 Name[es]=Muestra FPS
 Name[et]=FPS-i näitamine
-Name[eu]=Erakutsi FPS
 Name[fa]=نمایش FPS
 Name[fi]=FPS-näyttö
 Name[fr]=Afficher le nombre de trames par seconde
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/showpaint/showpaint_config.desktop kwin/effects/showpaint/showpaint_config.desktop
--- kwin-5.19.0/effects/showpaint/showpaint_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/showpaint/showpaint_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -21,7 +21,6 @@
 Name[eo]=Montri farbon
 Name[es]=Muestra pintura
 Name[et]=Joonistatud alade näitamine
-Name[eu]=Erakutsi pintatutakoa
 Name[fi]=Näytä näytönpiirto
 Name[fr]=Affiche les zones peintes
 Name[fy]=Paint sjen litte
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/slide/slide_config.desktop kwin/effects/slide/slide_config.desktop
--- kwin-5.19.0/effects/slide/slide_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/slide/slide_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -19,7 +19,6 @@
 Name[eo]=Lumbildo
 Name[es]=Deslizar
 Name[et]=Liuglemine
-Name[eu]=Irristatu
 Name[fi]=Liuku
 Name[fr]=Glisser
 Name[fy]=Glydzje
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/squash/package/metadata.desktop kwin/effects/squash/package/metadata.desktop
--- kwin-5.19.0/effects/squash/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/squash/package/metadata.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -7,7 +7,6 @@
 Comment[en_GB]=Squash windows when they are minimised
 Comment[es]=Aplastar las ventanas al minimizarlas
 Comment[et]=Minimeeritud akende taas üleshüpitamine
-Comment[eu]=Zanpatu leihoak haiek ikonotzean
 Comment[fi]=Litistä ikkunat, kun ne pienennetään
 Comment[fr]=Écrase les fenêtres lorsqu'elles sont minimisées
 Comment[gl]=Xuntar as xanelas cando estean minimizadas
@@ -38,7 +37,6 @@
 Name[en_GB]=Squash
 Name[es]=Aplastar
 Name[et]=Üleshüpe
-Name[eu]=Zanpatu
 Name[fi]=Litistä
 Name[fr]=Écraser
 Name[gl]=Xuntar
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/thumbnailaside/thumbnailaside_config.desktop kwin/effects/thumbnailaside/thumbnailaside_config.desktop
--- kwin-5.19.0/effects/thumbnailaside/thumbnailaside_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/thumbnailaside/thumbnailaside_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -22,7 +22,6 @@
 Name[eo]=Miniaturojn flanke
 Name[es]=Miniaturas laterales
 Name[et]=Pisipildid kõrval
-Name[eu]=Koadro txikiak alboan
 Name[fi]=Esikatselukuva vieressä
 Name[fr]=Vignettes sur le côté
 Name[fy]=Miniatuer der neist
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/trackmouse/trackmouse_config.desktop kwin/effects/trackmouse/trackmouse_config.desktop
--- kwin-5.19.0/effects/trackmouse/trackmouse_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/trackmouse/trackmouse_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -24,7 +24,6 @@
 Name[eo]=Spuri muson
 Name[es]=Seguir el ratón
 Name[et]=Hiire jälgimine
-Name[eu]=Jarraitu saguari
 Name[fa]=ردگیری موشی
 Name[fi]=Hiiren jäljitys
 Name[fr]=Repérer la souris
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/translucency/package/metadata.desktop kwin/effects/translucency/package/metadata.desktop
--- kwin-5.19.0/effects/translucency/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/translucency/package/metadata.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -19,7 +19,6 @@
 Name[eo]=Diafaneco
 Name[es]=Transparencia
 Name[et]=Läbipaistvus
-Name[eu]=Zeharrargitasuna
 Name[fi]=Läpikuultavuus
 Name[fr]=Translucidité
 Name[fy]=Trochsichtichheid
@@ -96,7 +95,6 @@
 Comment[en_GB]=Make windows translucent under different conditions
 Comment[es]=Hace la ventana translúcida en distintas condiciones
 Comment[et]=Akende muutmine läbipaistvaks teatavatel tingimustel
-Comment[eu]=Leihoak zeharrargi bihurtzen ditu baldintzen arabera
 Comment[fi]=Tee ikkunoista läpikuultavia eri ehtojen alaisina
 Comment[fr]=Affiche des fenêtres translucides en fonction de diverses conditions
 Comment[fy]=Meitsje finsters trochsichtich ûnder oare kondysjes
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/windowaperture/package/metadata.desktop kwin/effects/windowaperture/package/metadata.desktop
--- kwin-5.19.0/effects/windowaperture/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/windowaperture/package/metadata.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Window Aperture
 Name[es]=Apertura de ventanas
 Name[et]=Aknaava
-Name[eu]=Leihoa irekitzea
 Name[fi]=Ikkunoiden siirto näytön kulmiin
 Name[fr]=Ouverture de la fenêtre
 Name[gl]=Apertura das xanelas
@@ -47,7 +46,6 @@
 Comment[en_GB]=Move windows into screen corners
 Comment[es]=Mover las ventanas a las esquinas de la pantalla
 Comment[et]=Akende liigutamine ekraani nurkadesse
-Comment[eu]=Eraman leihoak pantailako bazterretara
 Comment[fr]=Déplace les fenêtres dans les coins de l'écran
 Comment[ia]=Move fenestra in angulos de schermo
 Comment[id]=Pindahkan window ke sudut layar
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/windowgeometry/windowgeometry_config.desktop kwin/effects/windowgeometry/windowgeometry_config.desktop
--- kwin-5.19.0/effects/windowgeometry/windowgeometry_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/windowgeometry/windowgeometry_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -17,7 +17,6 @@
 Name[en_GB]=WindowGeometry
 Name[es]=Geometría de la ventana
 Name[et]=Akna geomeetria
-Name[eu]=Leihoaren geometria
 Name[fi]=Ikkunan mitat
 Name[fr]=Géométrie de la fenêtre
 Name[gl]=Xeometría da xanela
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/wobblywindows/wobblywindows_config.desktop kwin/effects/wobblywindows/wobblywindows_config.desktop
--- kwin-5.19.0/effects/wobblywindows/wobblywindows_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/wobblywindows/wobblywindows_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -23,7 +23,6 @@
 Name[eo]=Tremaj fenestroj
 Name[es]=Ventanas gelatinosas
 Name[et]=Võbisevad aknad
-Name[eu]=Leiho dardartiak
 Name[fi]=Heiluvat ikkunat
 Name[fr]=Fenêtres en gélatine
 Name[fy]=Wobbly Windows
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects/zoom/zoom_config.desktop kwin/effects/zoom/zoom_config.desktop
--- kwin-5.19.0/effects/zoom/zoom_config.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects/zoom/zoom_config.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -27,7 +27,6 @@
 Name[eo]=Zomi
 Name[es]=Ampliación
 Name[et]=Suurendus
-Name[eu]=Handiagotu
 Name[fa]=بزرگ‌نمایی
 Name[fi]=Zoomaus
 Name[fr]=Zoom
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/effects.cpp kwin/effects.cpp
--- kwin-5.19.0/effects.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/effects.cpp	2020-06-09 12:51:19.240064719 -0500
@@ -656,6 +656,7 @@
     }
     const bool activeChanged = (e == nullptr || fullscreen_effect == nullptr);
     fullscreen_effect = e;
+    m_compositor->checkUnredirect();
     emit activeFullScreenEffectChanged();
     if (activeChanged) {
         emit hasActiveFullScreenEffectChanged();
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/HACKING.md kwin/HACKING.md
--- kwin-5.19.0/HACKING.md	2020-06-08 05:58:58.000000000 -0500
+++ kwin/HACKING.md	2020-06-09 12:51:19.213398053 -0500
@@ -21,13 +21,16 @@
 
 To start a nested KWin Wayland use:
 
-    cd build
-    cd bin
-    QT_PLUGIN_PATH=`pwd` dbus-run-session ./kwin_wayland --xwayland --socket=wayland-1
+```
+cd build
+QT_PLUGIN_PATH="$PWD/bin" dbus-run-session ./bin/kwin_wayland --xwayland --socket=wayland-1
+```
 
 The socket option is not required if KWin is started from an X11 session. On Wayland of course a socket not matching the session's socket must be chosen. To show windows in the nested KWin adjust the environment variables DISPLAY (for X11 windows) and WAYLAND_DISPLAY (for Wayland windows). Alternatively it's possible to pass applications to launch as command line arguments to kwin_wayland command. E.g.
 
-    QT_PLUGIN_PATH=`pwd` dbus-run-session ./kwin_wayland --xwayland --socket=wayland-1 konsole
+```
+QT_PLUGIN_PATH="$PWD/bin" dbus-run-session ./bin/kwin_wayland --xwayland --socket=wayland-1 konsole
+```
 
 Will start a konsole in the nested KWin.
 
@@ -47,9 +50,10 @@
 
 KWin for the X11 windowing system cannot be tested with a nested Wayland setup. Instead the common way is to run KWin and replace the existing window manager of the X session:
 
-    cd build
-    cd bin
-    QT_PLUGIN_PATH=`pwd` ./kwin_x11 --replace
+```
+cd build
+QT_PLUGIN_PATH="$PWD/bin" ./bin/kwin_x11 --replace
+```
 
 In this case also the current DBus session should be used and dbus-run-session should not be used. Of course it's only possible to start kwin_x11 in an X session. On Wayland kwin_x11 will refuse to start.
 
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/internal_client.cpp kwin/internal_client.cpp
--- kwin-5.19.0/internal_client.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/internal_client.cpp	2020-06-09 12:51:19.246731386 -0500
@@ -590,4 +590,9 @@
     commitGeometry(clientRectToFrameRect(m_internalWindow->geometry()));
 }
 
+bool InternalClient::shouldUnredirect() const
+{
+    return false;
+}
+
 }
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/internal_client.h kwin/internal_client.h
--- kwin-5.19.0/internal_client.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/internal_client.h	2020-06-09 12:51:19.246731386 -0500
@@ -46,6 +46,7 @@
     QSize minSize() const override;
     QSize maxSize() const override;
     void debug(QDebug &stream) const override;
+    bool shouldUnredirect() const override;
     QRect transparentRect() const override;
     NET::WindowType windowType(bool direct = false, int supported_types = 0) const override;
     double opacity() const override;
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwincompositing/compositing.ui kwin/kcmkwin/kwincompositing/compositing.ui
--- kwin-5.19.0/kcmkwin/kwincompositing/compositing.ui	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwincompositing/compositing.ui	2020-06-09 12:51:19.246731386 -0500
@@ -6,8 +6,8 @@
    <rect>
     <x>0</x>
     <y>0</y>
-    <width>526</width>
-    <height>395</height>
+    <width>628</width>
+    <height>581</height>
    </rect>
   </property>
   <layout class="QFormLayout" name="formLayout">
@@ -292,6 +292,159 @@
      </property>
     </widget>
    </item>
+   <item row="14" column="1">
+    <widget class="QCheckBox" name="kcfg_unredirectFullscreen">
+     <property name="toolTip">
+      <string>Applications do not have to set any hint to suspend compositing when the window is full-screen.
+              This delivers lower latency and has no delay when compared to the other option.
+              Some people have reported crashes under Intel, but I am not sure if this is the case.</string>
+     </property>
+     <property name="text">
+      <string>Suspend compositor for full-screen windows</string>
+     </property>
+    </widget>
+   </item>
+   <item row="15" column="0">
+    <widget class="QLabel" name="label_X">
+     <property name="text">
+      <string>Animation curve:</string>
+     </property>
+    </widget>
+   </item>
+   <item row="15" column="1">
+    <widget class="QComboBox" name="kcfg_animationCurve">
+     <item>
+      <property name="text">
+       <string>Linear</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Quadratic</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Sine</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Cubic</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Quartic</string>
+      </property>
+     </item>
+    </widget>
+   </item>
+   <item row="16" column="0">
+    <widget class="QLabel" name="label_Y">
+     <property name="text">
+      <string>Latency/stutter control:</string>
+     </property>
+    </widget>
+   </item>
+   <item row="16" column="1">
+    <widget class="QComboBox" name="kcfg_latencyControl">
+     <item>
+      <property name="text">
+       <string>Less stutter</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Balanced</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Lower latency</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>Even lower latency</string>
+      </property>
+     </item>
+    </widget>
+   </item>
+   <item row="17" column="0">
+    <widget class="QLabel" name="label_9">
+     <property name="text">
+      <string>Maximum latency reduction:</string>
+     </property>
+    </widget>
+   </item>
+   <item row="17" column="1">
+    <widget class="QSpinBox" name="kcfg_maxLatency">
+     <property name="maximum">
+      <number>8</number>
+     </property>
+    </widget>
+   </item>
+   <item row="18" column="0">
+    <widget class="QLabel" name="label_10">
+     <property name="text">
+      <string>Minimum latency reduction:</string>
+     </property>
+    </widget>
+   </item>
+   <item row="18" column="1">
+    <widget class="QSpinBox" name="kcfg_minLatency">
+     <property name="maximum">
+      <number>8</number>
+     </property>
+    </widget>
+   </item>
+   <item row="19" column="1">
+    <widget class="QLabel" name="label_11">
+     <property name="text">
+      <string>(units in milliseconds)</string>
+     </property>
+     <property name="alignment">
+      <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>
+     </property>
+    </widget>
+   </item>
+   <item row="20" column="1">
+    <widget class="QComboBox" name="kcfg_vsyncMechanism">
+     <item>
+      <property name="text">
+       <string>Automatic</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>None and just hope for the best (NVIDIA 435.17+)</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>SGI video sync (NVIDIA pre-435, recent Mesa/X versions may hang)</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>glFinish (Mesa hang workaround for AMD, maybe works on NVIDIA too)</string>
+      </property>
+     </item>
+     <item>
+      <property name="text">
+       <string>SGI video sync with horrible hack (Mesa hang workaround for Intel)</string>
+      </property>
+     </item>
+    </widget>
+   </item>
+   <item row="20" column="0">
+    <widget class="QLabel" name="label_12">
+     <property name="text">
+      <string>VSync mechanism:</string>
+     </property>
+    </widget>
+   </item>
   </layout>
  </widget>
  <customwidgets>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwincompositing/kwincompositing.desktop kwin/kcmkwin/kwincompositing/kwincompositing.desktop
--- kwin-5.19.0/kcmkwin/kwincompositing/kwincompositing.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwincompositing/kwincompositing.desktop	2020-06-09 12:51:19.246731386 -0500
@@ -24,7 +24,6 @@
 Name[en_GB]=Compositor
 Name[es]=Compositor
 Name[et]=Komposiitor
-Name[eu]=Konposatzailea
 Name[fi]=Koostin
 Name[fr]=Compositeur
 Name[gl]=Compositor
@@ -69,7 +68,6 @@
 Comment[en_GB]=Compositor Settings for Desktop Effects
 Comment[es]=Configurar las preferencias del compositor para los efectos del escritorio
 Comment[et]=Komposiitori seadistused töölauaefektide tarbeks
-Comment[eu]=Konposatzailearen ezarpenak mahaigaineko efektuetarako
 Comment[fi]=Koostimen asetukset työpöytätehosteita varten
 Comment[fr]=Paramétrage du compositeur pour les effets de bureau
 Comment[gl]=Configuración do compositor para os efectos de escritorio
@@ -109,7 +107,6 @@
 X-KDE-Keywords[en_GB]=kwin,window,manager,compositing,effect,3D effects,2D effects,OpenGL,XRender,video settings,graphical effects,desktop effects
 X-KDE-Keywords[es]=kwin,ventana,gestor,composición,efecto,efectos 3D,efectos 2D,OpenGL,XRender,preferencias de vídeo,efectos gráficos,efectos del escritorio
 X-KDE-Keywords[et]=kwin,aken,haldur,komposiit,komposiitor,efekt,3D efektid,ruumilised efektid,2D efektid,OpenGL,XRender,videoseadistused,graafilised efektid,töölauaefektid
-X-KDE-Keywords[eu]=kwin,leihoa,kudeatzailea,konposatzailea,efektua,3Dtako efektuak,2Dtako efektuak,OpenGL,XRender,bideo ezarpenak,efektu grafikoak,mahaigaineko efektuak
 X-KDE-Keywords[fi]=kwin,window,manager,compositing,effect,3D effects,2D effects,OpenGL,XRender,video settings,graphical effects,desktop effects,ikkunointiohjelma,ikkunaohjelma,ikkunanhallinta,tehoste,3D-tehosteet,2D-tehosteet,videoasetukset,graafiset tehosteet,työpöytätehosteet
 X-KDE-Keywords[fr]=Gestionnaire de fenêtres KWin, kwin, window, manager, compositeur, effet, effets 3D, effets 2D, OpenGL, XRender, paramétrage video, effets graphiques, effects du bureau
 X-KDE-Keywords[ia]=kwin,window,manager,compositing,effect,3D effects,2D effects,OpenGL,XRender,video settings,graphical effects,desktop effects
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwincompositing/kwincompositing_setting.kcfg kwin/kcmkwin/kwincompositing/kwincompositing_setting.kcfg
--- kwin-5.19.0/kcmkwin/kwincompositing/kwincompositing_setting.kcfg	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwincompositing/kwincompositing_setting.kcfg	2020-06-09 12:51:19.250064718 -0500
@@ -69,6 +69,43 @@
            <default>true</default>
        </entry>
 
+       <entry name="unredirectFullscreen" key="UnredirectFullscreen" type="Bool">
+           <default>true</default>
+       </entry>
+
+       <entry name="animationCurve" key="AnimationCurve" type="Int">
+           <default>2</default>
+       </entry>
+
+       <entry name="latencyControl" key="LatencyControl" type="Enum">
+           <default>Balance</default>
+           <choices>
+               <choice name="Responsive" value="0" />
+               <choice name="Balance" value="1" />
+               <choice name="LowLatency" value="2" />
+               <choice name="LowerLatency" value="3" />
+           </choices>
+       </entry>
+
+       <entry name="vsyncMechanism" key="VSyncMechanism" type="Enum">
+           <default>Automatic</default>
+           <choices>
+               <choice name="Automatic" value="0" />
+               <choice name="HopeBest" value="1" />
+               <choice name="SGIVideoSync" value="2" />
+               <choice name="glFinish" value="3" />
+               <choice name="SGIHack" value="4" />
+           </choices>
+       </entry>
+
+       <entry name="maxLatency" key="MaxLatency" type="Int">
+           <default>8</default>
+       </entry>
+
+       <entry name="minLatency" key="MinLatency" type="Int">
+           <default>8</default>
+       </entry>
+
     </group>
 
 </kcfg>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwincompositing/main.cpp kwin/kcmkwin/kwincompositing/main.cpp
--- kwin-5.19.0/kcmkwin/kwincompositing/main.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwincompositing/main.cpp	2020-06-09 12:51:19.250064718 -0500
@@ -26,6 +26,7 @@
 #include <QAction>
 #include <QApplication>
 #include <QLayout>
+#include <QSpinBox>
 
 #include <kcmodule.h>
 #include <kservice.h>
@@ -116,6 +117,7 @@
 void KWinCompositingKCM::init()
 {
     auto currentIndexChangedSignal = static_cast<void(QComboBox::*)(int)>(&QComboBox::currentIndexChanged);
+    auto valueChangedSignal = static_cast<void(QSpinBox::*)(int)>(&QSpinBox::valueChanged);
 
     // animation speed
     m_form.animationDurationFactor->setMaximum(s_animationMultipliers.size() - 1);
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwindecoration/kwindecoration.desktop kwin/kcmkwin/kwindecoration/kwindecoration.desktop
--- kwin-5.19.0/kcmkwin/kwindecoration/kwindecoration.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwindecoration/kwindecoration.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -26,7 +26,6 @@
 Name[en_GB]=Window Decorations
 Name[es]=Decoración de ventanas
 Name[et]=Akna dekoratsioonid
-Name[eu]=Leiho-apaindurak
 Name[fi]=Ikkunakehykset
 Name[fr]=Décorations de fenêtres
 Name[ga]=Maisiúcháin Fhuinneog
@@ -82,7 +81,6 @@
 Comment[en_GB]=Configure window titlebars and borders
 Comment[es]=Configurar barra de título y bordes de las ventanas
 Comment[et]=Akende tiitliriba ja raami seadistamine
-Comment[eu]=Konfiguratu leihoen titulu-barrak eta ertzak
 Comment[fi]=Ikkunan otsikkopalkkien ja reunojen asetukset
 Comment[fr]=Configure les barres de titre et les bordures de la fenêtre
 Comment[gl]=Configurar as barras de título e os bordos das xanelas
@@ -116,7 +114,6 @@
 X-KDE-Keywords[en_GB]=kwin,window,manager,border,style,theme,look,feel,layout,button,handle,edge,kwm,decoration
 X-KDE-Keywords[es]=kwin,ventana,gestor,borde,estilo,tema,aspecto,sensación,disposición,botón,asa,borde,kwm,decoración
 X-KDE-Keywords[et]=kwin,aken,haldur,piire,stiil,teema,välimus,paigutus,nupp,pide,serv,kwm,dekoratsioon
-X-KDE-Keywords[eu]=kwin,leiho,kudeatzaile,ertz,estilo,gai, itxura,izaera,diseinu,botoi,helduleku,kwm,dekorazio,apaindura,apainketa
 X-KDE-Keywords[fi]=kwin,ikkuna,hallinta,ikkunointiohjelma,kehys,reunus,tyyli,teema,ulkoasu,toiminta,asettelu,painike,kahva,kulma,reuna,kwm,koriste
 X-KDE-Keywords[fr]=kwin, fenêtre, gestionnaire, composition, bordure, style, thème, apparence, comportement, disposition, bouton, prise en main, bord, kwm, décoration
 X-KDE-Keywords[ga]=kwin,fuinneog,bainisteoir,imlíne,stíl,téama,cuma,brath,leagan amach,cnaipe,hanla,ciumhais,kwm,maisiúchán
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwindecoration/package/metadata.desktop kwin/kcmkwin/kwindecoration/package/metadata.desktop
--- kwin-5.19.0/kcmkwin/kwindecoration/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwindecoration/package/metadata.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -28,7 +28,6 @@
 Name[en_GB]=Window Decorations
 Name[es]=Decoración de ventanas
 Name[et]=Akna dekoratsioonid
-Name[eu]=Leiho-apaindurak
 Name[fi]=Ikkunakehykset
 Name[fr]=Décorations de fenêtres
 Name[ga]=Maisiúcháin Fhuinneog
@@ -83,7 +82,6 @@
 Comment[en_GB]=Configure window titlebars and borders
 Comment[es]=Configurar barra de título y bordes de las ventanas
 Comment[et]=Akende tiitliriba ja raami seadistamine
-Comment[eu]=Konfiguratu leihoen titulu-barrak eta ertzak
 Comment[fi]=Ikkunan otsikkopalkkien ja reunojen asetukset
 Comment[fr]=Configure les barres de titre et les bordures de la fenêtre
 Comment[gl]=Configurar as barras de título e os bordos das xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwindecoration/window-decorations.knsrc kwin/kcmkwin/kwindecoration/window-decorations.knsrc
--- kwin-5.19.0/kcmkwin/kwindecoration/window-decorations.knsrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwindecoration/window-decorations.knsrc	2020-06-09 12:51:19.250064718 -0500
@@ -12,7 +12,6 @@
 Name[en_GB]=Window Decorations
 Name[es]=Decoración de ventanas
 Name[et]=Akna dekoratsioonid
-Name[eu]=Leiho-apaindurak
 Name[fi]=Ikkunakehykset
 Name[fr]=Décorations de fenêtres
 Name[ga]=Maisiúcháin Fhuinneog
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwindesktop/kcm_kwin_virtualdesktops.desktop kwin/kcmkwin/kwindesktop/kcm_kwin_virtualdesktops.desktop
--- kwin-5.19.0/kcmkwin/kwindesktop/kcm_kwin_virtualdesktops.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwindesktop/kcm_kwin_virtualdesktops.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -26,7 +26,6 @@
 Name[en_GB]=Virtual Desktops
 Name[es]=Escritorios virtuales
 Name[et]=Virtuaalsed töölauad
-Name[eu]=Alegiazko mahaigaina
 Name[fi]=Virtuaalityöpöydät
 Name[fr]=Bureaux virtuels
 Name[ga]=Deasca Fíorúla
@@ -82,7 +81,6 @@
 Comment[en_GB]=Configure navigation, number and layout of virtual desktops
 Comment[es]=Configurar la navegación, número y disposición de los escritorios virtuales
 Comment[et]=Virtuaalsete töölaudade vahel liikumise, nende arvu ja paigutuse seadistamine
-Comment[eu]=Konfiguratu nabigatzea, alegiazko mahaigainen kopurua eta antolamendua
 Comment[fi]=Aseta virtuaalityöpöytien määrä, asettelu ja niiden välillä siirtyminen
 Comment[fr]=Configurer la navigation, le nombre et la disposition des bureaux virtuels
 Comment[gl]=Configurar a navegación, cantidade e disposición dos escritorios virtuais
@@ -114,7 +112,6 @@
 X-KDE-Keywords[en_GB]=desktop,desktops,number,virtual desktop,multiple desktops,pager,pager widget,pager applet,pager settings
 X-KDE-Keywords[es]=escritorio,escritorios,número,escritorio virtual,múltiples escritorios,paginador,control de paginación,miniaplicación del paginador,preferencias del paginador
 X-KDE-Keywords[et]=töölaud,töölauad,arv,virtuaalne töölaud,mitu töölauda,töölauavahetaja,töölaudade vahetaja,töölauavahetaja aplett,töölauavahetaja vidin,töölauavahetaja seadistused
-X-KDE-Keywords[eu]=mahaigain,mahaigainak,kopuru,mahaigain birtuala,alegiazko mahaigaina,hainbat mahaigain,bilagailu,bilagailuaren trepeta,bilagailuaren miniaplikazioa,bilagailuaren ezarpenak
 X-KDE-Keywords[fi]=työpöytä,työpöydät,lukumäärä,virtuaalityöpöytä,monta työpöytää,sivutin,sivutinsovelma,sivuttimen asetukset
 X-KDE-Keywords[fr]=bureau, bureaux, numéro, bureau virtuel, bureaux multiples, gestionnaire de bureau, composant graphique du gestionnaire de bureau, paramètres du gestionnaire de bureaux
 X-KDE-Keywords[gl]=escritorio,escritorios,número,escritorio virtual,escritorios múltiplos,paxinador, trebello paxinador, miniaplicativo paxinador,configuración do paxinador
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwindesktop/package/metadata.desktop kwin/kcmkwin/kwindesktop/package/metadata.desktop
--- kwin-5.19.0/kcmkwin/kwindesktop/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwindesktop/package/metadata.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -13,7 +13,6 @@
 Name[en_GB]=Virtual Desktops
 Name[es]=Escritorios virtuales
 Name[et]=Virtuaalsed töölauad
-Name[eu]=Alegiazko mahaigaina
 Name[fi]=Virtuaalityöpöydät
 Name[fr]=Bureaux virtuels
 Name[ga]=Deasca Fíorúla
@@ -69,7 +68,6 @@
 Comment[en_GB]=Configure navigation, number and layout of virtual desktops
 Comment[es]=Configurar la navegación, número y disposición de los escritorios virtuales
 Comment[et]=Virtuaalsete töölaudade vahel liikumise, nende arvu ja paigutuse seadistamine
-Comment[eu]=Konfiguratu nabigatzea, alegiazko mahaigainen kopurua eta antolamendua
 Comment[fi]=Aseta virtuaalityöpöytien määrä, asettelu ja niiden välillä siirtyminen
 Comment[fr]=Configurer la navigation, le nombre et la disposition des bureaux virtuels
 Comment[gl]=Configurar a navegación, cantidade e disposición dos escritorios virtuais
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwineffects/kcm_kwin_effects.desktop kwin/kcmkwin/kwineffects/kcm_kwin_effects.desktop
--- kwin-5.19.0/kcmkwin/kwineffects/kcm_kwin_effects.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwineffects/kcm_kwin_effects.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -25,7 +25,6 @@
 Name[en_GB]=Desktop Effects
 Name[es]=Efectos del escritorio
 Name[et]=Töölauaefektid
-Name[eu]=Mahaigaineko efektuak
 Name[fi]=Työpöytätehosteet
 Name[fr]=Effets de bureau
 Name[gl]=Efectos do escritorio
@@ -69,7 +68,6 @@
 Comment[en_GB]=Configure compositor settings for desktop effects
 Comment[es]=Configurar las preferencias del compositor para los efectos del escritorio
 Comment[et]=Komposiitori seadistamine töölauaefektide tarbeks
-Comment[eu]=Konfiguratu konposatzailearen ezarpenak mahaigaineko efektuetarako
 Comment[fi]=Koostimen asetukset työpöytätehosteille
 Comment[fr]=Configurer les paramètres du compositeur pour les effets de bureau
 Comment[gl]=Configurar o compositor para os efectos de escritorio
@@ -100,7 +98,6 @@
 X-KDE-Keywords[en_GB]=kwin,window,manager,effect,3D effects,2D effects,graphical effects,desktop effects,animations,various animations,window management effects,window switching effect,desktop switching effect,animations,desktop animations,drivers,driver settings,rendering,render,invert effect,looking glass effect,magnifier effect,snap helper effect,track mouse effect,zoom effect,blur effect,fade effect,fade desktop effect,fall apart effect,glide effect,highlight window effect,login effect,logout effect,magic lamp effect,minimize animation effect,mouse mark effect,scale effect,screenshot effect,sheet effect,slide effect,sliding popups effect,thumbnail aside effect,translucency,translucency effect,transparency,window geometry effect,wobbly windows effect,startup feedback effect,dialog parent effect,dim inactive effect,dim screen effect,slide back effect,eye candy,candy,show FPS effect,show paint effect,cover switch effect,desktop cube effect,desktop cube animation effect,desktop grid effect,flip switch effect,present windows effect,resize window effect,background contrast effect
 X-KDE-Keywords[es]=kwin,ventana,gestor,efecto,efectos 3D,efectos 2D,efectos gráficos,efectos del escritorio,animaciones,animaciones diversas,efectos de la gestión de ventanas,efecto de cambio de ventana,efecto de cambio de escritorio,animaciones,animaciones del escritorio,controladores,preferencias del controlador,renderización,renderizar,efecto de inversión,efecto de espejo,efecto de lupa,efecto auxiliar de instantánea,efecto de seguimiento del ratón,efecto de ampliación,efecto borroso,efecto de desvanecimiento,efecto de desvanecimiento del escritorio,efecto de romper en pedazos,efecto de planeo,efecto de resaltar ventanas,efecto de inicio de sesión,efecto de final de sesión,efecto de lámpara mágica,efecto de animación al minimizar,efecto de marcas del ratón,efecto de escalado,efecto de captura de pantalla,efecto de hoja,efecto de deslizamiento,efecto de ventanas emergentes deslizantes,efecto de miniaturas laterales,transparencia,efecto de transparencia,efecto de geometría de las ventanas, efecto de ventanas gelatinosas,efecto de notificación de inicio,efecto de padre de la ventana,efecto de oscurecer inactiva,efecto de oscurecer la pantalla,efecto atrás,efectos atractivos,efecto de mostrar FPS,efecto de mostrar pintura,efecto de selección de ventana en modo carátula,efecto de cubo del escritorio,efecto de animación del cubo del escritorio,efecto de rejilla del escritorio,efecto de selección de ventana en modo cascada,efecto de presentación de ventanas,efecto de cambiar tamaño de las ventanas,efecto de contraste del fondo
 X-KDE-Keywords[et]=kwin,aken,hakdur,efekt,3D efektid,ruumilised efektid,2D efektid,graafikaefektid,töölauaefektid,animatsioonid,eri animatsioonid,aknahaldusefektid,akna lülitamise efekt,töölaua lülitamise efekt,animatsioonid,töölauaanimatsioonid,draiverid,draiveri seadistused,renderdamine,renderdus,inverteerimisefekt,pikksilmaefekt,suurendusklaasiefekt,tõmbe abistaja efekt,hiire jälgimise efekt,suurendusefekt,vidinavaate efekt,plahvatuseefekt,hääbumisefekt,töölaua kadumise efekt,lagunemise efekt,liuglemisefekt,akna esiletõstmise efekt,sisselogimisefekt,väljalogimisefekt,maagilise laterna efekt,minimeerimisanimatsiooni efekt,hiirega tähistamise efekt,skaleerimisefekt,ekraanipildi efekt,leheefekt,slaidiefekt,liuglevate hüpikakende efekt,tegumiriba pisipiltide efekt,kõrvalasuvate pisipiltide efekt,läbipaistvus,läbipaistvuseefekt,akende geomeetria efekt,vonklevate akende efekt,käivitamise tagasiside efekt,dialoogi eellase efekt,tuhmi mitteaktiivse efekt,tuhmi ekraani efekt,tagasiliugumise efekt,silmarõõm,FPS-i näitamise efekt,joonistamise näitamise efekt,kastina lülitamise efekt,vaiplülitamise efekt,töölauakuubiku efekt, töölauakuubiku animatsiooni efekt,töölauavõrgustiku efekt,pööramisega lülitamise efekt,kontuuriefekt,aktiivsete akende efekt, akende suuruse muutmise efekt
-X-KDE-Keywords[eu]=kwin,leihoa,kudeatzailea,efektua,3D efektuak,2D efektuak,efektu grafikoak,mahaigaineko efektuak,animazioak,hainbat animazio,leiho kudeaketaren efektuak,leiho-aldatze efektuak,mahaigaina aldatzeko efektua,animazioak,mahaigaineko animazioak,gidariak,gidarien ezarpenak,errendatze,errendatu,alderantzikatu efektua,pantaila-lupa efektua,lupa efektua,atxikitze laguntzaile efektua,jarraitu saguari efektua,zoom efektua,lausotze efektua,desagertze efektua,mahaigain-desagertze efektua,puskatze efektua,irristatze efektua,leiho-nabarmentze efektua,saio-haste efektua,saio-ixte efektua,lanpara magiko efektua,minimizatze-animazio efektua, sagu-marka efektua,eskalatze efektua,pantaila-argazki efektua,orrialde efektua,diapositiba efektua,diapositiba gainerakor efektua,koadro txikiak alboan efektua,zeharrargitasuna,zeharrargitasun efektua,gardentasuna,leiho-geometria efektua,leiho dardartsuak efektua,abio berrelikadura efektua,guraso elkarrizketa-koadro efektua,itzaldu ez-aktiboa efektua,itzaldu pantaila efektua,diapositibak atzera efektua,ikusteko atsegina,atsegina,FPS erakuste efektua,erakutsi pintura efektua,azal aldaketa efektua,kubo-mahaigain efektua,kubo-mahaigain animazio efektua,mahaigain-sareta efektua,perspektiban pilatutako aldatze efektua,aurkeztu leihoak efektua,leihoaren neurri-aldatze efektua,atzealdeko kontraste efektua
 X-KDE-Keywords[fi]=kwin,ikkuna,hallinta,tehoste,3D-tehosteet,2D-tehosteet,graafiset tehosteet,työpöytätehosteet,animoinnit,eri animoinnit,ikkunanhallintatehosteet,ikkunanvaihtotehoste,työpöydänvaihtotehoste,animoinnit,työpöytäanimoinnit,ajurit,ajuriasetukset,hahmonnus,hahmonna,käänteistehoste,peilitehoste,suurennuslasitehoste,kiinnitysavustajatehoste,hiiren jäljitystehoste,suurennustehoste,sumennustehoste,häivytystehoste,työpöydän häivytystehoste,hajotustehoste,liukutehoste,ikkunan korostustehoste,kirjautumistehoste,uloskirjautumistehoste,taikalampputehoste,pienennyksen animointitehoste,hiiren jälki -tehoste,skaalaustehoste,ruudunkaappaustehoste,sheet effect,liukutehoste,liukuvat ponnahdusikkunat -tehoste,esikatselukuva reunalla -tehoste,läpikuultavuus,läpikuultavuustehoste,läpinäkyvyys,ikkunageometriatehoste,heiluvat ikkunat -tehoste,käynnistyspalautetehoste,kyselyikkunan isäntäikkuna -tehoste,himmennä passiivinen -tehoste,himmennä näyttö -tehoste,liuku taakse -tehoste,silmäkarkki,karkki,näytä FPS -tehoste,näytä näytönpiirto -tehoste,kansivaihtotehoste,työpöytäkuutiotehoste,työpöytäkuutioanimointitehoste,työpöytäruudukkotehoste,kääntövaihtotehoste,näytä ikkunat -tehoste,ikkunan koonmuuttamistehoste,taustakontrastitehoste
 X-KDE-Keywords[fr]=kwin, fenêtre, gestionnaire, effet, effets 3D, effets 2D, effets graphiques, effets de bureau, animations, animations variés, effets de gestion des fenêtres, effets de changement de fenêtre, effets de changement de bureau, animations, animation du bureau, pilotes, paramètres du pilote, rendu, rendre, effet d'inversion, effet de verre, effet de loupe, effet d'aide au positionnement, effet de repérage de la souris, effet de zoom, effet de flou, effet de fondu, effet de fondu du bureau, effet d'effondrement, effet de glissement, effet de mise en valeur de la fenêtre, effet de connexion, effet de déconnexion, effet de lampe magique, effet de minimisation de l'application, effet de marque de la souris, effet de gradation, effet de capture d'écran, effet de feuille, effet de glisse, effet d'annotations glissantes, effet vignettes sur le coté, translucidité, effet de translucidité, transparence, effet de géométrie de la fenêtre, effet de fenêtre en gélatine, effet du témoin de démarrage, effet de dialogue parent, effet d'obscurcissement de fenêtre inactive, effet d'obscurcissement du bureau, effet de glissement en arrière, confort visuel, beauté, effet d'affichage du FPS, effet d'affichage des zones peintes, effet de défilement circulaire, effet de bureaux en cube, effet d'animation de cube de bureaux, effet de bureaux en grille, effet d'empilement en perspective, effet de présentation des fenêtres, effet de redimensionnement des fenêtres, effet de contraste du bureau
 X-KDE-Keywords[gl]=kwin,window,xanela,manager,xestor,effect,efecto,3D effects,efectos 3D,2D effects,efectos 2D,configuración de vídeo,graphical effects,efectos gráficos,efectos visuais,desktop effects,efectos de escritorio,animations,animacións,various animations,animacións diversas,varias animacións,animacións variadas,window management effects,efectos de xestión de xanelas,window switching effect,efecto de cambio de xanela,desktop switching effect,efecto de cambio de escritorio,animations,animacións,desktop animations,animacións de escritorio,animacións dos escritorios,animacións do escritorio,drivers,controlador,controladores,driver settings,configuración dos controladores,configuración do controlador,rendering,renderización,renderizado,renderizamento,render,renderizar,invert effect,inverter un efecto,inverter efecto,reverter un efecto,reverter efecto,looking glass effect,efecto de lupa,efecto lupa,magnifier effect,snap helper effect,track mouse effect,efecto de seguir o rato,efecto de seguimento do rato,zoom effect,efecto de ampliación,blur effect,efecto borroso,fade effect,efecto de esvaer,fade desktop effect,efecto de esvaer o escritorio,fall apart effect,efecto de destrución,glide effect,efecto de brillo,highlight window effect,efecto de realzar a xanela,efecto de resaltar a xanela,efecto de salientar a xanela,efecto de salientar a xanela,login effect,efecto de acceder,logout effect,efecto de saír,magic lamp effect,efecto de lámpada máxica,minimize animation effect,efecto de minimizar,mouse mark effect,efecto de marca co rato,scale in effect,efecto de achegar,efecto de cambia de escala,screenshot effect,efecto de captura,sheet effect,efecto de folla,slide effect,efecto de dispositiva,sliding popups effect,thumbnail aside effect,translucency,transparencia,translucidez,translucency effect,efecto de translucidez,efecto de transparencia,transparency,transparencia,window geometry effect,efecto de xeometría da xanela,efecto de xeometría das xanelas,wobbly windows effect,efecto de xanelas a tremer,startup feedback effect,dialog parent effect,efecto do pai do diálogo,dim inactive effect,dim screen effect,efecto de escurecer,slide back effect,eye candy,candy,show FPS effect,efecto de mostrar os FPS,show paint effect,cover switch effect,desktop cube effect,efecto de cubo de escritorio,efecto do cubo de escritorio,efecto de cubo do escritorio,desktop cube animation effect,desktop grid effect,efecto de grade de escritorios,efecto de grade de escritorios,flip switch effect,efecto de interruptor,efecto de contorno,present windows effect,resize window effect,efecto de cambio de tamaño das xanelas,efecto de contraste de fondo
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwineffects/kwineffect.knsrc kwin/kcmkwin/kwineffects/kwineffect.knsrc
--- kwin-5.19.0/kcmkwin/kwineffects/kwineffect.knsrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwineffects/kwineffect.knsrc	2020-06-09 12:51:19.250064718 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=Window Manager Effects
 Name[es]=Efectos del gestor de ventanas
 Name[et]=Aknahalduri efektid
-Name[eu]=Leiho kudeatzailearen efektua
 Name[fi]=Ikkunointiohjelman tehosteet
 Name[fr]=Effets du gestionnaire de fenêtres
 Name[gl]=Efectos do xestor de xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwineffects/package/metadata.desktop kwin/kcmkwin/kwineffects/package/metadata.desktop
--- kwin-5.19.0/kcmkwin/kwineffects/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwineffects/package/metadata.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Desktop Effects
 Name[es]=Efectos del escritorio
 Name[et]=Töölauaefektid
-Name[eu]=Mahaigaineko efektuak
 Name[fi]=Työpöytätehosteet
 Name[fr]=Effets de bureau
 Name[gl]=Efectos do escritorio
@@ -58,7 +57,6 @@
 Comment[en_GB]=Desktop Effects
 Comment[es]=Efectos del escritorio
 Comment[et]=Töölauaefektid
-Comment[eu]=Mahaigaineko efektuak
 Comment[fi]=Työpöytätehosteet
 Comment[fr]=Effets de bureau
 Comment[gl]=Efectos do escritorio
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinoptions/kwinactions.desktop kwin/kcmkwin/kwinoptions/kwinactions.desktop
--- kwin-5.19.0/kcmkwin/kwinoptions/kwinactions.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinoptions/kwinactions.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -17,7 +17,6 @@
 Name[en_GB]=Window Actions
 Name[es]=Acciones de ventanas
 Name[et]=Akna toimingud
-Name[eu]=Leihoetako ekintzak
 Name[fi]=Ikkunan toiminnot
 Name[fr]=Actions de la fenêtre
 Name[gl]=Accións da xanela
@@ -48,7 +47,6 @@
 Comment[en_GB]=Configure mouse actions for windows and titlebars
 Comment[es]=Configurar las acciones del ratón para las ventanas y las barras de títulos
 Comment[et]=Hiiretoimingute seadistamine akendes ja tiitliribadel
-Comment[eu]=Konfiguratu saguaren ekintzak leihoekin eta titulu-barrekin
 Comment[fi]=Ikkunoiden ja otsikkopalkkien hiiritoimintojen asetukset
 Comment[fr]=Configurer les actions de la souris pour les fenêtres et barres de titres
 Comment[gl]=Configurar as accións do rato para xanelas e barras de título
@@ -81,7 +79,6 @@
 X-KDE-Keywords[en_GB]=shade,maximise,maximize,minimize,minimise,lower,operations menu,titlebar,resize
 X-KDE-Keywords[es]=sombra,maximizar,maximizar,minimizar,minimizar,inferior,menú de operaciones,barra de título,cambio de tamaño
 X-KDE-Keywords[et]=varjamine,peitmine,maksimeerimine,minimeerimine,allakerimine,üleskerimine,menüü,tiitliriba,suuruse muutmine
-X-KDE-Keywords[eu]=bildu,maximizatu,ikonotu,jaitsi,eragiketa-menua,titulu-barra,tamainaz aldatu
 X-KDE-Keywords[fi]=varjosta,rullaa,suurenna,pienennä,laske,toimintovalikko,otsikkopalkki,muuta kokoa
 X-KDE-Keywords[fr]=ombre, maximiser, maximise, minimiser, minimise, menu des opérations, barre de titre, redimensionner
 X-KDE-Keywords[ga]=scáth,scáthaigh,uasmhéadaigh,íosmhéadaigh,íoslaghdaigh,laghdaigh,roghchlár oibríochta,barra teidil,athraigh méid
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinoptions/kwinadvanced.desktop kwin/kcmkwin/kwinoptions/kwinadvanced.desktop
--- kwin-5.19.0/kcmkwin/kwinoptions/kwinadvanced.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinoptions/kwinadvanced.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -16,7 +16,6 @@
 Name[en_GB]=Advanced Window Behaviour
 Name[es]=Comportamiento avanzado de las ventanas
 Name[et]=Täpsem akende käitumine
-Name[eu]=Leihoaren portaera aurreratua
 Name[fi]=Ikkunatoiminnan lisäasetukset
 Name[fr]=Comportement avancé des fenêtres
 Name[gl]=Comportamento avanzado das xanelas
@@ -47,7 +46,6 @@
 Comment[en_GB]=Configure advanced window management options
 Comment[es]=Configurar las opciones avanzadas de la gestión de ventanas
 Comment[et]=Muude aknahalduse valikute seadistamine
-Comment[eu]=Konfiguratu leiho kudeaketa aukera aurreratuak
 Comment[fi]=Ikkunanhallinnan lisäasetukset
 Comment[fr]=Configurer les options de gestion avancée des fenêtres
 Comment[gl]=Configurar as funcionalidades avanzadas da xestión de xanelas
@@ -76,7 +74,6 @@
 X-KDE-Keywords[en_GB]=unshade,unshading,shade,shading,border,hover,active borders,tiling,tabs,tabbing,window,window tabbing,window grouping,window tiling,placement,window placement,placement of windows,window advanced behaviour
 X-KDE-Keywords[es]=desplegar,extender,recoger,plegar,borde,pasada,bordes activos,mosaico,pestañas,páginas en pestañas,ventana,pestañas de páginas,agrupación de ventanas,ventanas en mosaico,posicionamiento,posicionamiento de ventanas,comportamiento avanzado de las ventanas
 X-KDE-Keywords[et]=varjamine,piire,kohalviibimine,aktiivsed piirded,paanimine,kaardid,aknad kaartidena,akende rühmitamine,akende paanimine,akende paigutus,akende täpne käitumine,aken,paigutus
-X-KDE-Keywords[eu]=zabaldu,zabaltzea,bildu,biltzea,gainetik pasatzea,ertz aktiboak,lauzatze,fitxak,leihoa,leihoen fitxak,leihoak lauza moduan,leihoen kokapena,leihoen jokabide aurreratua
 X-KDE-Keywords[fi]=rullauksen avaus,rullauksen avaaminen,rullaus,rullaaminen,kehys,leijunta,aktiiviset reunat,asettelu,välilehdet,ikkunavälilehdet,ikkunoiden ryhmittely,ikkunoiden asettelu,sijoittaminen,sijoittelu,ikkunoiden sijoittaminen,ikkunoiden sijoittelu,ikkunoiden lisäasetukset
 X-KDE-Keywords[fr]=non ombré, dé-nuancé, nuancé, ombré, bordure, survol, bords actifs, mosaïque, onglets, changement d'onglet, fenêtre, changement de fenêtres, regroupement de fenêtres, mosaïque de fenêtres, placement de fenêtres, positionnement de fenêtre, comportement avancé des fenêtres
 X-KDE-Keywords[gl]=dessombrar,dessombramento,sombra,bordo,beira,pasar,bordos activos,beiras activas,xanela,separadores,agrupar xanelas, situación das xanelas,colocación,colocación das xanelas,comportamento avanzado das xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinoptions/kwinfocus.desktop kwin/kcmkwin/kwinoptions/kwinfocus.desktop
--- kwin-5.19.0/kcmkwin/kwinoptions/kwinfocus.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinoptions/kwinfocus.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -15,7 +15,6 @@
 Name[en_GB]=Window Focus Behaviour
 Name[es]=Comportamiento del foco de las ventanas
 Name[et]=Akende fookuse käitumine
-Name[eu]=Leiho fokuaren portaera
 Name[fi]=Ikkunoiden kohdistuskäytäntö
 Name[fr]=Comportement de focus des fenêtres
 Name[gl]=Comportamento do foco das xanelas
@@ -45,7 +44,6 @@
 Comment[en_GB]=Configure window activation policy
 Comment[es]=Configurar la política de activación de ventanas
 Comment[et]=Akende aktiveerimise reeglite seadistamine
-Comment[eu]=Konfiguratu leihoa aktibatzeko gidalerroak
 Comment[fi]=Ikkunoiden aktivointikäytännön asetukset
 Comment[fr]=Configurer la politique d'activation des fenêtres
 Comment[gl]=Configurar a política de activación de xanelas
@@ -74,7 +72,6 @@
 X-KDE-Keywords[en_GB]=focus,auto raise,raise,click raise,keyboard,CDE,alt-tab,all desktop,focus follows mouse,focus prevention,focus stealing,focus policy,window focus behaviour,window screen behaviour
 X-KDE-Keywords[es]=foco,auto levantar,levantar,clic para levantar,teclado,CDE,alt-tab,todo el escritorio,el foco sigue al ratón,prevención de foco,robo del foco,política del foco,comportamiento del foco de las ventanas,comportamiento de la pantalla de ventanas
 X-KDE-Keywords[et]=fookus,asetus,automaatne esiletoomine,klõpsuga esiletoomine,klaviatuur,CDE,alt-tab,kõik töölauad,fookus järgib hiirt,fookuse vältimine,fookuse röövimine,fookuse reegel,akna fookuse käitumine
-X-KDE-Keywords[eu]=fokua,automatikoki igo,igo,egin klik igotzeko,teklatu,CDE,alt-tab,mahaigain guztiak,fokuak saguari jarraitzen dio,foku-prebentzioa,foku-lapurreta,fokuaren gidalerro,leihoen fokuaren portaera,leihoen pantailen portaera
 X-KDE-Keywords[fi]=kohdistus,sijoitus,automaattinen nosto,automaattinen nostaminen,nosta,nosta napsauttamalla,näppäimistö,alt-sarkain,kaikki työpöydät,kohdistus seuraa hiirtä,kohdistuksen esto,kohdistuksen varastaminen,kohdistustapa,ikkunoiden kohdistuksen toiminta,ikkunoiden näyttötoiminta
 X-KDE-Keywords[fr]=focus, agrandissement automatique, agrandissement, clic d'agrandissement, clavier, CDE, alt-tab, tous les bureaux, focus suivi par la souris, prise de focus, politique de focus, comportement du focus des fenêtres, comportement des fenêtres
 X-KDE-Keywords[gl]=foco,erguer automaticamente,erguer,erguer ao premer,teclado,CDE,alt-tab,todo o escritorio,foco que segue o rato,prevención do foco,roubar o foco,política de foco,comportamento de foco de xanela,comportamento de pantalla de xanela
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinoptions/kwinmoving.desktop kwin/kcmkwin/kwinoptions/kwinmoving.desktop
--- kwin-5.19.0/kcmkwin/kwinoptions/kwinmoving.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinoptions/kwinmoving.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -16,7 +16,6 @@
 Name[en_GB]=Window Movement
 Name[es]=Movimiento de las ventanas
 Name[et]=Akna liigutamine
-Name[eu]=Leihoaren mugimendua
 Name[fi]=Ikkunoiden siirtäminen
 Name[fr]=Déplacement des fenêtres
 Name[gl]=Movemento das xanelas
@@ -46,7 +45,6 @@
 Comment[en_GB]=Configure window movement options
 Comment[es]=Configurar las opciones del movimiento de las ventanas
 Comment[et]=Akende liigutamise seadistamine
-Comment[eu]=Konfiguratu leiho mugimenduaren aukerak
 Comment[fi]=Ikkunoiden siirtämisen asetukset
 Comment[fr]=Configurer les options de déplacement des fenêtres
 Comment[gl]=Configurar o movemento das xanelas
@@ -79,7 +77,6 @@
 X-KDE-Keywords[en_GB]=moving,smart,cascade,maximize,maximise,snap zone,snap,border
 X-KDE-Keywords[es]=movimiento,inteligente,cascada,maximizar,maximizar,zona de instantánea,instantánea,borde
 X-KDE-Keywords[et]=liigutamine,nutikas,kaskaad,maksimeerimine,haardetsoon,haaramine,piire
-X-KDE-Keywords[eu]=lekuz aldatzea,adimendun,kaskada,maximizatu,atxikitze-eremu,atxikitu,ertz
 X-KDE-Keywords[fi]=siirtäminen,älykäs,porrastus,suurentaminen,tarttuminen,kiinnitysalue,tartunta,kiinnitys,kiinnittyminen,reuna
 X-KDE-Keywords[fr]=déplacement, intelligent, cascade, maximiser, maximise, zone de rupture, rupture, bordure
 X-KDE-Keywords[gl]=mover,intelixente,solapar,fervenza,maximizar,minimizar,zona de adherencia, adherencia,bordo,beira,bordo
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinoptions/kwinoptions.desktop kwin/kcmkwin/kwinoptions/kwinoptions.desktop
--- kwin-5.19.0/kcmkwin/kwinoptions/kwinoptions.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinoptions/kwinoptions.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -34,7 +34,6 @@
 Name[eo]=Fenestrokonduto
 Name[es]=Comportamiento de las ventanas
 Name[et]=Akende käitumine
-Name[eu]=Leihoaren portaera
 Name[fa]=رفتار پنجره
 Name[fi]=Ikkunoiden toiminta
 Name[fr]=Comportement des fenêtres
@@ -107,7 +106,6 @@
 Comment[en_GB]=Configure window actions and behaviour
 Comment[es]=Configurar las acciones y el comportamiento de las ventanas
 Comment[et]=Akende toimingute ja käitumise seadistamine
-Comment[eu]=Konfiguratu leihoaren ekintzak eta jokabidea
 Comment[fi]=Ikkunatoimintojen asetukset
 Comment[fr]=Configurer les actions et le comportement des fenêtres
 Comment[gl]=Configurar o comportamento e as accións das xanelas
@@ -140,7 +138,6 @@
 X-KDE-Keywords[en_GB]=focus,placement,window behaviour,window actions,animation,raise,auto raise,windows,frame,titlebar,doubleclick
 X-KDE-Keywords[es]=foco,posicionamiento,comportamiento de las ventanas,acciones de las ventanas,animación,elevación,autoelevación,ventanas,marco,barra de título,doble clic
 X-KDE-Keywords[et]=fookus,asetus,paigutus,akende käitumine,aknatoimingud,animeerimine,animatsioon,esiletoomine,automaatne esiletoomine,aknad,raam,tiitliriba,topeltklõps
-X-KDE-Keywords[eu]=foku,kokaleku,leihoen portaera,leiho-ekintzak,animazio,igo,automatikoki igo,leihoak,marko,titulu-barra,klik bikoitz
 X-KDE-Keywords[fi]=kohdistus,sijoittelu,sijoitus,ikkunoiden toiminta,ikkunoiden toiminnot,animaatio,nosta,automaattinen nosto,ikkunat,kehys,otsikkopalkki,kaksoisnapsautus,tuplanapsautus,kaksoisklikkaus,tuplaklikkaus
 X-KDE-Keywords[fr]=focus, placement, comportement de la fenêtre, actions sur les fenêtres, animation, agrandissement, agrandissement automatique, fenêtres, cadre, barre de titre, double clic
 X-KDE-Keywords[gl]=foco,posicionamento,comportamento das xanelas,accións das xanelas, animación,xanelas,moldura,barra de título,marco
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinrules/kcm_kwinrules.desktop kwin/kcmkwin/kwinrules/kcm_kwinrules.desktop
--- kwin-5.19.0/kcmkwin/kwinrules/kcm_kwinrules.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinrules/kcm_kwinrules.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -25,7 +25,6 @@
 Name[en_GB]=Window Rules
 Name[es]=Reglas de las ventanas
 Name[et]=Akna reeglid
-Name[eu]=Leihoaren arauak
 Name[fi]=Ikkunasäännöt
 Name[fr]=Règles de la fenêtre
 Name[ga]=Rialacha Fuinneog
@@ -85,7 +84,6 @@
 Comment[en_GB]=Individual Window Behaviour
 Comment[es]=Comportamiento de las ventanas individuales
 Comment[et]=Konkreetse akna käitumine
-Comment[eu]=Leihoen banakako portaera
 Comment[fi]=Yksittäisten ikkunoiden toiminta
 Comment[fr]=Comportement individuel des fenêtres
 Comment[gl]=Comportamento individual das xanelas
@@ -129,7 +127,6 @@
 X-KDE-Keywords[en_GB]=size,position,state,window behaviour,windows,specific,workarounds,remember,rules
 X-KDE-Keywords[es]=tamaño,posición,estado,comportamiento de las ventanas,ventanas,específicos,soluciones,recordatorio,reglas
 X-KDE-Keywords[et]=suurus,asukoht,olek,akende käitumine,aknad,meeldejätmine,reeglid
-X-KDE-Keywords[eu]=tamaina,posizio,egoera,leihoaren portaera,leihoak,zehatz,konponbide,gogorarazpen,arau
 X-KDE-Keywords[fi]=koko,sijainti,tila,ikkunoiden toiminta,ikkunat,erikoisasetukset,ikkunakohtaiset,korjaukset,muista,muistaminen,säännöt
 X-KDE-Keywords[fr]=taille, position, état, comportement de la fenêtre, fenêtres, spécifique, contournements, rappel, règles
 X-KDE-Keywords[ga]=méid,ionad,staid,oibriú na bhfuinneog,fuinneoga,sainiúil,réitigh seiftithe,meabhraigh,rialacha
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinrules/package/metadata.desktop kwin/kcmkwin/kwinrules/package/metadata.desktop
--- kwin-5.19.0/kcmkwin/kwinrules/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinrules/package/metadata.desktop	2020-06-09 12:51:19.250064718 -0500
@@ -28,7 +28,6 @@
 Name[en_GB]=Window Rules
 Name[es]=Reglas de las ventanas
 Name[et]=Akna reeglid
-Name[eu]=Leihoaren arauak
 Name[fi]=Ikkunasäännöt
 Name[fr]=Règles de la fenêtre
 Name[ga]=Rialacha Fuinneog
@@ -87,7 +86,6 @@
 Comment[en_GB]=Individual Window Behaviour
 Comment[es]=Comportamiento de las ventanas individuales
 Comment[et]=Konkreetse akna käitumine
-Comment[eu]=Leihoen banakako portaera
 Comment[fi]=Yksittäisten ikkunoiden toiminta
 Comment[fr]=Comportement individuel des fenêtres
 Comment[gl]=Comportamento individual das xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinscreenedges/kwinscreenedges.desktop kwin/kcmkwin/kwinscreenedges/kwinscreenedges.desktop
--- kwin-5.19.0/kcmkwin/kwinscreenedges/kwinscreenedges.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinscreenedges/kwinscreenedges.desktop	2020-06-09 12:51:19.253398052 -0500
@@ -26,7 +26,6 @@
 Name[eo]=Ekrananguloj
 Name[es]=Bordes de pantalla
 Name[et]=Ekraani servad
-Name[eu]=Pantailaren ertzak
 Name[fi]=Näytön reunat
 Name[fr]=Bords de l'écran
 Name[fy]=Skerm rânen
@@ -87,7 +86,6 @@
 Comment[en_GB]=Configure active screen corners and edges
 Comment[es]=Configurar los bordes y las esquinas de pantalla activos
 Comment[et]=Aktiivsete ekraani nurkade ja servade seadistamine
-Comment[eu]=Konfiguratu pantailaren izkina eta ertz aktiboak
 Comment[fi]=Aseta näytön aktiiviset reunat ja kulmat
 Comment[fr]=Configurer les bords et les coins d'écran actifs
 Comment[gl]=Configurar os bordos e esquinas activos da pantalla
@@ -121,7 +119,6 @@
 X-KDE-Keywords[en_GB]=kwin,window,manager,effect,corner,edge,border,action,switch,desktop,kwin screen edges,desktop edges,screen edges,maximise windows,tile windows,side of screen,screen behaviour,switch desktop,virtual desktop,screen corners
 X-KDE-Keywords[es]=kwin,ventana,gestor,efecto,esquina,borde,acción,cambiar,escritorio,bordes de pantalla de kwin,bordes del escritorio,bordes de la pantalla,maximizar ventanas,ventanas en mosaico,lado de la pantalla,comportamiento de la pantalla,cambiar escritorio,escritorio virtual,esquinas de la pantalla
 X-KDE-Keywords[et]=kwin,aken,haldur,efekt.nurk,serv,piire,toiming,lülitamine,töölaud,kwini ekraani servad,töölaua servad,ekraani servad,akende maksimeerimine,akende paanimine,ekraani äär,ekraani käitumine,töölaua lülitamine,virtuaalne töölaud,ekraani nurgad
-X-KDE-Keywords[eu]=kwin,leiho,kudeatzaile,efektu,izkin,ertz,ekintza,aldatu,mahaigain,kwin pantailaren ertzak,mahaigainaren ertzak,pantailen ertzak,maximizatu leihoak,lauzatu leihoak,leihoaren alboa,pantailaren portaera,aldatu mahaigaina,mahaigain birtuala,alegiazko mahaigaina,pantailaren izkinak
 X-KDE-Keywords[fi]=kwin,window,manager,effect,corner,edge,border,action,switch,desktop,kwin screen edges,desktop edges,screen edges,maximize windows,tile windows,side of screen,screen behavior,switch desktop,virtual desktop,screen corners,ikkunamanageri,ikkunointiohjelma,tehoste,kulma,reuna,vaihda,vaihto,työpöytä,näytön reunat,työpöydän reunat,suurenna ikkuna,kasaa ikkunat,näytön toiminta,vaihda työpöytää,virtuaalityöpöytä,näytön reunat
 X-KDE-Keywords[fr]=kwin, fenêtre, gestionnaire, effet, bord, coin, bordure, action, bascule, bureau, bords de l'écran kwin, bords du bureau, bords de l'écran, maximisation des fenêtres, mosaïque de fenêtres, cotés de l'écran, comportement de l'écran, changement de bureau, bureaux virtuels, coins de l'écran
 X-KDE-Keywords[gl]=kwin,xanela,xestor,efecto,esquina,beira,bordo,bordo,acción,trocar,escritorio,bordo do escritorio,maximizar xanelas,escritorio virtual,esquinas da pantalla
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinscreenedges/kwintouchscreen.desktop kwin/kcmkwin/kwinscreenedges/kwintouchscreen.desktop
--- kwin-5.19.0/kcmkwin/kwinscreenedges/kwintouchscreen.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinscreenedges/kwintouchscreen.desktop	2020-06-09 12:51:19.253398052 -0500
@@ -21,7 +21,6 @@
 Name[en_GB]=Touch Screen
 Name[es]=Pantalla táctil
 Name[et]=Puuteekraan
-Name[eu]=Ukimen-pantaila
 Name[fi]=Kosketusnäyttö
 Name[fr]=Écran tactile
 Name[gl]=Pantalla táctil
@@ -58,7 +57,6 @@
 Comment[en_GB]=Configure touch screen swipe gestures
 Comment[es]=Configurar los gestos de deslizamiento en pantalla táctil
 Comment[et]=Puuteekraani žestide seadistamine
-Comment[eu]=Konfiguratu ukimen-pantailako kolpe arinen keinuak
 Comment[fi]=Aseta kosketusnäytön pyyhkäisyeleet
 Comment[fr]=Configurer les mouvements sur l'écran tactile
 Comment[gl]=Configurar os xestos de pantalla táctil
@@ -91,7 +89,6 @@
 X-KDE-Keywords[en_GB]=kwin,window,manager,effect,edge,border,action,switch,desktop,desktop edges,screen edges,side of screen,screen behaviour,touch screen
 X-KDE-Keywords[es]=kwin,ventana,gestor,efecto,esquina,borde,acción,cambiar,escritorio,bordes del escritorio,bordes de la pantalla,lado de la pantalla,comportamiento de la pantalla,pantalla táctil
 X-KDE-Keywords[et]=kwin,aken,haldur,efekt,nurk,serv,piire,toiming,lülitamine,töölaud,töölaua servad,ekraani servad,ekraani äär,ekraani käitumine,puuteekraan
-X-KDE-Keywords[eu]=kwin,leiho,kudeatzaile,efektu,izkin,ertz,ekintza,aldatu,mahaigain,mahaigainaren ertzak,pantailen ertzak,pantailaren aldea,pantailaren portaera,ukipen-pantaila
 X-KDE-Keywords[fi]=kwin,ikkuna,hallinta,tehoste,kulma,laita,reuna,toiminto,vaihda,työpöytä,työpöydän reunat,näytön reunat,näytön laita,näytön käyttäytyminen,kosketusnäyttö
 X-KDE-Keywords[fr]=kwin, fenêtre, gestionnaire, effet, bord, bordure, action, bascule, bureau, bords du bureau, bords de l'écran, côté de l'écran, comportement de l'écran, écran tactile
 X-KDE-Keywords[gl]=kwin,window,xanela,manager,xestor,effect,efecto,edge,beira,bordo,contorno,esquina,border,action,acción,switch,cambiar,conmutar,trocar,desktop,escritorio,desktop edges,screen edges,pantalla,side of screen,screen behavior,comportamento,touch screen,táctil
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinscripts/kwinscripts.desktop kwin/kcmkwin/kwinscripts/kwinscripts.desktop
--- kwin-5.19.0/kcmkwin/kwinscripts/kwinscripts.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinscripts/kwinscripts.desktop	2020-06-09 12:51:19.253398052 -0500
@@ -19,7 +19,6 @@
 X-KDE-Keywords[en_GB]=kwin script
 X-KDE-Keywords[es]=guion de kwin
 X-KDE-Keywords[et]=kwini skript
-X-KDE-Keywords[eu]=KWin scripta
 X-KDE-Keywords[fi]=kwin-skripti
 X-KDE-Keywords[fr]=Script de KWin
 X-KDE-Keywords[ga]=Script kwin
@@ -71,7 +70,6 @@
 Name[en_GB]=KWin Scripts
 Name[es]=Guiones de KWin
 Name[et]=KWini skriptid
-Name[eu]=KWin scriptak
 Name[fi]=KWin-skriptit
 Name[fr]=Scripts de KWin
 Name[ga]=Scripteanna KWin
@@ -121,7 +119,6 @@
 Comment[en_GB]=Manage KWin scripts
 Comment[es]=Gestionar guiones de KWin
 Comment[et]=KWini skriptide haldamine
-Comment[eu]=Kudeatu KWin scriptak
 Comment[fi]=KWin-skriptien hallinta
 Comment[fr]=Gérer les scripts de KWin
 Comment[ga]=Bainistigh scripteanna KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwinscripts/kwinscripts.knsrc kwin/kcmkwin/kwinscripts/kwinscripts.knsrc
--- kwin-5.19.0/kcmkwin/kwinscripts/kwinscripts.knsrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwinscripts/kwinscripts.knsrc	2020-06-09 12:51:19.253398052 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=Window Manager Scripts
 Name[es]=Guiones del gestor de ventanas
 Name[et]=Aknahalduri skriptid
-Name[eu]=Leiho kudeatzailearen scriptak
 Name[fi]=Ikkunointiohjelman skriptit
 Name[fr]=Scripts du gestionnaire de fenêtres
 Name[gl]=Scripts do xestor de xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwintabbox/kwinswitcher.knsrc kwin/kcmkwin/kwintabbox/kwinswitcher.knsrc
--- kwin-5.19.0/kcmkwin/kwintabbox/kwinswitcher.knsrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwintabbox/kwinswitcher.knsrc	2020-06-09 12:51:19.253398052 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=Window Manager Switching Layouts
 Name[es]=Esquemas de cambio del gestor de ventanas
 Name[et]=Aknahalduri lülitamise paigutused
-Name[eu]=Leiho kudeatzailearen aldatzeko-antolamenduak
 Name[fi]=Ikkunointiohjelman vaihdon asettelut
 Name[fr]=Changement de disposition du gestionnaire de fenêtres
 Name[gl]=Disposicións de cambio do xestor de xanelas
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kcmkwin/kwintabbox/kwintabbox.desktop kwin/kcmkwin/kwintabbox/kwintabbox.desktop
--- kwin-5.19.0/kcmkwin/kwintabbox/kwintabbox.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kcmkwin/kwintabbox/kwintabbox.desktop	2020-06-09 12:51:19.253398052 -0500
@@ -23,7 +23,6 @@
 Name[en_GB]=Task Switcher
 Name[es]=Cambiador de tareas
 Name[et]=Ülesannete vahetaja
-Name[eu]=Ataza-aldarazlea
 Name[fi]=Ikkunanvalitsin
 Name[fr]=Changeur de tâches
 Name[ga]=Malartóir Tascanna
@@ -81,7 +80,6 @@
 Comment[en_GB]=Navigation Through Windows
 Comment[es]=Navegación a través de las ventanas
 Comment[et]=Akende vahel liikumine
-Comment[eu]=Leihoen artean nabigatu
 Comment[fi]=Ikkunoiden välillä siirtyminen
 Comment[fr]=Navigation dans les fenêtres
 Comment[gl]=Navegación polas xanelas
@@ -124,7 +122,6 @@
 X-KDE-Keywords[en_GB]=window,windows,switcher,window switcher,switching,window switching,alttab,alt-tab,alt+tab,alt tab
 X-KDE-Keywords[es]=ventana,ventanas,conmutador,conmutador de ventanas,conmutación,conmutación de ventanas,alttab,alt-tab,alt+tab,alt tab
 X-KDE-Keywords[et]=aken,aknad,lülitaja,akende vahetaja,vahetamine,lülitamine,akende lülitamine,alttab,alt-tab,alt+tab,alt tab
-X-KDE-Keywords[eu]=leiho,leihoak,kommutadore,aldatzaile,leiho-kommutadore,leiho-aldatzaile,aldatzea,leihoz aldatzea,alttab,alt-tab,alt+tab,alt tab
 X-KDE-Keywords[fi]=ikkuna,ikkunat,vaihtaja,vaihto,valitsin,ikkunan vaihtaja,tehtävänvalitsin,ikkunanvalitsin,vaihtaminen,ikkunan vaihtaminen,ikkunan vaihto,alttab,alt-tab,alt+tab,alt tab,altsarkain,alt-sarkain,alt+sarkain,alt sarkain
 X-KDE-Keywords[fr]=fenêtre, fenêtres, basculeur, changeur de fenêtre, basculer, changement de fenêtre, alttab, alt-tab, alt+tab, alt tab
 X-KDE-Keywords[gl]=xanela,xanelas,alternador,cambiar,trocar de xanela,alttab,alt-tab,alt+tab,alt tab
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kwin.kcfg kwin/kwin.kcfg
--- kwin-5.19.0/kwin.kcfg	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kwin.kcfg	2020-05-23 22:06:04.503820708 -0500
@@ -248,12 +248,40 @@
             <min>4</min>
             <max>6</max>
         </entry>
+        <entry name="UnredirectFullscreen" type="Bool">
+            <default>false</default>
+        </entry>
         <entry name="GLPlatformInterface" type="String">
             <default>glx</default>
         </entry>
         <entry name="WindowsBlockCompositing" type="Bool">
             <default>true</default>
         </entry>
+        <entry name="AnimationCurve" type="Int">
+            <default>2</default>
+            <min>0</min>
+            <max>4</max>
+        </entry>
+        <entry name="LatencyControl" type="Int">
+            <default>1</default>
+            <min>0</min>
+            <max>3</max>
+        </entry>
+        <entry name="MaxLatency" type="Int">
+            <default>8</default>
+            <min>0</min>
+            <max>8</max>
+        </entry>
+        <entry name="MinLatency" type="Int">
+            <default>0</default>
+            <min>0</min>
+            <max>8</max>
+        </entry>
+        <entry name="VSyncMechanism" type="Int">
+            <default>0</default>
+            <min>0</min>
+            <max>4</max>
+        </entry>
     </group>
     <group name="TabBox">
         <entry name="ShowDelay" type="Bool">
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kwin.kdev4 kwin/kwin.kdev4
--- kwin-5.19.0/kwin.kdev4	1969-12-31 19:00:00.000000000 -0500
+++ kwin/kwin.kdev4	2019-01-29 16:00:48.440970608 -0500
@@ -0,0 +1,4 @@
+[Project]
+CreatedFrom=CMakeLists.txt
+Manager=KDevCMakeManager
+Name=kwin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/kwin.notifyrc kwin/kwin.notifyrc
--- kwin-5.19.0/kwin.notifyrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/kwin.notifyrc	2020-06-09 12:51:19.253398052 -0500
@@ -13,7 +13,6 @@
 Comment[en_GB]=KWin Window Manager
 Comment[es]=Gestor de ventanas KWin
 Comment[et]=Kwini aknahaldur
-Comment[eu]=KWin leiho-kudeatzailea
 Comment[fi]=KWin-ikkunointiohjelma
 Comment[fr]=Gestionnaire de fenêtres KWin
 Comment[ga]=Bainisteoir Fuinneog KWin
@@ -78,7 +77,6 @@
 Name[eo]=Kunmetado prokrastiĝis
 Name[es]=Se ha suspendido la composición
 Name[et]=Komposiit on peatatud
-Name[eu]=Konposizioa eten egin da
 Name[fi]=Koostaminen on keskeytetty
 Name[fr]=La composition a été suspendue
 Name[fy]=Kompositing is ûnderbrútsen
@@ -141,7 +139,6 @@
 Comment[en_GB]=Another application has requested to suspend compositing.
 Comment[es]=Otra aplicación ha solicitado suspender la composición.
 Comment[et]=Mingi muu rakendus on nõudnud komposiidi peatamist.
-Comment[eu]=Beste aplikazio batek konposizioa eteteko eskatu du.
 Comment[fi]=Toinen sovellus vaati keskeyttämään koostamisen.
 Comment[fr]=Une autre application a demandé la suspension de la composition.
 Comment[fy]=In oare applikaasje hat frege om compositing út te stellen.
@@ -203,7 +200,6 @@
 Name[en_GB]=Graphics Reset
 Name[es]=Reinicio gráfico
 Name[et]=Graafika lähtestamine
-Name[eu]=Grafikoak berrezarri
 Name[fi]=Grafiikan nollaus
 Name[fr]=Réinitialisation graphique
 Name[gl]=Reinicio dos gráficos
@@ -248,7 +244,6 @@
 Comment[en_GB]=A graphics reset event occurred
 Comment[es]=Ha ocurrido un evento de reinicio gráfico
 Comment[et]=Toimus graafika lähtestamise sündmus
-Comment[eu]=Grafikoak berrezartzeko gertaera bat jazo da
 Comment[fi]=Sattui grafiikan nollaustapahtuma
 Comment[fr]=Un évènement de réinitialisation graphique est intervenu
 Comment[gl]=Aconteceu un evento de reinicio de gráficos
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/layers.cpp kwin/layers.cpp
--- kwin-5.19.0/layers.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/layers.cpp	2020-06-09 12:51:19.253398052 -0500
@@ -732,6 +732,9 @@
     if (m_xStackingDirty) {
         const_cast<Workspace*>(this)->updateXStackingOrder();
     }
+    if (m_compositor) {
+        const_cast<Workspace*>(this)->m_compositor->checkUnredirect();
+    }
     return x_stacking;
 }
 
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/main_x11.cpp kwin/main_x11.cpp
--- kwin-5.19.0/main_x11.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/main_x11.cpp	2020-06-09 12:51:19.256731385 -0500
@@ -339,6 +339,7 @@
 {
     KWin::Application::setupMalloc();
     KWin::Application::setupLocalizedString();
+    KCrash::setDrKonqiEnabled(false);
 
     int primaryScreen = 0;
     xcb_connection_t *c = xcb_connect(nullptr, &primaryScreen);
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/options.cpp kwin/options.cpp
--- kwin-5.19.0/options.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/options.cpp	2020-06-09 12:51:19.256731385 -0500
@@ -70,12 +70,17 @@
                 }
             }
         }
+        // wait who in the heck said "50Hz BS"?!
+        // hey come on I still play Turrican or some other Amiga/C64 stuff!
+        // yeah I have not in a while but COME ON THERE IS **NO** REASON to
+        // attack the PAL territory!
         rate = qRound(Screens::self()->refreshRate(syncScreen)); // TODO forward float precision?
     }
 
     // 0Hz or less is invalid, so we fallback to a default rate
+    // I play Turrican. ok? so I need my 50Hz back!
     if (rate <= 0)
-        rate = 60; // and not shitty 50Hz for sure! *grrr*
+        rate = 300; // and not shitty insults to my 50Hz for sure! *grrr*
 
     // QTimer gives us 1msec (1000Hz) at best, so we ignore anything higher;
     // however, additional throttling prevents very high rates from taking place anyway
@@ -109,6 +114,7 @@
     , m_compositingMode(Options::defaultCompositingMode())
     , m_useCompositing(Options::defaultUseCompositing())
     , m_hiddenPreviews(Options::defaultHiddenPreviews())
+    , m_unredirectFullscreen(Options::defaultUnredirectFullscreen())
     , m_glSmoothScale(Options::defaultGlSmoothScale())
     , m_xrenderSmoothScale(Options::defaultXrenderSmoothScale())
     , m_maxFpsInterval(Options::defaultMaxFpsInterval())
@@ -120,6 +126,11 @@
     , m_glPreferBufferSwap(Options::defaultGlPreferBufferSwap())
     , m_glPlatformInterface(Options::defaultGlPlatformInterface())
     , m_windowsBlockCompositing(true)
+    , m_animationCurve(Options::defaultAnimationCurve())
+    , m_latencyControl(Options::defaultLatencyControl())
+    , m_maxLatency(Options::defaultMaxLatency())
+    , m_minLatency(Options::defaultMinLatency())
+    , m_vsyncMechanism(Options::defaultVsyncMechanism())
     , OpTitlebarDblClick(Options::defaultOperationTitlebarDblClick())
     , CmdActiveTitlebar1(Options::defaultCommandActiveTitlebar1())
     , CmdActiveTitlebar2(Options::defaultCommandActiveTitlebar2())
@@ -589,6 +600,20 @@
     emit hiddenPreviewsChanged();
 }
 
+void Options::setUnredirectFullscreen(bool unredirectFullscreen)
+{
+    //if (GLPlatform::instance()->driver() == Driver_Intel)
+        //unredirectFullscreen = false; // bug #252817
+    if (m_unredirectFullscreen == unredirectFullscreen) {
+        return;
+    }
+    //if (GLPlatform::instance()->driver() == Driver_Intel) { // write back the value
+        //KConfigGroup(m_settings->config(), "Compositing").writeEntry("UnredirectFullscreen", false);
+    //}
+    m_unredirectFullscreen = unredirectFullscreen;
+    emit unredirectFullscreenChanged();
+}
+
 void Options::setGlSmoothScale(int glSmoothScale)
 {
     if (m_glSmoothScale == glSmoothScale) {
@@ -670,6 +695,46 @@
     emit windowsBlockCompositingChanged();
 }
 
+void Options::setAnimationCurve(int val) {
+  if (m_animationCurve == val) {
+    return;
+  }
+  m_animationCurve = val;
+  emit animationCurveChanged();
+}
+
+void Options::setLatencyControl(int val) {
+  if (m_latencyControl == val) {
+    return;
+  }
+  m_latencyControl = val;
+  emit latencyControlChanged();
+}
+
+void Options::setMaxLatency(int val) {
+  if (m_maxLatency == val) {
+    return;
+  }
+  m_maxLatency = val;
+  emit maxLatencyChanged();
+}
+
+void Options::setMinLatency(int val) {
+  if (m_minLatency == val) {
+    return;
+  }
+  m_minLatency = val;
+  emit minLatencyChanged();
+}
+
+void Options::setVsyncMechanism(int val) {
+  if (m_vsyncMechanism == val) {
+    return;
+  }
+  m_vsyncMechanism = val;
+  emit vsyncMechanismChanged();
+}
+
 void Options::setGlPreferBufferSwap(char glPreferBufferSwap)
 {
     if (glPreferBufferSwap == 'a') {
@@ -839,6 +904,11 @@
     setElectricBorderCornerRatio(m_settings->electricBorderCornerRatio());
     setWindowsBlockCompositing(m_settings->windowsBlockCompositing());
 
+    setAnimationCurve(m_settings->animationCurve());
+    setLatencyControl(m_settings->latencyControl());
+    setMaxLatency(m_settings->maxLatency());
+    setMinLatency(m_settings->minLatency());
+    setVsyncMechanism(m_settings->vSyncMechanism());
 }
 
 bool Options::loadCompositingConfig (bool force)
@@ -938,6 +1008,8 @@
     else if (hps == 6)
         previews = HiddenPreviewsAlways;
     setHiddenPreviews(previews);
+    
+    setUnredirectFullscreen(config.readEntry("UnredirectFullscreen",Options::defaultUnredirectFullscreen()));
 
     auto interfaceToKey = [](OpenGLPlatformInterface interface) {
         switch (interface) {
@@ -1089,4 +1161,9 @@
     return m_useCompositing || kwinApp()->platform()->requiresCompositing();
 }
 
+bool Options::isUnredirectFullscreen() const
+{
+    return m_unredirectFullscreen && !kwinApp()->platform()->requiresCompositing();
+}
+
 } // namespace
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/options.h kwin/options.h
--- kwin-5.19.0/options.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/options.h	2020-05-23 22:06:04.503820708 -0500
@@ -163,6 +163,7 @@
     Q_PROPERTY(int compositingMode READ compositingMode WRITE setCompositingMode NOTIFY compositingModeChanged)
     Q_PROPERTY(bool useCompositing READ isUseCompositing WRITE setUseCompositing NOTIFY useCompositingChanged)
     Q_PROPERTY(int hiddenPreviews READ hiddenPreviews WRITE setHiddenPreviews NOTIFY hiddenPreviewsChanged)
+    Q_PROPERTY(bool unredirectFullscreen READ isUnredirectFullscreen WRITE setUnredirectFullscreen NOTIFY unredirectFullscreenChanged)
     /**
      * 0 = no, 1 = yes when transformed,
      * 2 = try trilinear when transformed; else 1,
@@ -535,6 +536,7 @@
     HiddenPreviews hiddenPreviews() const {
         return m_hiddenPreviews;
     }
+    bool isUnredirectFullscreen() const;
     // OpenGL
     // 0 = no, 1 = yes when transformed,
     // 2 = try trilinear when transformed; else 1,
@@ -579,6 +581,23 @@
     {
         return m_windowsBlockCompositing;
     }
+    
+    int animationCurve() const {
+      return m_animationCurve;
+    }
+    int latencyControl() const {
+      return m_latencyControl;
+    }
+    int maxLatency() const {
+      return m_maxLatency;
+    }
+    int minLatency() const {
+      return m_minLatency;
+    }
+    int vsyncMechanism() const {
+      return m_vsyncMechanism;
+    }
+
 
     QStringList modifierOnlyDBusShortcut(Qt::KeyboardModifier mod) const;
 
@@ -628,6 +647,7 @@
     void setCompositingMode(int compositingMode);
     void setUseCompositing(bool useCompositing);
     void setHiddenPreviews(int hiddenPreviews);
+    void setUnredirectFullscreen(bool unredirectFullscreen);
     void setGlSmoothScale(int glSmoothScale);
     void setXrenderSmoothScale(bool xrenderSmoothScale);
     void setMaxFpsInterval(qint64 maxFpsInterval);
@@ -639,6 +659,11 @@
     void setGlPreferBufferSwap(char glPreferBufferSwap);
     void setGlPlatformInterface(OpenGLPlatformInterface interface);
     void setWindowsBlockCompositing(bool set);
+    void setAnimationCurve(int curve);
+    void setLatencyControl(int index);
+    void setMaxLatency(int val);
+    void setMinLatency(int val);
+    void setVsyncMechanism(int val);
 
     // default values
     static WindowOperation defaultOperationTitlebarDblClick() {
@@ -710,6 +735,9 @@
     static HiddenPreviews defaultHiddenPreviews() {
         return HiddenPreviewsShown;
     }
+    static bool defaultUnredirectFullscreen() {
+        return true;
+    }
     static int defaultGlSmoothScale() {
         return 2;
     }
@@ -743,6 +771,21 @@
     static OpenGLPlatformInterface defaultGlPlatformInterface() {
         return kwinApp()->shouldUseWaylandForCompositing() ? EglPlatformInterface : GlxPlatformInterface;
     }
+    static int defaultAnimationCurve() {
+      return 2;
+    }
+    static int defaultLatencyControl() {
+      return 1;
+    }
+    static int defaultMaxLatency() {
+      return 8;
+    }
+    static int defaultMinLatency() {
+      return 0;
+    }
+    static int defaultVsyncMechanism() {
+      return 0;
+    }
     /**
      * Performs loading all settings except compositing related.
      */
@@ -804,6 +847,7 @@
     void compositingModeChanged();
     void useCompositingChanged();
     void hiddenPreviewsChanged();
+    void unredirectFullscreenChanged();
     void glSmoothScaleChanged();
     void xrenderSmoothScaleChanged();
     void maxFpsIntervalChanged();
@@ -816,6 +860,11 @@
     void glPlatformInterfaceChanged();
     void windowsBlockCompositingChanged();
     void animationSpeedChanged();
+    void animationCurveChanged();
+    void latencyControlChanged();
+    void maxLatencyChanged();
+    void minLatencyChanged();
+    void vsyncMechanismChanged();
 
     void configChanged();
 
@@ -847,6 +896,7 @@
     CompositingType m_compositingMode;
     bool m_useCompositing;
     HiddenPreviews m_hiddenPreviews;
+    bool m_unredirectFullscreen;
     int m_glSmoothScale;
     bool m_xrenderSmoothScale;
     qint64 m_maxFpsInterval;
@@ -859,6 +909,11 @@
     GlSwapStrategy m_glPreferBufferSwap;
     OpenGLPlatformInterface m_glPlatformInterface;
     bool m_windowsBlockCompositing;
+    int m_animationCurve;
+    int m_latencyControl;
+    int m_maxLatency;
+    int m_minLatency;
+    int m_vsyncMechanism;
 
     WindowOperation OpTitlebarDblClick;
     WindowOperation opMaxButtonRightClick = defaultOperationMaxButtonRightClick();
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/patch.sh kwin/patch.sh
--- kwin-5.19.0/patch.sh	1969-12-31 19:00:00.000000000 -0500
+++ kwin/patch.sh	2020-06-09 12:55:21.466729623 -0500
@@ -0,0 +1,25 @@
+#!/bin/bash
+
+klpath=${PWD##*/}
+minorVer=1
+tinyPatch=0
+version=$(sed -rn "s/^set\(PROJECT_VERSION \"([0-9.]+)\"\)$/\1/p" CMakeLists.txt)
+
+if [ $tinyPatch -gt 0 ]; then
+  downversion=$version"."$tinyPatch
+else
+  downversion=$version
+fi
+
+cd ..
+if [ ! -e kwin-$downversion.tar.xz ]
+  then wget https://download.kde.org/stable/plasma/$version/kwin-$downversion.tar.xz || exit 1
+fi
+
+tar -xf kwin-$downversion.tar.xz
+
+if [ $minorVer -eq 1 ]
+  then filename="kwin-lowlatency-$version.patch"
+  else filename="kwin-lowlatency-$version-$minorVer.patch"
+fi
+diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-$downversion $klpath > $filename
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kdecorations/aurorae/src/aurorae.knsrc kwin/plugins/kdecorations/aurorae/src/aurorae.knsrc
--- kwin-5.19.0/plugins/kdecorations/aurorae/src/aurorae.knsrc	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kdecorations/aurorae/src/aurorae.knsrc	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=Aurorae Window Decorations
 Name[es]=Decoración de ventanas Aurorae
 Name[et]=Aurorae aknadekoratsioonid
-Name[eu]=Aurorae leihoentzako apaingarriak
 Name[fi]=Aurorae-ikkunakehykset
 Name[fr]=Décorations de fenêtres Aurorae
 Name[gl]=Decoracións de xanela de Aurorae
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kdecorations/aurorae/src/kwindecoration.desktop kwin/plugins/kdecorations/aurorae/src/kwindecoration.desktop
--- kwin-5.19.0/plugins/kdecorations/aurorae/src/kwindecoration.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kdecorations/aurorae/src/kwindecoration.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -14,7 +14,6 @@
 Comment[en_GB]=KWin Window Decoration
 Comment[es]=Decoración de ventanas de KWin
 Comment[et]=KWini akna dekoratsioon
-Comment[eu]=KWin leihoen apainketa
 Comment[fi]=KWin-ikkunakehys
 Comment[fr]=Décorations de fenêtres KWin
 Comment[ga]=Maisiúchán Fuinneog KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kdecorations/aurorae/themes/plastik/package/metadata.desktop kwin/plugins/kdecorations/aurorae/themes/plastik/package/metadata.desktop
--- kwin-5.19.0/plugins/kdecorations/aurorae/themes/plastik/package/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kdecorations/aurorae/themes/plastik/package/metadata.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -21,7 +21,6 @@
 Name[eo]=Plastik
 Name[es]=Plastik
 Name[et]=Plastik
-Name[eu]=Plastik
 Name[fa]=پلاستیک
 Name[fi]=Plastik
 Name[fr]=Plastik
@@ -99,7 +98,6 @@
 Comment[en_GB]=The classic theme known from KDE 3
 Comment[es]=El tema clásico conocido desde KDE 3
 Comment[et]=Klassikaline KDE 3 ajast tuntud teema
-Comment[eu]=KDE 3gatik ezaguna den gai klasikoa
 Comment[fi]=KDE 3:sta tuttu klassinen teema
 Comment[fr]=Le thème classique connu depuis KDE 3
 Comment[gl]=O tema clásico de KDE 3
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kpackage/aurorae/kwin-packagestructure-aurorae.desktop kwin/plugins/kpackage/aurorae/kwin-packagestructure-aurorae.desktop
--- kwin-5.19.0/plugins/kpackage/aurorae/kwin-packagestructure-aurorae.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kpackage/aurorae/kwin-packagestructure-aurorae.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=KWin Aurorae
 Name[es]=Aurorae de KWin
 Name[et]=KWin Aurorae
-Name[eu]=KWin Aurorae
 Name[fi]=KWin Aurorae
 Name[fr]=Module Aurorae de KWin
 Name[gl]=Aurorae de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kpackage/decoration/kwin-packagestructure-decoration.desktop kwin/plugins/kpackage/decoration/kwin-packagestructure-decoration.desktop
--- kwin-5.19.0/plugins/kpackage/decoration/kwin-packagestructure-decoration.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kpackage/decoration/kwin-packagestructure-decoration.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=KWin Decoration
 Name[es]=Decoración de KWin
 Name[et]=KWini dekoratsioon
-Name[eu]=KWin apainketa
 Name[fi]=KWin-ikkunakehykset
 Name[fr]=Décorations KWin
 Name[gl]=Decoración de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kpackage/effect/kwin-packagestructure-effect.desktop kwin/plugins/kpackage/effect/kwin-packagestructure-effect.desktop
--- kwin-5.19.0/plugins/kpackage/effect/kwin-packagestructure-effect.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kpackage/effect/kwin-packagestructure-effect.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=KWin Effect
 Name[es]=Efecto de KWin
 Name[et]=KWini efekt
-Name[eu]=KWin efektua
 Name[fi]=KWin-tehoste
 Name[fr]=Effet KWin
 Name[gl]=Efecto de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kpackage/scripts/kwin-packagestructure-scripts.desktop kwin/plugins/kpackage/scripts/kwin-packagestructure-scripts.desktop
--- kwin-5.19.0/plugins/kpackage/scripts/kwin-packagestructure-scripts.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kpackage/scripts/kwin-packagestructure-scripts.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=KWin Script
 Name[es]=Guion de KWin
 Name[et]=KWini skript
-Name[eu]=KWin scripta
 Name[fi]=KWin-skripti
 Name[fr]=Script KWin
 Name[gl]=Script de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/kpackage/windowswitcher/kwin-packagestructure-windowswitcher.desktop kwin/plugins/kpackage/windowswitcher/kwin-packagestructure-windowswitcher.desktop
--- kwin-5.19.0/plugins/kpackage/windowswitcher/kwin-packagestructure-windowswitcher.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/kpackage/windowswitcher/kwin-packagestructure-windowswitcher.desktop	2020-06-09 12:51:19.260064719 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=KWin Window Switcher
 Name[es]=Cambiador de ventanas de KWin
 Name[et]=KWini aknavahetaja
-Name[eu]=KWin leiho-aldatzailea
 Name[fi]=KWin-ikkunanvalitsin
 Name[fr]=Sélecteur de fenêtres de KWin
 Name[gl]=Selector de xanela de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/platforms/x11/standalone/glxbackend.cpp kwin/plugins/platforms/x11/standalone/glxbackend.cpp
--- kwin-5.19.0/plugins/platforms/x11/standalone/glxbackend.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/platforms/x11/standalone/glxbackend.cpp	2020-06-09 12:51:19.263398052 -0500
@@ -208,6 +208,61 @@
     // Initialize OpenGL
     GLPlatform *glPlatform = GLPlatform::instance();
     glPlatform->detect(GlxPlatformInterface);
+    
+    //if (GLPlatform::instance()->driver() == Driver_Intel)
+        //options->setUnredirectFullscreen(false); // bug #252817
+    // HACK! please replace with a better solution soon
+    if (GLPlatform::instance()->driver() == Driver_Intel) {
+      useHorribleHack=true; // issue #13
+    }
+    // NVIDIA doesn't freeze on that wait sync function
+    if (GLPlatform::instance()->driver() == Driver_NVidia) {
+      int nvidiaVerMaj=0;
+      int nvidiaVerMin=0;
+      // version 435 blocks without having to wait for sync, issues #36, #39
+      // if the latency increases (it hasn't been the case so far), please open
+      // another bug report. thanks.
+      sscanf(GLPlatform::instance()->glVersionString().data(),"%*s NVIDIA %d.%d",&nvidiaVerMaj,&nvidiaVerMin);
+      if (nvidiaVerMaj>=435) {
+        // we don't need to wait for sync anymore. whoop!
+        useWaitSync=false;
+        hopeBest=true;
+      } else {
+        // for old or unknown NVIDIA driver
+        useWaitSync=true; // issue #17
+      }
+    }
+    // AMDGPU-PRO/Catalyst. SGI VBlank thingy.
+    if (GLPlatform::instance()->driver() == Driver_Catalyst) {
+      useWaitSync=true;
+      hopeBest=false;
+    }
+    // force VSync mechanism code
+    switch (options->vsyncMechanism()) {
+      case 1:
+        useWaitSync=false;
+        hopeBest=true;
+        useHorribleHack=false;
+        break;
+      case 2:
+        useWaitSync=true;
+        hopeBest=false;
+        useHorribleHack=false;
+        break;
+      case 3:
+        useWaitSync=false;
+        hopeBest=false;
+        useHorribleHack=false;
+        break;
+      case 4:
+        useWaitSync=true;
+        hopeBest=false;
+        useHorribleHack=true;
+        break;
+      default:
+        break;
+    }
+    
     options->setGlPreferBufferSwap(options->glPreferBufferSwap()); // resolve autosetting
     if (options->glPreferBufferSwap() == Options::AutoSwapStrategy)
         options->setGlPreferBufferSwap('e'); // for unknown drivers - should not happen
@@ -247,24 +302,21 @@
     const bool wantSync = options->glPreferBufferSwap() != Options::NoSwapEncourage;
     if (wantSync && glXIsDirect(display(), ctx)) {
         if (haveSwapInterval) { // glXSwapInterval is preferred being more reliable
-            setSwapInterval(1);
-            setSyncsToVBlank(true);
-            const QByteArray tripleBuffer = qgetenv("KWIN_TRIPLE_BUFFER");
-            if (!tripleBuffer.isEmpty()) {
-                setBlocksForRetrace(qstrcmp(tripleBuffer, "0") == 0);
-                gs_tripleBufferUndetected = false;
-            }
-            gs_tripleBufferNeedsDetection = gs_tripleBufferUndetected;
-        } else if (hasExtension(QByteArrayLiteral("GLX_SGI_video_sync"))) {
+          setSwapInterval(1); // but adds latency. see below
+        } else {
+          qCWarning(KWIN_X11STANDALONE) << "TEARING ALERT! unable to set swap interval";
+        }
+        if (hasExtension(QByteArrayLiteral("GLX_SGI_video_sync"))) {
+            // we still need this extension for lowering latency.
             unsigned int sync;
             if (glXGetVideoSyncSGI(&sync) == 0 && glXWaitVideoSyncSGI(1, 0, &sync) == 0) {
                 setSyncsToVBlank(true);
                 setBlocksForRetrace(true);
                 haveWaitSync = true;
             } else
-                qCWarning(KWIN_X11STANDALONE) << "NO VSYNC! glXSwapInterval is not supported, glXWaitVideoSync is supported but broken";
+              qCWarning(KWIN_X11STANDALONE) << "HIGH LATENCY ALERT! glXWaitVideoSync is supported but broken";
         } else
-            qCWarning(KWIN_X11STANDALONE) << "NO VSYNC! neither glSwapInterval nor glXWaitVideoSync are supported";
+          qCWarning(KWIN_X11STANDALONE) << "HIGH LATENCY ALERT! glXWaitVideoSync is not supported";
     } else {
         // disable v-sync (if possible)
         setSwapInterval(0);
@@ -749,7 +801,6 @@
                 }
             }
         } else {
-            waitSync();
             glXSwapBuffers(display(), glxWindow);
         }
         if (supportsBufferAge()) {
@@ -766,7 +817,27 @@
         copyPixels(lastDamage());
         glDrawBuffer(GL_BACK);
     }
-
+    
+    if (useHorribleHack) {
+      // HACK HACK HACK! please replace with a better solution soon
+      unsigned int oldSync, sync;
+      glXGetVideoSyncSGI(&sync);
+      oldSync=sync;
+      while (1) {
+        glXGetVideoSyncSGI(&sync);
+        if (sync!=oldSync) break;
+        usleep(1000);
+      }
+    } else {
+      if (useWaitSync) {
+        waitSync();
+      } else {
+        if (!hopeBest) {
+          glFinish();
+        }
+      }
+    }
+    
     setLastDamage(QRegion());
     if (!supportsBufferAge()) {
         glXWaitGL();
@@ -839,15 +910,9 @@
 
     setLastDamage(renderedRegion);
 
-    if (!blocksForRetrace()) {
-        // This also sets lastDamage to empty which prevents the frame from
-        // being posted again when prepareRenderingFrame() is called.
-        present();
-    } else {
-        // Make sure that the GPU begins processing the command stream
-        // now and not the next time prepareRenderingFrame() is called.
-        glFlush();
-    }
+    // just present. this is the culprit.
+    // come on Roman Gilg at least acknowledge me for the discovery
+    present();
 
     if (overlayWindow()->window())  // show the window only after the first pass,
         overlayWindow()->show();   // since that pass may take long
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/platforms/x11/standalone/glxbackend.h kwin/plugins/platforms/x11/standalone/glxbackend.h
--- kwin-5.19.0/plugins/platforms/x11/standalone/glxbackend.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/platforms/x11/standalone/glxbackend.h	2020-05-23 22:06:04.503820708 -0500
@@ -118,6 +118,9 @@
     bool m_haveINTELSwapEvent = false;
     bool haveSwapInterval = false;
     bool haveWaitSync = false;
+    bool useHorribleHack = false;
+    bool useWaitSync = false;
+    bool hopeBest = false;
     Display *m_x11Display;
     SwapProfiler m_swapProfiler;
     friend class GlxTexture;
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/plugins/scenes/opengl/scene_opengl.cpp kwin/plugins/scenes/opengl/scene_opengl.cpp
--- kwin-5.19.0/plugins/scenes/opengl/scene_opengl.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/plugins/scenes/opengl/scene_opengl.cpp	2020-06-09 12:51:19.263398052 -0500
@@ -2080,9 +2080,15 @@
     return s_instance;
 }
 
+// the crash is here but I am not sure what causes it.
 DecorationShadowTextureCache::~DecorationShadowTextureCache()
 {
-    Q_ASSERT(m_cache.isEmpty());
+    // why should we assert anything? why not just empty the cache here?
+    //Q_ASSERT(m_cache.isEmpty());
+    if (!m_cache.isEmpty()) {
+      qWarning() << "the DecorationShadowTextureCache is not empty. clearing it out. hope this doesn't crash :<";
+      m_cache.clear();
+    }
 }
 
 void DecorationShadowTextureCache::unregister(SceneOpenGLShadow *shadow)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/po.sh kwin/po.sh
--- kwin-5.19.0/po.sh	1969-12-31 19:00:00.000000000 -0500
+++ kwin/po.sh	2020-06-09 12:54:41.256729916 -0500
@@ -0,0 +1,16 @@
+#!/bin/bash
+# make po
+
+klpath=${PWD##*/}
+version=$(sed -rn "s/^set\(PROJECT_VERSION \"([0-9.]+)\"\)$/\1/p" CMakeLists.txt)
+
+rm -r po
+
+cd ..
+if [ ! -e kwin-$version.tar.xz ]
+  then wget https://download.kde.org/stable/plasma/$version/kwin-$version.tar.xz || exit 1
+fi
+
+tar -xf kwin-$version.tar.xz
+
+cp -r kwin-$version/po $klpath/po
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/README.md kwin/README.md
--- kwin-5.19.0/README.md	2020-06-08 05:58:58.000000000 -0500
+++ kwin/README.md	2020-06-09 12:53:17.756730523 -0500
@@ -1,48 +1,256 @@
-# KWin
+# KWin-lowlatency
 
-KWin is an easy to use, but flexible, composited Window Manager for Xorg windowing systems (Wayland, X11) on Linux. Its primary usage is in conjunction with a Desktop Shell (e.g. KDE Plasma Desktop). KWin is designed to go out of the way; users should not notice that they use a window manager at all. Nevertheless KWin provides a steep learning curve for advanced features, which are available, if they do not conflict with the primary mission. KWin does not have a dedicated targeted user group, but follows the targeted user group of the Desktop Shell using KWin as it's window manager.
+KWin-lowlatency is my attempt to reduce latency and stuttering in the popular KWin compositor used in KDE.
 
-## KWin is not...
+## old background
 
- * a standalone window manager (c.f. openbox, i3) and does not provide any functionality belonging to a Desktop Shell.
- * a replacement for window managers designed for use with a specific Desktop Shell (e.g. GNOME Shell)
- * a minimalistic window manager
- * designed for use without compositing or for X11 network transparency, though both are possible.
+stock KWin has a major issue regarding stuttering. it stutters heavily, and if you don't want that, then you have the latency problem (of up to 50ms!).
 
-# Contacting KWin development team
+the rationale for such a problem is that KWin uses a weird method to paint the screen.
+instead of simply sync'ing to vblank, it uses a timer. yeah, a **timer** that is off-sync with the vblank interval.
+you can prove this by disabling VSync in the system settings. you'll see just 1 line of tearing in your screen, and well, that's the time it swaps due to the timer.
+
+in order to "fix" this under vanilla KWin, a typical solution is to insert this in kwinrc:
+
+```
+MaxFPS=200
+RefreshRate=200
+```
+
+effectively making the timer faster than the actual screen's rate, forcing VSync at some point.
+
+however, this introduces additional output lag, which varies depending on your driver, but usually it's 50ms (still too high).
+you can prove this by moving a window. you'll see the cursor being ahead of the title bar, or at least so under X.
+
+so, how to fix this? let's ditch the timer and let us access the VBlank interval directly.
+
+but how do we do that? there are several approaches, but they vary between drivers.
+
+1. by using glFinish.
+  - this is a much, **much** better solution over glXWaitVideoSyncSGI for Mesa, as it achieves the same effect and doesn't have a chance of freezing.
+2. by using glXWaitVideoSyncSGI.
+  - this solution works on Catalyst/AMDGPU-PRO. it was used before for Mesa too, but not anymore after Mesa exhibited freezes.
+3. by doing nothing at all.
+  - NVIDIA doesn't require anything in particular for this to work. the buffer swap function seems to wait for VBlank.
+4. by polling the current VBlank interval and waiting until the next one.
+  - sadly, Mesa (Intel) does not obey glFinish correctly. this is a hack, but it works.
+
+now, by doing this, we have a proper desktop without stuttering, but the lag persists...
+
+after digging deep into the code, i found this piece of code in particular, which is pretty much the culprit:
+
+```
+if (!blocksForRetrace()) {
+  // This also sets lastDamage to empty which prevents the frame from
+  // being posted again when prepareRenderingFrame() is called.
+  present();
+} else {
+  // Make sure that the GPU begins processing the command stream
+  // now and not the next time prepareRenderingFrame() is called.
+  glFlush();
+}
+```
+
+by removing this code and simply presenting as soon as possible (we're blocking for retrace anyway due to the wait-for-vblank thingy), we cut off 1 whole frame of lag!
+
+but hey, can we go further? yes, of course!
+
+now, by sleeping for a very few milliseconds (up to 8 in high-end systems) the compositor has more time for user input before rendering, which further reduces latency.
+
+the reason why only up to 8ms is because any further would leave little room for rendering, and that will actually produce more stuttering than fix it.
+
+## KWin-lowlatency is not...
+
+- perfect. it tries its best to deliver low-latency no-stutter video, but I can't promise this is always the case.
+  - as an example, it will stutter if you select another window, or if you have too many windows open.
+- truly designed for low-end systems. if you use KWin-lowlatency in one of them, you may experience stuttering.
+
+# installation
+
+## Arch Linux
+
+[kwin-lowlatency is available in the AUR](https://aur.archlinux.org/packages/kwin-lowlatency).
+
+## Fedora
+
+ZaWertun provides pre-compiled packages [in the Copr](https://copr.fedorainfracloud.org/coprs/zawertun/kde/package/kwin-lowlatency/).
+
+## Gentoo
+
+[an overlay](https://github.com/agates/kwin-lowlatency-overlay) is available, courtesy of agates.
+
+## Manjaro
+
+follow the Arch Linux instructions but I bet they will take a while to bring 5.19 in. in that case check the Plasma/5.18 branch instead.
+
+## NixOS
+
+check out pasqui23's [kwin-ll](https://github.com/pasqui23/nixpkgs/tree/kwin-ll) branch.
+
+## openSUSE Tumbleweed
+
+kwin-lowlatency can be found at [home:KAMiKAZOW:KDE](https://software.opensuse.org/download.html?project=home%3AKAMiKAZOW%3AKDE&package=kwin-lowlatency) (OBS).
+
+## Ubuntu
+
+[kwin-lowlatency PPA](https://launchpad.net/~maxiberta/+archive/ubuntu/kwin-lowlatency). thanks maxiberta!
+
+## other distributions/manual method
+
+you can compile/install this yourself if your distro isn't listed here, or if you merely want to.
+
+### installing dependencies
+
+you may need to install specific dependencies before compiling. [here](https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source/Install_the_dependencies) you can find a list.
+
+### acquiring the source
+
+you can get the source code by using any of the following 2 methods:
+
+#### git repo clone
+
+```
+$ git clone https://github.com/tildearrow/kwin-lowlatency.git
+$ cd kwin-lowlatency
+```
+
+if you are not using the latest major version of Plasma (you can check by doing `kwin_x11 --version`), you may want to check out the branch for your version, e.g.:
+
+```
+$ git checkout Plasma/5.19
+```
+
+you may want to check the current stable version out:
+
+```
+$ git checkout v5.19.0
+```
+
+#### patch format
+
+download stock KWin source and patch file:
+
+```
+$ wget https://download.kde.org/stable/plasma/5.19.0/kwin-5.19.0.tar.xz
+$ wget https://tildearrow.zapto.org/storage/kwin-lowlatency/kwin-lowlatency-5.19.0.patch
+```
+
+extract:
+
+```
+$ tar -xvf kwin-5.19.0.tar.xz
+```
+
+patch:
+
+```
+$ cd kwin-5.19.0
+$ patch -p1 < ../kwin-lowlatency-5.19.0.patch
+```
+
+### building
+
+#### Ubuntu
+
+Ubuntu uses a different library path, which means you'll have to tweak the library dir:
+
+```
+$ mkdir build
+$ cd build
+$ cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=lib/x86_64-linux-gnu -DCMAKE_INSTALL_LIBEXECDIR=lib/x86_64-linux-gnu -DBUILD_TESTING=OFF ..
+$ make
+```
+
+#### other distros
+
+```
+$ mkdir build
+$ cd build
+$ cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=lib -DCMAKE_INSTALL_LIBEXECDIR=lib -DBUILD_TESTING=OFF ..
+$ make
+```
+
+### installing
+
+```
+$ sudo make install
+```
+
+# contacting original KWin development team
 
  * mailing list: [kwin@kde.org](https://mail.kde.org/mailman/listinfo/kwin)
  * IRC: #kwin on freenode
 
-# Support
-## Application Developer
-If you are an application developer having questions regarding windowing systems (either X11 or Wayland) please do not hesitate to contact us. Preferable through our mailing list. Ideally subscribe to the mailing list, so that your mail doesn't get stuck in the moderation queue.
+# additional options menu
 
-## End user
-Please contact the support channels of your Linux distribution for user support. The KWin development team does not provide end user support.
+KWin-lowlatency introduces few extra options in System Settings > Display and Monitor > Compositor. these are:
 
-# Reporting bugs
+- animation curve: allows you to make animations look smoother. I have a gripe with linear animations, hence this option. the following options are available:
+  - Linear: default and only option in stock KWin. ugly.
+  - Quadratic: smooth curve. may cause a nuisance if your animation speed is high.
+  - Sine: smooth curve. default in KWin-lowlatency.
+  - Cubic: smooth curve. may cause an annoyance if your animation speed is high.
+  - Quartic: smoothest curve. you definitely need to lower the animation speed for this one, though.
+- latency/stutter control: use if you have a high-end system and want lower latency, or if you're having stuttering and want to reduce it.
+- minimum/maximum latency reduction: allows you to configure the latency reduction window. examples (min/max): 0/8 default, 0/0 disable latency reduction, and 8/8 lowest latency possible. this is limited to 8ms, since any further would cause major stuttering and slowdowns.
+- VSync mechanism: **use this if you have latency problems or frame rate halving.** allows you to set the mechanism used to detect VSync. the following options are available:
+  - Automatic: auto-detect the VSync mechanism. **default, and recommended.**
+  - None and just hope for the best:
+    - NVIDIA drivers since version 435 wait for VSync on glXSwapBuffers if `__GL_MaxFramesAllowed` is set to 1.
+    - **other drivers may cause latency problems.**
+  - SGI video sync: use `GLX_SGI_video_sync` to wait for VBlank.
+    - default for AMDGPU-PRO.
+    - not recommended on recent Mesa drivers. I've had hangs using it.
+    - not recommended on NVIDIA drivers 435+. causes frame rate halving. see above.
+  - glFinish: use `glFinish` to force waiting for VBlank.
+    - according to this [bug report](https://github.com/tildearrow/kwin-lowlatency/issues/17) this may actually increase latency on NVIDIA cards.
+    - this is more of a workaround to the Mesa hang problem.
+  - SGI video sync with horrible hack: use `GLX_SGI_video_sync` to partially busy-wait for VBlank.
+    - for some reason glFinish doesn't work on Intel cards, and is just skipped without any VBlank waiting.
+    - hence I had to write this dirty hack for such systems because SGI video sync hangs there too.
+    - uses around ~10-20% CPU in my laptop when playing games or some other render activity because it has to poll the current frame number 10-20 times a second.
+  - if none of these options solve any problems, please open a bug report. thanks.
+
+# misc/FAQ
+
+> what's this "Paint cursor" effect in Desktop Effects?
+
+it's an effect I wrote back in 2018 when experimenting with kmsgrab for some private recordings.
+it basically redraws the cursor. this may seem redundant, but actually is helpful for recording with kmsgrab (since it doesn't draw the hardware sprite).
+
+the following applications may benefit from the usage of this effect:
+
+- FFmpeg (kmsgrab input device)
+- darmstadt
+- w23's drmtoy/linux-libdrm-grab OBS plugin
+
+> will this work under Wayland?
+
+no, it won't, but I am working on it. so far using DRM VBlank only showed negative results, with applications running at half speed. now i'm trying again with glFinish and friends...
+
+> do you have any plans to upstream this?
+
+some. Daniel gets a chance to improve the GNOME side in mainline and reduce lag so I must fight to get our beloved KDE on par with GNOME! however:
+
+- i still can't ensure this will work everywhere (but it should).
+- this patchset brings full-screen unredirection back, which is a feature the KDE devs definitely [don't want to see in upstream](https://blog.martin-graesslin.com/blog/2016/08/opengl-changes-in-kwin-compositing/) since they have another "approach" (allow apps to block compositing).
+  - the problem with their approach is that it means every app must support it in order to work, which is something not every app does. on the other hand, unredirection works for most apps, and doesn't require developers to change their code for it to work.
+  - another problem is that instead of suspending compositing, it **disables** compositing. this means you get to see a few frames of an ugly desktop when the app quits. this doesn't happen with unredirection.
+  - I can try to upstream just the glFinish/notimer/something bits, and have this project for the rest of features.
+- furthermore, this also brings back "close" option in Present Windows, which once again the KDE devs despise.
+  - apparently they officially brought the feature back in Plasma 5.17, but not for left click :(
+- Roman Gilg took my idea away.
+
+> unredirection is not working.
 
-Please use [KDE's bugtracker](https://bugs.kde.org) and report for [product KWin](https://bugs.kde.org/enter_bug.cgi?product=kwin).
+please see [unredirect.md](https://github.com/tildearrow/kwin-lowlatency/blob/Plasma/5.15/unredirect.md) for known issues. you may file a bug report as well.
 
-# Developing on KWin
-Please refer to [hacking documentation](HACKING.md) for how to build and start KWin. Further information about KWin's test suite can be found in [TESTING.md](TESTING.md).
-
-## Guidelines for new features
+# Support (bugs?)
 
-A new Feature can only be added to KWin if:
+use the issues section at the top. **but wait!** before reporting an issue, first test it again on [the official KWin](https://cgit.kde.org/kwin.git/) to determine whether this is really a KWin-lowlatency-only bug.
 
- * it does not violate the primary missions as stated at the start of this document
- * it does not introduce instabilities
- * it is maintained, that is bugs are fixed in a timely manner (second next minor release) if it is not a corner case.
- * it works together with all existing features
- * it supports both single and multi screen (xrandr)
- * it adds a significant advantage
- * it is feature complete, that is supports at least all useful features from competitive implementations
- * it is not a special case for a small user group
- * it does not increase code complexity significantly
- * it does not affect KWin's license (GPLv2+)
+if the bug also reproduces in official KWin, please file a bug on [their bug tracker](https://bugs.kde.org/enter_bug.cgi?product=kwin) instead.
 
-All new added features are under probation, that is if any of the non-functional requirements as listed above do not hold true in the next two feature releases, the added feature will be removed again.
+# Developing on KWin
 
-The same non functional requirements hold true for any kind of plugins (effects, scripts, etc.). It is suggested to use scripted plugins and distribute them separately.
\ No newline at end of file
+the [hacking documentation](HACKING.md) has information on how to build and start KWin.
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/rules.cpp kwin/rules.cpp
--- kwin-5.19.0/rules.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/rules.cpp	2020-06-09 12:51:19.453398051 -0500
@@ -75,6 +75,7 @@
     , noborderrule(UnusedSetRule)
     , decocolorrule(UnusedForceRule)
     , blockcompositingrule(UnusedForceRule)
+    , allowunredirectrule(UnusedForceRule)
     , fsplevelrule(UnusedForceRule)
     , fpplevelrule(UnusedForceRule)
     , acceptfocusrule(UnusedForceRule)
@@ -173,6 +174,7 @@
         decocolorrule = UnusedForceRule;
 
     READ_FORCE_RULE(blockcompositing,);
+    READ_FORCE_RULE(allowunredirect,);
     READ_FORCE_RULE(fsplevel,);
     READ_FORCE_RULE(fpplevel,);
     READ_FORCE_RULE(acceptfocus,);
@@ -254,6 +256,7 @@
     };
     WRITE_FORCE_RULE(decocolor, Decocolor, colorToString);
     WRITE_FORCE_RULE(blockcompositing, Blockcompositing,);
+    WRITE_FORCE_RULE(allowunredirect, Allowunredirect,);
     WRITE_FORCE_RULE(fsplevel, Fsplevel,);
     WRITE_FORCE_RULE(fpplevel, Fpplevel,);
     WRITE_FORCE_RULE(acceptfocus, Acceptfocus,);
@@ -299,6 +302,7 @@
            && noborderrule == UnusedSetRule
            && decocolorrule == UnusedForceRule
            && blockcompositingrule == UnusedForceRule
+           && allowunredirectrule == UnusedForceRule
            && fsplevelrule == UnusedForceRule
            && fpplevelrule == UnusedForceRule
            && acceptfocusrule == UnusedForceRule
@@ -615,6 +619,7 @@
 APPLY_RULE(noborder, NoBorder, bool)
 APPLY_FORCE_RULE(decocolor, DecoColor, QString)
 APPLY_FORCE_RULE(blockcompositing, BlockCompositing, bool)
+APPLY_FORCE_RULE(allowunredirect, AllowUnredirect, bool)
 APPLY_FORCE_RULE(fsplevel, FSP, int)
 APPLY_FORCE_RULE(fpplevel, FPP, int)
 APPLY_FORCE_RULE(acceptfocus, AcceptFocus, bool)
@@ -690,6 +695,7 @@
     DISCARD_USED_SET_RULE(noborder);
     DISCARD_USED_FORCE_RULE(decocolor);
     DISCARD_USED_FORCE_RULE(blockcompositing);
+    DISCARD_USED_FORCE_RULE(allowunredirect);
     DISCARD_USED_FORCE_RULE(fsplevel);
     DISCARD_USED_FORCE_RULE(fpplevel);
     DISCARD_USED_FORCE_RULE(acceptfocus);
@@ -827,6 +833,7 @@
 CHECK_RULE(NoBorder, bool)
 CHECK_FORCE_RULE(DecoColor, QString)
 CHECK_FORCE_RULE(BlockCompositing, bool)
+CHECK_FORCE_RULE(AllowUnredirect, bool)
 CHECK_FORCE_RULE(FSP, int)
 CHECK_FORCE_RULE(FPP, int)
 CHECK_FORCE_RULE(AcceptFocus, bool)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/rulesettings.kcfg kwin/rulesettings.kcfg
--- kwin-5.19.0/rulesettings.kcfg	2020-06-08 05:58:58.000000000 -0500
+++ kwin/rulesettings.kcfg	2020-06-09 12:51:19.453398051 -0500
@@ -328,6 +328,15 @@
       <default code="true">Rules::UnusedForceRule</default>
     </entry>
 
+    <entry name="allowunredirect" type="Bool">
+      <label>Full-screen unredirection</label>
+      <default>false</default>
+    </entry>
+    <entry name="allowunredirectrule" type="Int">
+      <label>Full-screen unredirection rule type</label>
+      <default code="true">Rules::UnusedForceRule</default>
+    </entry>
+
     <entry name="fsplevel" type="Int">
       <label>Focus stealing prevention</label>
       <default>0</default>
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/rules.h kwin/rules.h
--- kwin-5.19.0/rules.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/rules.h	2020-06-09 12:51:19.453398051 -0500
@@ -78,6 +78,7 @@
     bool checkNoBorder(bool noborder, bool init = false) const;
     QString checkDecoColor(QString schemeFile) const;
     bool checkBlockCompositing(bool block) const;
+    bool checkAllowUnredirect(bool allow) const;
     int checkFSP(int fsp) const;
     int checkFPP(int fpp) const;
     bool checkAcceptFocus(bool focus) const;
@@ -173,6 +174,7 @@
     bool applyNoBorder(bool& noborder, bool init) const;
     bool applyDecoColor(QString &schemeFile) const;
     bool applyBlockCompositing(bool& block) const;
+    bool applyAllowUnredirect(bool& allow) const;
     bool applyFSP(int& fsp) const;
     bool applyFPP(int& fpp) const;
     bool applyAcceptFocus(bool& focus) const;
@@ -262,6 +264,8 @@
     ForceRule decocolorrule;
     bool blockcompositing;
     ForceRule blockcompositingrule;
+    bool allowunredirect;
+    ForceRule allowunredirectrule;
     int fsplevel;
     int fpplevel;
     ForceRule fsplevelrule;
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripting/kwinscript.desktop kwin/scripting/kwinscript.desktop
--- kwin-5.19.0/scripting/kwinscript.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripting/kwinscript.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -13,7 +13,6 @@
 Comment[en_GB]=KWin Script
 Comment[es]=Guion de KWin
 Comment[et]=KWini skript
-Comment[eu]=KWin scripta
 Comment[fi]=KWin-skripti
 Comment[fr]=Script KWin
 Comment[ga]=Script KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripting/scriptedeffect.cpp kwin/scripting/scriptedeffect.cpp
--- kwin-5.19.0/scripting/scriptedeffect.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripting/scriptedeffect.cpp	2020-05-23 22:06:04.503820708 -0500
@@ -22,6 +22,9 @@
 #include "meta.h"
 #include "scriptingutils.h"
 #include "workspace_wrapper.h"
+#ifndef KWINLL_NO_OPTIONS
+#include "../options.h"
+#endif
 #include "../screens.h"
 #include "../screenedge.h"
 #include "scripting_logging.h"
@@ -153,7 +156,27 @@
         settings.curve = static_cast<QEasingCurve::Type>(curve.toInt32());
         settings.set |= AnimationSettings::Curve;
     } else {
-        settings.curve = QEasingCurve::Linear;
+#ifndef KWINLL_NO_OPTIONS
+      switch (options->animationCurve()) {
+        case 1:
+          settings.curve = QEasingCurve::InOutQuad;
+          break;
+        case 2:
+          settings.curve = QEasingCurve::InOutSine;
+          break;
+        case 3:
+          settings.curve = QEasingCurve::InOutCubic;
+          break;
+        case 4:
+          settings.curve = QEasingCurve::InOutQuart;
+          break;
+        default:
+          settings.curve = QEasingCurve::Linear;
+          break;
+      }
+#else
+      settings.curve = QEasingCurve::InOutSine;
+#endif
     }
 
     QScriptValue type = object.property(QStringLiteral("type"));
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripts/desktopchangeosd/metadata.desktop kwin/scripts/desktopchangeosd/metadata.desktop
--- kwin-5.19.0/scripts/desktopchangeosd/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripts/desktopchangeosd/metadata.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Desktop Change OSD
 Name[es]=Información en pantalla sobre cambio de escritorio
 Name[et]=Töölaua muutmise ekraaniesitus
-Name[eu]=Mahaigain-aldaketari buruzko informazioa OSD
 Name[fi]=Työpöydänvaihdon ilmoitus
 Name[fr]=OSD pour le changement de bureau
 Name[gl]=OSD de cambio de escritorio
@@ -57,7 +56,6 @@
 Comment[en_GB]=An on screen display indicating the desktop change
 Comment[es]=Una información en pantalla que indica el cambio de escritorio
 Comment[et]=Töölaua muutumist näitab ekraanikuva
-Comment[eu]=Mahaigain-aldaketa adierazten duen pantailako informazioa
 Comment[fi]=Näytölle ilmestyvä ilmoitus työpöydän vaihdosta
 Comment[fr]=Un affichage sur l'écran (OSD) indiquant le changement de bureau
 Comment[gl]=Un visor na pantalla que indica o cambio de escritorio
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripts/minimizeall/metadata.desktop kwin/scripts/minimizeall/metadata.desktop
--- kwin-5.19.0/scripts/minimizeall/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripts/minimizeall/metadata.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -9,7 +9,6 @@
 Name[en_GB]=MinimiseAll
 Name[es]=Minimizar todo
 Name[et]=Kõigi minimeerimine
-Name[eu]=Minimizatu guztiak
 Name[fi]=Pienennä kaikki
 Name[fr]=Tout réduire
 Name[gl]=Minimizalo todo
@@ -50,7 +49,6 @@
 Comment[en_GB]=Adds a shortcut to minimise and restore all windows
 Comment[es]=Añade un acceso rápido para minimizar y restaurar todas la ventanas
 Comment[et]=Kiirklahvi lisamine kõigi akende minimeerimiseks või sel moel minimeeritud akende suuruse taastamiseks
-Comment[eu]=Lasterbide bat eransten du leiho guztiak minimizatu eta lehengoratzeko
 Comment[fi]=Lisää pikanäppäimen, joka pienentää tai palauttaa kaikki ikkunat
 Comment[fr]=Ajoute un raccourci pour réduire ou afficher toutes les fenêtres
 Comment[gl]=Engade un atallo para minimizar e restaurar todas as xanelas.
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripts/synchronizeskipswitcher/metadata.desktop kwin/scripts/synchronizeskipswitcher/metadata.desktop
--- kwin-5.19.0/scripts/synchronizeskipswitcher/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripts/synchronizeskipswitcher/metadata.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Synchronize Skip Switcher with Taskbar
 Name[es]=Sincronizar «Omitir cambiador» con la barra de tareas
 Name[et]=Vahelejätmise lülitaja sünkroonimine tegumiribaga
-Name[eu]=Sinkronizatu Saltatu kommutadorea ataza-barrarekin
 Name[fi]=Synkronoi tehtävävaihdon ohitus tehtäväpalkin kanssa
 Name[fr]=Synchroniser le sélecteur de fenêtres à ignorer avec la barre de tâches
 Name[gl]=Sincronizar o ignorar o alternador coa barra de tarefas
@@ -55,7 +54,6 @@
 Comment[en_GB]=Hides all windows marked as Skip Taskbar to be also excluded from window switchers (e.g. Alt+Tab)
 Comment[es]=Oculta todas las ventanas marcadas como «Omitir barra de tareas» para que también sean excluidas de los selectores de ventana (por ejemplo, Alt+Tab)
 Comment[et]=Kõigi tegumiribalt väljajäetavaks märgitud akende peitmine, et neid ei kaasataks ka aknavahetajatesse (nt Alt+Tab)
-Comment[eu]='Saltatu ataza-barra' gisa markatuta dauden leiho guztiak ezkutatzen ditu leiho-kommutadoretik kanpo ere uzteko (adib., Alt+Tab)
 Comment[fi]=Piilottaa kaikki tehtäväpalkin ohittavat ikkunat myös tehtävävaihdosta (esim. Alt+sarkain)
 Comment[fr]=Cache toutes les fenêtres marquées comme « À ignorer » dans la barre des tâches pour les exclure du sélecteur de fenêtres (c'est-à-dire « Alt »+ « Tab »)
 Comment[gl]=Agocha todas as xanelas que deban ser ignoradas pola barra de tarefas tamén dos alternadores de xanelas (p.ex. Alt+Tab)
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/scripts/videowall/metadata.desktop kwin/scripts/videowall/metadata.desktop
--- kwin-5.19.0/scripts/videowall/metadata.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/scripts/videowall/metadata.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -10,7 +10,6 @@
 Name[en_GB]=Video Wall
 Name[es]=Panel de vídeo
 Name[et]=Videosein
-Name[eu]=Bideo-horma
 Name[fi]=Videoseinä
 Name[fr]=Mur de vidéos
 Name[ga]=Balla Físe
@@ -57,7 +56,6 @@
 Comment[en_GB]=Spans fullscreen video player over all attached screens to create a Video Wall
 Comment[es]=Extiende el reproductor de vídeo a pantalla completa sobre todas las pantallas conectadas para crear un panel de vídeo
 Comment[et]=Täisekraan-videomängija laiendamine kõigile ühendatud ekraanile videoseina loomiseks
-Comment[eu]=Bideo-jotzailea pantaila osoaren moduan erantsitako pantaila guztietan zabaltzen du bideo-horma bat sortzeko.
 Comment[fi]=Levittää koko näytön tilassa olevan videotoistimen kaikkiin yhdistettyihin näyttöihin luoden videoseinän
 Comment[fr]=Étend le lecteur vidéo en mode plein écran sur l'ensemble des écrans connectés afin de créer un mur de vidéos
 Comment[gl]=Estende un reprodutor de vídeo a pantalla completa por todas as pantallas anexas para crear unha parede de vídeo
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/tabbox/kwindesktopswitcher.desktop kwin/tabbox/kwindesktopswitcher.desktop
--- kwin-5.19.0/tabbox/kwindesktopswitcher.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/tabbox/kwindesktopswitcher.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -13,7 +13,6 @@
 Comment[en_GB]=KWin Desktop Switcher Layout
 Comment[es]=Esquema del cambiador de escritorios de KWin
 Comment[et]=KWini töölauavahetaja paigutus
-Comment[eu]=KWin leiho-aldatzailearen diseinua
 Comment[fi]=KWinin työpöydänvalitsimen asettelu
 Comment[fr]=Une disposition du sélecteur de bureaux KWin
 Comment[gl]=Disposición do selector de escritorios de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/tabbox/kwinwindowswitcher.desktop kwin/tabbox/kwinwindowswitcher.desktop
--- kwin-5.19.0/tabbox/kwinwindowswitcher.desktop	2020-06-08 05:58:58.000000000 -0500
+++ kwin/tabbox/kwinwindowswitcher.desktop	2020-06-09 12:51:19.453398051 -0500
@@ -13,7 +13,6 @@
 Comment[en_GB]=KWin Window Switcher Layout
 Comment[es]=Esquema del cambiador de ventanas de KWin
 Comment[et]=KWini aknavahetaja paigutus
-Comment[eu]=KWin-eko leiho-kommutadorearen diseinua
 Comment[fi]=KWinin ikkunanvalitsimen asettelu
 Comment[fr]=Disposition du sélecteur de fenêtres de KWin
 Comment[gl]=Disposición do alternador de xanelas de KWin
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/toplevel.cpp kwin/toplevel.cpp
--- kwin-5.19.0/toplevel.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/toplevel.cpp	2020-06-09 12:51:19.453398051 -0500
@@ -35,6 +35,8 @@
 
 #include <QDebug>
 
+#include <unistd.h>
+
 namespace KWin
 {
 
@@ -277,6 +279,7 @@
     effect_window = new EffectWindowImpl(this);
 
     Compositor::self()->scene()->addToplevel(this);
+    Compositor::self()->checkUnredirect(true);
 
     return true;
 }
@@ -285,6 +288,7 @@
 {
     if (kwinApp()->operationMode() == Application::OperationModeX11 && damage_handle == XCB_NONE)
         return;
+    Compositor::self()->checkUnredirect(true);
     if (effect_window->window() == this) { // otherwise it's already passed to Deleted, don't free data
         discardWindowPixmap();
         delete effect_window;
@@ -803,5 +807,41 @@
     return QMargins();
 }
 
+bool Toplevel::updateUnredirectedState()
+{
+    assert(compositing());
+    bool should = options->isUnredirectFullscreen() && shouldUnredirect() && !unredirectSuspend &&
+                  !shape() && !hasAlpha() && opacity() == 1.0 &&
+                  !static_cast<EffectsHandlerImpl*>(effects)->activeFullScreenEffect();
+    if (should) usleep(50000);
+    if (should == unredirect)
+        return false;
+    static QElapsedTimer lastUnredirect;
+    static const qint64 msecRedirectInterval = 100;
+    if (!lastUnredirect.hasExpired(msecRedirectInterval)) {
+        QTimer::singleShot(msecRedirectInterval, Compositor::self(), static_cast<void (Compositor::*)()>(&Compositor::checkUnredirect));
+        return false;
+    }
+    lastUnredirect.start();
+    unredirect = should;
+    if (unredirect) {
+        qCDebug(KWIN_CORE) << "Unredirecting:" << this;
+        xcb_composite_unredirect_window(connection(), frameId(), XCB_COMPOSITE_REDIRECT_MANUAL);
+    } else {
+        qCDebug(KWIN_CORE) << "Redirecting:" << this;
+        xcb_composite_redirect_window(connection(), frameId(), XCB_COMPOSITE_REDIRECT_MANUAL);
+        discardWindowPixmap();
+    }
+    return true;
+}
+
+void Toplevel::suspendUnredirect(bool suspend)
+{
+    if (unredirectSuspend == suspend)
+        return;
+    unredirectSuspend = suspend;
+    Compositor::self()->checkUnredirect();
+}
+
 } // namespace
 
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/toplevel.h kwin/toplevel.h
--- kwin-5.19.0/toplevel.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/toplevel.h	2020-06-09 12:51:19.456731384 -0500
@@ -444,6 +444,9 @@
     bool hasAlpha() const;
     virtual bool setupCompositing();
     virtual void finishCompositing(ReleaseReason releaseReason = ReleaseReason::Release);
+    bool updateUnredirectedState();
+    bool unredirected() const;
+    void suspendUnredirect(bool suspend);
     Q_INVOKABLE void addRepaint(const QRect& r);
     Q_INVOKABLE void addRepaint(const QRegion& r);
     Q_INVOKABLE void addRepaint(int x, int y, int w, int h);
@@ -703,6 +706,7 @@
     void disownDataPassedToDeleted();
     friend QDebug& operator<<(QDebug& stream, const Toplevel*);
     void deleteEffectWindow();
+    virtual bool shouldUnredirect() const = 0;
     void setDepth(int depth);
     QRect m_frameGeometry;
     xcb_visualid_t m_visual;
@@ -732,6 +736,8 @@
     QByteArray resource_class;
     ClientMachine *m_clientMachine;
     xcb_window_t m_wmClientLeader;
+    bool unredirect;
+    bool unredirectSuspend; // when unredirected, but pixmap is needed temporarily
     bool m_damageReplyPending;
     QRegion opaque_region;
     xcb_xfixes_fetch_region_cookie_t m_regionCookie;
@@ -985,6 +991,11 @@
     return resource_class; // it is always lowercase
 }
 
+inline bool Toplevel::unredirected() const
+{
+    return unredirect;
+}
+
 inline const ClientMachine *Toplevel::clientMachine() const
 {
     return m_clientMachine;
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/tva.md kwin/tva.md
--- kwin-5.19.0/tva.md	1969-12-31 19:00:00.000000000 -0500
+++ kwin/tva.md	2020-05-23 22:06:04.503820708 -0500
@@ -0,0 +1,65 @@
+# Tilde van Arrow
+
+the ultimate project to optimize KWin and cut the rough edges.
+the compositor should do nothing more than render windows in the exact time.
+it is unknown why do some things take too long to render, such as moving between desktop, using present windows or even switching windows.
+those are detrimental to smoothness and cause stutter.
+
+this document is incomplete.
+
+# possibilities
+
+- too much processing when switching windows
+- the need to recreate every single texture
+- Qt is too high-level
+
+# solutions
+
+## window switch stutter
+
+even after using the most basic theme, switching windows causes stutter.
+maybe the toplevel is doing too much, or some effect...
+
+## texture recreation
+
+certain heavier themes cause more lag spikes. come on why can't we have a cache so we don't have to re-render everything?
+decoration rendering is done in software so yeah...
+
+## Qt is too high-level
+
+...we could replace certain unneeded Qt parts by our own ones, and perhaps improve performance...
+
+## kwin-lowerlatencyandlowpower
+
+what about we go single-buffer, somehow make the card always wait for VBlank (or near-VBlank) and let that be it?
+
+what about we use an hybrid setup?
+
+- single-buffering when the compositor is not doing anything fancy
+- double-buffering when it is
+- clients that want VSync will have a big wait before present
+- clients that don't, will be redrawn immediately (this may cause tearing), Quartz-style
+
+## let's learn OpenGL
+
+because this could allow for further optimizations on lower-end systems.
+
+I just do not think KWin is optimized enough... for them...
+
+## come on let's catch up already
+
+if we do not do anything about this soon, the other guy working at Mutter will destroy KWin in performance.
+
+sadly I think we already lost the race, because GNOME is beginning to run on Pi, and... KDE still does not :<
+
+come on they will defeat us and team uid will get a chance to achieve World Domination!! like this
+
+> Qt is there because Canonical used it to validate their own CLA. Basically “We are happy to sign Qt’s CLA so you should be happy to sign our CLA”. Fortunately that failed as well.
+
+oh come on 144Hz you are SO annoying!
+
+# frequently asked questions
+
+> KDE is a downstream, Qt has CLA and C++ is an unwise choice. GNOME is the Standard-
+
+144Hz. [look here](https://www.youtube.com/watch?v=VZlWCBhoCns&t=56s).
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/unmanaged.cpp kwin/unmanaged.cpp
--- kwin-5.19.0/unmanaged.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/unmanaged.cpp	2020-06-09 12:51:19.460064718 -0500
@@ -215,5 +215,35 @@
     return true;
 }
 
+bool Unmanaged::shouldUnredirect() const
+{
+    // the pixmap is needed for the login effect, a nicer solution would be the login effect increasing
+    // refcount for the window pixmap (which would prevent unredirect), avoiding this hack
+    if (resourceClass() == "ksplashx"
+            || resourceClass() == "ksplashsimple"
+            || resourceClass() == "ksplashqml"
+            )
+        return false;
+    // it must cover whole display or one xinerama screen, and be the topmost there
+    const int desktop = VirtualDesktopManager::self()->current();
+    // TODO: this mess o-o
+    if (frameGeometry() == workspace()->clientArea(FullArea, frameGeometry().center(), desktop)
+            || frameGeometry() == workspace()->clientArea(ScreenArea, frameGeometry().center(), desktop)) {
+        QList<Toplevel*> stacking = workspace()->xStackingOrder();
+        for (int pos = stacking.count() - 1;
+                pos >= 0;
+                --pos) {
+            Toplevel* c = stacking.at(pos);
+            if (c == this)   // is not covered by any other window, ok to unredirect
+                return true;
+            // TODO: check if this works
+            if (c->frameGeometry().intersects(bufferGeometry()))
+                return false;
+        }
+        abort();
+    }
+    return false;
+}
+
 } // namespace
 
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/unmanaged.h kwin/unmanaged.h
--- kwin-5.19.0/unmanaged.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/unmanaged.h	2020-05-23 22:06:04.503820708 -0500
@@ -57,6 +57,7 @@
     void release(ReleaseReason releaseReason = ReleaseReason::Release);
 protected:
     void debug(QDebug& stream) const override;
+    bool shouldUnredirect() const override;
     void addDamage(const QRegion &damage) override;
 private:
     ~Unmanaged() override; // use release()
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/unredirect.md kwin/unredirect.md
--- kwin-5.19.0/unredirect.md	1969-12-31 19:00:00.000000000 -0500
+++ kwin/unredirect.md	2020-05-23 22:06:04.503820708 -0500
@@ -0,0 +1,30 @@
+# fullscreen unredirection
+
+this version of the compositor brings back the ability to unredirect fullscreen windows, which has been originally removed by the KDE developers because they thought their "block compositing" approach would be the future.
+
+their "block compositing" approach has 3 flaws:
+
+- it actually fully disables the compositor (which means it will take a while for it to re-enable)
+- it can get annoying (especially with SDL apps. SDL requests KWin to disable compositing, even if not in fullscreen!)
+- every application must be coded to support it. with unredirection it works on most apps without giving the developers extra burden.
+
+however, fullscreen unredirection also has its flaws:
+
+- in some setups it may crash, according to KDE developers
+- some applications may interfere and prevent it from working
+
+# non-working/crashing setups
+
+none so far. please contact me if your setup causes KWin to crash with unredirection.
+
+# known issues
+
+the following applications prevent unredirection from working:
+
+- applications using the old tray mechanism (e.g. calfjackhost or Battle.net). they create a 32x32 invisible window at the top left corner, which becomes visible when you aren't using Plasma or some other desktop that doesn't support this mechanism.
+  - however, a workaround has been applied as of v5.16.2-2 but I am not sure whether it works well or not.
+- [latte-dock](https://github.com/tildearrow/kwin-lowlatency/issues/1#issuecomment-483403493) (sometimes)
+
+the following applications may misbehave when unredirection is enabled:
+
+- some Wine applications. after switching windows [they may turn black and hang](https://github.com/tildearrow/kwin-lowlatency/issues/25).
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/workspace.cpp kwin/workspace.cpp
--- kwin-5.19.0/workspace.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/workspace.cpp	2020-06-09 12:51:19.460064718 -0500
@@ -540,6 +540,11 @@
         connect(c, &X11Client::blockingCompositingChanged, compositor, &X11Compositor::updateClientCompositeBlocking);
     }
     connect(c, SIGNAL(clientFullScreenSet(KWin::X11Client *,bool,bool)), ScreenEdges::self(), SIGNAL(checkBlocking()));
+    connect(c, &X11Client::activeChanged, m_compositor, static_cast<void (Compositor::*)()>(&Compositor::checkUnredirect));
+    // THIS ONE PLEASE
+    connect(c, &X11Client::fullScreenChanged, m_compositor, static_cast<void (Compositor::*)()>(&Compositor::checkUnredirect));
+    connect(c, &X11Client::geometryChanged, m_compositor, static_cast<void (Compositor::*)()>(&Compositor::checkUnredirect));
+    connect(c, &X11Client::geometryShapeChanged, m_compositor, static_cast<void (Compositor::*)()>(&Compositor::checkUnredirect));
     if (!c->manage(w, is_mapped)) {
         X11Client::deleteClient(c);
         return nullptr;
@@ -1966,6 +1971,9 @@
     if (effects) {
         static_cast<EffectsHandlerImpl*>(effects)->desktopResized(geom.size());
     }
+
+    // best guess.
+    m_compositor->checkUnredirect(true);
 }
 
 void Workspace::saveOldScreenSizes()
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/x11client.cpp kwin/x11client.cpp
--- kwin-5.19.0/x11client.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/x11client.cpp	2020-06-09 12:51:19.463398050 -0500
@@ -1602,6 +1602,9 @@
         m_decoInputExtent.map();
         updateHiddenPreview();
     }
+    if (Compositor::self()->isActive()) {
+        Compositor::self()->checkUnredirect();
+    }
     emit windowShown(this);
 }
 
@@ -1617,6 +1620,9 @@
         updateHiddenPreview();
     addWorkspaceRepaint(visibleRect());
     workspace()->clientHidden(this);
+    if (Compositor::self()->isActive()) {
+        Compositor::self()->checkUnredirect();
+    }
     emit windowHidden(this);
 }
 
@@ -1635,6 +1641,9 @@
     updateHiddenPreview();
     addWorkspaceRepaint(visibleRect());
     workspace()->clientHidden(this);
+    if (Compositor::self()->isActive()) {
+        Compositor::self()->checkUnredirect();
+    }
 }
 
 /**
@@ -2896,6 +2905,10 @@
     updateWindowRules(Rules::Position);
     screens()->setCurrent(this);
     workspace()->updateStackingOrder();
+    if (Compositor::self()->isActive()) {
+        // TODO: there was a todo here but I don't know
+        Compositor::self()->checkUnredirect();
+    }
     // client itself is not damaged
     if (frameGeometryBeforeUpdateBlocking() != frameGeometry()) {
         emit frameGeometryChanged(this, frameGeometryBeforeUpdateBlocking());
@@ -4753,10 +4766,11 @@
     if (m_syncRequest.counter != XCB_NONE) {
         m_syncRequest.timeout->start(250);
         sendSyncRequest();
-    } else {                              // for clients not supporting the XSYNC protocol, we
-        m_syncRequest.isPending = true;   // limit the resizes to 30Hz to take pointless load from X11
-        m_syncRequest.timeout->start(33); // and the client, the mouse is still moved at full speed
-    }                                     // and no human can control faster resizes anyway
+    } else {
+        m_syncRequest.isPending = true;   // 30Hz resizes are so old and it makes the compositor
+        m_syncRequest.timeout->start(5);  // look horrible. zero excuses.
+    }
+
     const QRect moveResizeClientGeometry = frameRectToClientRect(moveResizeGeometry());
     const QRect moveResizeBufferGeometry = frameRectToBufferRect(moveResizeGeometry());
 
@@ -4988,4 +5002,35 @@
     }
 }
 
+// TODO THIS
+bool X11Client::shouldUnredirect() const
+{
+    if (isActiveFullScreen()) {
+        if (!rules()->checkAllowUnredirect(true)) return false;
+        QList<Toplevel*> stacking = workspace()->xStackingOrder();
+        for (int pos = stacking.count() - 1;
+                pos >= 0;
+                --pos) {
+            Toplevel* c = stacking.at(pos);
+            if (c == this) {   // is not covered by any other window, ok to unredirect
+                //printf("yes.\n");
+                return true;
+            }
+            if (c->frameGeometry().intersects(frameGeometry())) {
+                // check whether this is an invisible floating icon at the top left corner
+                if (c->frameGeometry()==QRect(0,0,32,32)) {
+                  //printf("yes via hack.\n");
+                  return true;
+                }
+                //printf("no. this: %d %d %d %d. other: %d %d %d %d.\n",geometry().x(),geometry().y(),geometry().width(),geometry().height(),c->geometry().x(),c->geometry().y(),c->geometry().width(),c->geometry().height());
+                return false;
+            }
+        }
+        //printf("ABORT\n");
+        abort();
+    }
+    return false;
+}
+
+
 } // namespace
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/x11client.h kwin/x11client.h
--- kwin-5.19.0/x11client.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/x11client.h	2020-06-09 12:51:19.463398050 -0500
@@ -343,6 +343,7 @@
 
 protected:
     void debug(QDebug& stream) const override;
+    bool shouldUnredirect() const override;
     void addDamage(const QRegion &damage) override;
     bool belongsToSameApplication(const AbstractClient *other, SameApplicationChecks checks) const override;
     void doSetActive() override;
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/xdgshellclient.cpp kwin/xdgshellclient.cpp
--- kwin-5.19.0/xdgshellclient.cpp	2020-06-08 05:58:58.000000000 -0500
+++ kwin/xdgshellclient.cpp	2020-06-09 12:51:19.463398050 -0500
@@ -2022,4 +2022,9 @@
     m_pingSerials.insert(serial, reason);
 }
 
+bool XdgShellClient::shouldUnredirect() const
+{
+    return false;
+}
+
 }
diff -ruNx .git -x build -x .clang-format -x .kdev4 -x po kwin-5.19.0/xdgshellclient.h kwin/xdgshellclient.h
--- kwin-5.19.0/xdgshellclient.h	2020-06-08 05:58:58.000000000 -0500
+++ kwin/xdgshellclient.h	2020-06-09 12:51:19.463398050 -0500
@@ -65,6 +65,7 @@
     QRect transparentRect() const override;
     NET::WindowType windowType(bool direct = false, int supported_types = 0) const override;
     void debug(QDebug &stream) const override;
+    bool shouldUnredirect() const override;
     double opacity() const override;
     void setOpacity(double opacity) override;
     QByteArray windowRole() const override;
